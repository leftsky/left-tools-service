import{d as ae,r as m,f as se,g as re,o as p,w as ne,b as e,a as f,i as $,t as r,n as K,F as N,j as Q,k as j,v as E,l as X,m as q}from"./app-DQDsthFS.js";import{_ as ie}from"./Layout.vue_vue_type_script_setup_true_lang-BGFxKDuQ.js";import{F as ue,t as A,f as G}from"./index-bIxDAEjd.js";const de={class:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},ce={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},ve={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},me={class:"flex items-center"},ge={class:"text-blue-800 dark:text-blue-200"},pe={class:"mb-8"},fe={class:"mt-4"},be={key:0,class:"mt-2 text-sm text-blue-600 dark:text-blue-400"},xe={key:1,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},ke={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400"},he={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},we={class:"text-xs font-medium text-gray-900 dark:text-white mb-2"},ye={class:"space-y-1 text-xs text-gray-600 dark:text-gray-400"},Fe={class:"mb-8"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Me={key:0},Ve=["value"],Ce={class:"text-center"},Se=["disabled"],Ie={key:0,class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={key:1,class:"inline-block h-5 w-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:0,class:"mt-8"},Ee={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},De={key:1,class:"mt-8"},Be={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Pe={key:0,class:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md"},Te={class:"text-xs text-blue-700 dark:text-blue-300"},Ue={key:0},He={key:2,class:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},R="https://cdn.jsdelivr.net/npm/@ffmpeg/core-mt@0.12.10/dist/esm",We=ae({__name:"VideoConverter",setup(ze){const T=m(!1),h=m(!1),V=m(!1),c=m(0),d=m(null),C=m(null),S=m(""),O=m("请选择视频文件开始转换"),b=m(null),v=m([]),M=m(0),s=m(null),n=t=>{O.value=t,console.log(`[VideoConverter] ${t}`)},I=m("mp4"),D=m("high"),B=m("original"),P=m("original"),w=m("auto"),u=new ue;se(async()=>{u.off("log"),u.off("progress"),u.on("log",({message:t})=>{var o;if(h.value?(console.log(`[FFmpeg转换] ${t}`),n(t)):(t.includes("Duration:")||t.includes("Video:")||t.includes("Audio:"))&&console.log(`[FFmpeg信息] ${t}`),t.includes("Duration:")){const a=t.match(/Duration: (\d{2}):(\d{2}):(\d{2}\.\d{2})/);if(a){const l=parseInt(a[1]),i=parseInt(a[2]),x=parseFloat(a[3]),k=l*3600+i*60+x;s.value||(s.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),s.value.duration=k}}if(t.includes("Video:")){console.log("解析视频信息行:",t);const a=t.match(/(\d{3,4})x(\d{3,4})/),l=t.match(/(\d+) fps/),i=t.match(/Video: (\w+)/),x=t.match(/(\d+) kb\/s/);if(s.value||(s.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),a){const k=parseInt(a[1]),y=parseInt(a[2]);k>=100&&y>=100?(s.value.resolution=`${k}x${y}`,console.log("解析到分辨率:",s.value.resolution)):console.log("分辨率值不合理，跳过:",k,"x",y)}l&&(s.value.fps=parseInt(l[1]),console.log("解析到帧率:",s.value.fps)),i&&(s.value.videoCodec=i[1],console.log("解析到视频编解码器:",s.value.videoCodec)),x&&(s.value.bitrate=`${x[1]} kb/s`,console.log("解析到比特率:",s.value.bitrate))}if(t.includes("Audio:")){const a=t.match(/Audio: (\w+)/),l=t.match(/Stream #0:(\d+)/),i=t.match(/(\d+) channels/),x=t.match(/(\d+) Hz/),k=t.match(/\((\w+)\)/);if(s.value||(s.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),a&&(s.value.audioCodec=a[1]),l){const y=parseInt(l[1]),H={index:y,codec:a?a[1]:"未知",channels:i?parseInt(i[1]):2,sampleRate:x?parseInt(x[1]):48e3,language:k?k[1]:void 0};v.value.findIndex(L=>L.index===y)===-1&&(v.value.push(H),console.log("检测到音频流:",H))}}if(t.includes("frame=")){const a=t.match(/frame=\s*(\d+)/);if(a&&h.value){const l=parseInt(a[1]),i=((o=b.value)==null?void 0:o.totalFrames)||111,x=Math.min(l/i*70,70);c.value=20+x,console.log(`[转换进度] ${l}/${i} 帧 (${c.value.toFixed(1)}%) - ${new Date().toLocaleTimeString()}`)}}if(h.value){if(t.includes("Stream mapping:"))console.log("[转换阶段] 开始流映射...");else if(t.includes("Output #0"))console.log("[转换阶段] 开始输出...");else if(t.includes("frame=")&&t.includes("fps=")){const a=t.match(/fps=\s*(\d+)/);a&&console.log(`[转换性能] 当前FPS: ${a[1]}`)}}}),u.on("progress",({progress:t,time:o})=>{console.log(`[VideoConverter] 转换进度: ${t*100}%, 时间: ${o}`),t>0&&(c.value=20+t*70)});try{V.value=!0,n("正在加载FFmpeg...");const t=setInterval(()=>{c.value<80&&(c.value+=5,n(`正在加载FFmpeg... ${c.value}%`))},200);await u.load({coreURL:await A(`${R}/ffmpeg-core.js`,"text/javascript"),wasmURL:await A(`${R}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await A(`${R}/ffmpeg-core.worker.js`,"text/javascript")}),clearInterval(t),c.value=100,n("FFmpeg加载完成！"),T.value=!0,V.value=!1,console.log("检查ffprobe可用性:",typeof u.ffprobe),console.log("FFmpeg对象:",u),await new Promise(o=>setTimeout(o,1e3)),n("请选择视频文件开始转换"),c.value=0}catch(t){console.error("FFmpeg加载失败:",t),n("FFmpeg加载失败，请刷新页面重试"),V.value=!1}});const J=async t=>{const o=t.target;o.files&&o.files[0]&&(d.value=o.files[0],C.value=null,S.value="",c.value=0,b.value=null,n(`已选择文件: ${d.value.name}`),await W())},Y=async t=>{var o;console.log(t),t.preventDefault(),(o=t.dataTransfer)!=null&&o.files&&t.dataTransfer.files[0]&&(d.value=t.dataTransfer.files[0],C.value=null,S.value="",c.value=0,b.value=null,n(`已选择文件: ${d.value.name}`),await W())},Z=t=>{t.preventDefault()},W=async()=>{if(d.value){if(!T.value){n("FFmpeg尚未加载完成，无法读取视频信息");return}try{n("正在读取视频信息..."),s.value=null,v.value=[],M.value=0;const t=U(d.value.name);await u.writeFile(`temp_input.${t}`,await G(d.value)),console.log("尝试使用exec获取视频信息...");try{if(await u.exec(["-i",`temp_input.${t}`]),s.value&&s.value.duration>0){const o=Math.round(s.value.duration*s.value.fps);b.value={duration:s.value.duration,fps:s.value.fps,totalFrames:o,resolution:s.value.resolution,bitrate:s.value.bitrate,format:t},n(`视频信息读取成功: ${s.value.resolution}, ${s.value.duration.toFixed(2)}秒, ${s.value.fps}fps`),console.log("解析到的视频信息:",s.value),console.log("检测到的音频流:",v.value)}else throw new Error("无法解析视频信息")}catch(o){throw console.error("exec命令失败:",o),new Error("无法读取视频信息")}await u.deleteFile(`temp_input.${t}`)}catch(t){console.error("读取视频信息失败:",t),n("读取视频信息失败，无法继续转换"),b.value=null,d.value=null}}},ee=async()=>{var t,o;if(!d.value||!u){alert("请先选择视频文件");return}console.log("=== 开始转换 ==="),console.log("FFmpeg实例:",u),console.log("选择文件:",d.value.name,"大小:",(d.value.size/1024/1024).toFixed(2),"MB"),console.log("输出格式:",I.value),console.log("视频质量:",D.value),console.log("分辨率设置:",B.value),console.log("帧率设置:",P.value),h.value=!0,c.value=0,n("正在加载FFmpeg...");try{if(!T.value){n("FFmpeg尚未加载完成，请稍候...");return}n("开始转换..."),c.value=10;const a=U(d.value.name),l=I.value;n("正在写入输入文件..."),console.log("开始写入输入文件...");const i=Date.now();await u.writeFile(`input.${a}`,await G(d.value));const x=Date.now()-i;console.log(`文件写入完成，耗时: ${x}ms`),c.value=20;const k=oe(a,l);n("开始转换..."),console.log("执行FFmpeg命令:",k.join(" ")),console.log("转换开始时间:",new Date().toLocaleTimeString());const y=new Promise((g,L)=>{setTimeout(()=>{L(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)});try{const g=Date.now();await Promise.race([u.exec(k),y]);const L=Date.now()-g;console.log("FFmpeg转换命令执行完成"),console.log(`转换耗时: ${L}ms`),console.log("转换结束时间:",new Date().toLocaleTimeString()),c.value=90}catch(g){if(console.error("FFmpeg执行错误:",g),console.error("错误详情:",g.stack),g.message.includes("stream")||g.message.includes("map")||g.message.includes("audio")||g.message.includes("invalid")){console.log("检测到流映射错误，尝试简化映射..."),n("流映射错误，尝试简化映射...");const z=[["-i",`input.${a}`,"-c:v","libx264","-preset","ultrafast","-crf","23","-c:a","aac","-b:a","128k","-y",`output.${l}`],["-i",`input.${a}`,"-an","-c:v","libx264","-preset","ultrafast","-crf","23","-y",`output.${l}`],["-i",`input.${a}`,"-map","0:v","-map","0:a","-c:v","libx264","-preset","ultrafast","-crf","23","-c:a","aac","-b:a","128k","-y",`output.${l}`]];for(let F=0;F<z.length;F++){const _=z[F];console.log(`尝试策略 ${F+1}:`,_.join(" ")),n(`尝试策略 ${F+1}...`);try{await Promise.race([u.exec(_),y]),console.log(`策略 ${F+1} 成功`),n(`策略 ${F+1} 转换成功`),c.value=90;break}catch(le){if(console.error(`策略 ${F+1} 失败:`,le.message),F===z.length-1)throw new Error(`所有转换策略都失败: ${g.message}`)}}}else throw new Error(`转换执行失败: ${g.message}`)}n("正在读取输出文件...");const H=await u.readFile(`output.${l}`);C.value=new Blob([H.buffer],{type:`video/${l}`}),S.value=URL.createObjectURL(C.value),c.value=100,n("转换完成！");try{const g=U(((t=d.value)==null?void 0:t.name)||"");await u.deleteFile(`input.${g}`),await u.deleteFile(`output.${l}`),console.log("转换完成，已清理临时文件")}catch(g){console.warn("清理临时文件失败:",g)}}catch(a){console.error("=== 转换失败 ==="),console.error("错误类型:",a.constructor.name),console.error("错误消息:",a.message),console.error("错误堆栈:",a.stack);let l="转换失败，请检查文件格式或重试";a.message.includes("超时")?l="转换超时，建议：1. 尝试更小的文件 2. 降低视频质量设置 3. 检查网络连接":a.message.includes("编码器")?l="编码器错误，建议：1. 尝试不同的输出格式 2. 检查输入文件是否损坏":a.message.includes("内存")?l="内存不足，建议：1. 关闭其他程序 2. 尝试更小的文件":a.message.includes("stream")||a.message.includes("map")?l="流映射错误，建议：1. 尝试选择'仅视频'选项 2. 检查音频流是否兼容 3. 尝试不同的输出格式":(a.message.includes("音频")||a.message.includes("audio"))&&(l="音频处理错误，建议：1. 选择'仅视频'选项 2. 尝试不同的音频处理模式 3. 检查音频编码器兼容性"),n(l),alert(l);try{const i=U(((o=d.value)==null?void 0:o.name)||""),x=I.value;await u.deleteFile(`input.${i}`),await u.deleteFile(`output.${x}`),console.log("已清理临时文件")}catch(i){console.warn("清理临时文件失败:",i)}}finally{h.value=!1,V.value=!1,console.log("=== 转换流程结束 ===")}},oe=(t,o)=>{const a=["-i",`input.${t}`];if(a.push("-y"),a.push("-loglevel","info"),console.log("=== 流映射调试信息 ==="),console.log("音频流数量:",v.value.length),console.log("音频处理模式:",w.value),console.log("选中的音频流索引:",M.value),console.log("所有音频流:",v.value),w.value==="none")a.push("-an");else if(v.value.length===1)a.push("-map","0:v","-map","0:a"),console.log("单个音频流，使用简单映射: -map 0:v -map 0:a");else if(v.value.length>1){a.push("-map","0:v");const i=v.value[M.value];i?(a.push("-map",`0:a:${i.index-1}`),console.log(`多个音频流，映射音频流 ${i.index}: ${i.codec}`)):(a.push("-map","0:a:0"),console.log("使用默认音频流 0:a:0"))}else console.log("未检测到音频流，使用默认映射");if(B.value!=="original"){const i={"4k":"3840:2160","1080p":"1920:1080","720p":"1280:720","480p":"854:480"};a.push("-vf",`scale=${i[B.value]}`)}P.value!=="original"&&a.push("-r",P.value);const l=D.value==="high"?18:D.value==="medium"?23:28;if(a.push("-c:v","libx264","-preset","ultrafast","-crf",l.toString()),w.value!=="none")switch(o){case"mp4":case"mov":case"mkv":case"wmv":case"flv":a.push("-c:a","aac","-b:a","128k");break;case"avi":a.push("-c:a","mp3","-b:a","128k");break}return a.push(`output.${o}`),console.log("FFmpeg命令:",a.join(" ")),a},U=t=>{var o;return((o=t.split(".").pop())==null?void 0:o.toLowerCase())||"mp4"},te=()=>{if(C.value&&S.value){const t=document.createElement("a");t.href=S.value,t.download=`converted.${I.value}`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}};return(t,o)=>(p(),re(ie,{title:"视频格式转换 - 小左子的工具箱"},{default:ne(()=>{var a;return[o[34]||(o[34]=e("div",{class:"bg-white dark:bg-gray-800 shadow-sm"},[e("div",{class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},[e("div",{class:"flex items-center space-x-4"},[e("div",{class:"h-12 w-12 rounded-lg bg-blue-600 flex items-center justify-center"},[e("svg",{class:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])]),e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"视频格式转换"),e("p",{class:"text-gray-600 dark:text-gray-400"},"支持多种格式视频转换，快速高效")])])])],-1)),e("div",de,[e("div",ce,[e("div",ve,[e("div",me,[o[6]||(o[6]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",ge,r(O.value),1)])]),e("div",pe,[o[11]||(o[11]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 选择视频文件 ",-1)),e("div",{onDrop:Y,onDragover:Z,class:K(["border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":d.value}])},[o[10]||(o[10]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",fe,[o[8]||(o[8]=e("label",{for:"file-upload",class:"cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 选择文件 ",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"video/*",onChange:J},null,32),o[9]||(o[9]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 支持 MP4, AVI, MOV, MKV, WMV 等格式 ",-1)),d.value?(p(),f("p",be," 已选择: "+r(d.value.name),1)):$("",!0),b.value?(p(),f("div",xe,[o[7]||(o[7]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," 视频信息 ",-1)),e("div",ke,[e("div",null,"时长: "+r(b.value.duration.toFixed(2))+"秒",1),e("div",null,"帧率: "+r(b.value.fps.toFixed(2))+"fps",1),e("div",null,"总帧数: "+r(b.value.totalFrames),1),e("div",null,"分辨率: "+r(b.value.resolution),1),e("div",null,"比特率: "+r(b.value.bitrate),1),e("div",null,"格式: "+r(b.value.format),1)]),v.value.length>0?(p(),f("div",he,[e("h5",we," 音频流 ("+r(v.value.length)+"个) ",1),e("div",ye,[(p(!0),f(N,null,Q(v.value,l=>(p(),f("div",{key:l.index,class:K({"text-blue-600 dark:text-blue-400 font-medium":l.index===M.value})}," 流 "+r(l.index)+": "+r(l.codec)+" ("+r(l.channels)+"声道, "+r(l.sampleRate)+"Hz) "+r(l.language?`[${l.language}]`:"")+" "+r(l.index===M.value?"✓":""),3))),128))])])):$("",!0)])):$("",!0)])],34)]),e("div",Fe,[o[23]||(o[23]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 转换选项 ",-1)),e("div",$e,[e("div",null,[o[13]||(o[13]=e("label",{for:"output-format",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 输出格式 ",-1)),j(e("select",{id:"output-format","onUpdate:modelValue":o[0]||(o[0]=l=>I.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[12]||(o[12]=[e("option",{value:"mp4"},"MP4",-1),e("option",{value:"avi"},"AVI",-1),e("option",{value:"mov"},"MOV",-1),e("option",{value:"mkv"},"MKV",-1),e("option",{value:"wmv"},"WMV",-1),e("option",{value:"flv"},"FLV",-1)]),512),[[E,I.value]])]),e("div",null,[o[15]||(o[15]=e("label",{for:"video-quality",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频质量 ",-1)),j(e("select",{id:"video-quality","onUpdate:modelValue":o[1]||(o[1]=l=>D.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[14]||(o[14]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"中等质量",-1),e("option",{value:"low"},"低质量",-1)]),512),[[E,D.value]])]),e("div",null,[o[17]||(o[17]=e("label",{for:"resolution",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 分辨率 ",-1)),j(e("select",{id:"resolution","onUpdate:modelValue":o[2]||(o[2]=l=>B.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[16]||(o[16]=[e("option",{value:"original"},"保持原分辨率",-1),e("option",{value:"4k"},"4K (3840x2160)",-1),e("option",{value:"1080p"},"1080p (1920x1080)",-1),e("option",{value:"720p"},"720p (1280x720)",-1),e("option",{value:"480p"},"480p (854x480)",-1)]),512),[[E,B.value]])]),e("div",null,[o[19]||(o[19]=e("label",{for:"framerate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 帧率 ",-1)),j(e("select",{id:"framerate","onUpdate:modelValue":o[3]||(o[3]=l=>P.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[18]||(o[18]=[e("option",{value:"original"},"保持原帧率",-1),e("option",{value:"60"},"60 FPS",-1),e("option",{value:"30"},"30 FPS",-1),e("option",{value:"25"},"25 FPS",-1),e("option",{value:"24"},"24 FPS",-1)]),512),[[E,P.value]])]),e("div",null,[o[21]||(o[21]=e("label",{for:"audio-mode",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 音频处理 ",-1)),j(e("select",{id:"audio-mode","onUpdate:modelValue":o[4]||(o[4]=l=>w.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[20]||(o[20]=[e("option",{value:"auto"},"自动（推荐）",-1),e("option",{value:"keep"},"保留音频",-1),e("option",{value:"none"},"仅视频",-1)]),512),[[E,w.value]])]),w.value!=="none"&&v.value.length>1?(p(),f("div",Me,[o[22]||(o[22]=e("label",{for:"audio-stream",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 音频流选择 ",-1)),j(e("select",{id:"audio-stream","onUpdate:modelValue":o[5]||(o[5]=l=>M.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(p(!0),f(N,null,Q(v.value,l=>(p(),f("option",{key:l.index,value:l.index}," 流 "+r(l.index)+": "+r(l.codec)+" ("+r(l.channels)+"声道, "+r(l.sampleRate)+"Hz) "+r(l.language?`[${l.language}]`:""),9,Ve))),128))],512),[[E,M.value]])])):$("",!0)])]),e("div",Ce,[e("button",{onClick:ee,disabled:!d.value||!b.value||h.value||!T.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[h.value?(p(),f("svg",Le,o[25]||(o[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(p(),f("svg",Ie,o[24]||(o[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))),X(" "+r(h.value?"转换中...":"开始转换"),1)],8,Se)]),V.value?(p(),f("div",je,[o[26]||(o[26]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," FFmpeg加载进度 ",-1)),e("div",Ee,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:q({width:c.value+"%"})},null,4)]),o[27]||(o[27]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 正在加载FFmpeg核心文件，请稍候... ",-1))])):$("",!0),h.value&&!V.value?(p(),f("div",De,[o[29]||(o[29]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"转换进度",-1)),e("div",Be,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:q({width:c.value+"%"})},null,4)]),o[30]||(o[30]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 正在转换中，请稍候... ",-1)),v.value.length>0?(p(),f("div",Pe,[o[28]||(o[28]=e("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2"}," 流映射状态 ",-1)),e("div",Te,[e("div",null,"音频流数量: "+r(v.value.length),1),e("div",null,"处理模式: "+r(w.value==="auto"?"自动":w.value==="keep"?"保留音频":"仅视频"),1),w.value!=="none"&&v.value.length>0?(p(),f("div",Ue," 选中音频流: "+r(((a=v.value[M.value])==null?void 0:a.codec)||"未知"),1)):$("",!0)])])):$("",!0)])):$("",!0),C.value&&S.value?(p(),f("div",He,[e("div",{class:"flex items-center justify-between"},[o[32]||(o[32]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-green-800 dark:text-green-200"},"转换完成！")],-1)),e("button",{onClick:te,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},o[31]||(o[31]=[e("svg",{class:"inline-block h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),X(" 下载文件 ",-1)]))])])):$("",!0)]),o[33]||(o[33]=e("div",{class:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"功能说明"),e("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输入格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid, DivX)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输出格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])])]),e("div",{class:"space-y-4"},[e("div",{class:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-blue-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," 隐私保护 "),e("p",{class:"text-sm text-blue-700 dark:text-blue-300 mt-1"}," 所有视频转换都在您的浏览器本地进行，文件不会上传到服务器，确保您的隐私安全。 ")])])]),e("div",{class:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-yellow-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"}," 音频处理说明 "),e("p",{class:"text-sm text-yellow-700 dark:text-yellow-300 mt-1"},' 如果转换过程中音频处理失败，系统会自动尝试仅视频转换。建议选择"仅视频"选项以获得最佳兼容性。 ')])])])])],-1))])]}),_:1,__:[34]}))}});export{We as default};
