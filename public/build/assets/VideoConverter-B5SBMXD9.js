var ke=Object.defineProperty;var te=r=>{throw TypeError(r)};var Ee=(r,t,i)=>t in r?ke(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var V=(r,t,i)=>Ee(r,typeof t!="symbol"?t+"":t,i),ie=(r,t,i)=>t.has(r)||te("Cannot "+i);var c=(r,t,i)=>(ie(r,t,"read from private field"),i?i.call(r):t.get(r)),A=(r,t,i)=>t.has(r)?te("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,i),U=(r,t,i,d)=>(ie(r,t,"write to private field"),d?d.call(r,i):t.set(r,i),i);import{r as k,l as Me,f as Ve,o as D,w as Ce,b as e,a as S,g as W,t as P,n as Ie,i as K,m as J,j as se,p as re}from"./app-MthtLvJ7.js";import{_ as Pe}from"./Layout.vue_vue_type_script_setup_true_lang-DWek3DIu.js";var f;(function(r){r.LOAD="LOAD",r.EXEC="EXEC",r.FFPROBE="FFPROBE",r.WRITE_FILE="WRITE_FILE",r.READ_FILE="READ_FILE",r.DELETE_FILE="DELETE_FILE",r.RENAME="RENAME",r.CREATE_DIR="CREATE_DIR",r.LIST_DIR="LIST_DIR",r.DELETE_DIR="DELETE_DIR",r.ERROR="ERROR",r.DOWNLOAD="DOWNLOAD",r.PROGRESS="PROGRESS",r.LOG="LOG",r.MOUNT="MOUNT",r.UNMOUNT="UNMOUNT"})(f||(f={}));const De=(()=>{let r=0;return()=>r++})(),Fe=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Re=new Error("called FFmpeg.terminate()");var I,O,F,_,T,Q,C;class Ae{constructor(){A(this,I,null);A(this,O,{});A(this,F,{});A(this,_,[]);A(this,T,[]);V(this,"loaded",!1);A(this,Q,()=>{c(this,I)&&(c(this,I).onmessage=({data:{id:t,type:i,data:d}})=>{switch(i){case f.LOAD:this.loaded=!0,c(this,O)[t](d);break;case f.MOUNT:case f.UNMOUNT:case f.EXEC:case f.FFPROBE:case f.WRITE_FILE:case f.READ_FILE:case f.DELETE_FILE:case f.RENAME:case f.CREATE_DIR:case f.LIST_DIR:case f.DELETE_DIR:c(this,O)[t](d);break;case f.LOG:c(this,_).forEach(n=>n(d));break;case f.PROGRESS:c(this,T).forEach(n=>n(d));break;case f.ERROR:c(this,F)[t](d);break}delete c(this,O)[t],delete c(this,F)[t]})});A(this,C,({type:t,data:i},d=[],n)=>c(this,I)?new Promise((m,x)=>{const E=De();c(this,I)&&c(this,I).postMessage({id:E,type:t,data:i},d),c(this,O)[E]=m,c(this,F)[E]=x,n==null||n.addEventListener("abort",()=>{x(new DOMException(`Message # ${E} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(Fe));V(this,"load",({classWorkerURL:t,...i}={},{signal:d}={})=>(c(this,I)||(U(this,I,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/build/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),c(this,Q).call(this)),c(this,C).call(this,{type:f.LOAD,data:i},void 0,d)));V(this,"exec",(t,i=-1,{signal:d}={})=>c(this,C).call(this,{type:f.EXEC,data:{args:t,timeout:i}},void 0,d));V(this,"ffprobe",(t,i=-1,{signal:d}={})=>c(this,C).call(this,{type:f.FFPROBE,data:{args:t,timeout:i}},void 0,d));V(this,"terminate",()=>{const t=Object.keys(c(this,F));for(const i of t)c(this,F)[i](Re),delete c(this,F)[i],delete c(this,O)[i];c(this,I)&&(c(this,I).terminate(),U(this,I,null),this.loaded=!1)});V(this,"writeFile",(t,i,{signal:d}={})=>{const n=[];return i instanceof Uint8Array&&n.push(i.buffer),c(this,C).call(this,{type:f.WRITE_FILE,data:{path:t,data:i}},n,d)});V(this,"mount",(t,i,d)=>{const n=[];return c(this,C).call(this,{type:f.MOUNT,data:{fsType:t,options:i,mountPoint:d}},n)});V(this,"unmount",t=>{const i=[];return c(this,C).call(this,{type:f.UNMOUNT,data:{mountPoint:t}},i)});V(this,"readFile",(t,i="binary",{signal:d}={})=>c(this,C).call(this,{type:f.READ_FILE,data:{path:t,encoding:i}},void 0,d));V(this,"deleteFile",(t,{signal:i}={})=>c(this,C).call(this,{type:f.DELETE_FILE,data:{path:t}},void 0,i));V(this,"rename",(t,i,{signal:d}={})=>c(this,C).call(this,{type:f.RENAME,data:{oldPath:t,newPath:i}},void 0,d));V(this,"createDir",(t,{signal:i}={})=>c(this,C).call(this,{type:f.CREATE_DIR,data:{path:t}},void 0,i));V(this,"listDir",(t,{signal:i}={})=>c(this,C).call(this,{type:f.LIST_DIR,data:{path:t}},void 0,i));V(this,"deleteDir",(t,{signal:i}={})=>c(this,C).call(this,{type:f.DELETE_DIR,data:{path:t}},void 0,i))}on(t,i){t==="log"?c(this,_).push(i):t==="progress"&&c(this,T).push(i)}off(t,i){t==="log"?U(this,_,c(this,_).filter(d=>d!==i)):t==="progress"&&U(this,T,c(this,T).filter(d=>d!==i))}}I=new WeakMap,O=new WeakMap,F=new WeakMap,_=new WeakMap,T=new WeakMap,Q=new WeakMap,C=new WeakMap;var ne;(function(r){r.MEMFS="MEMFS",r.NODEFS="NODEFS",r.NODERAWFS="NODERAWFS",r.IDBFS="IDBFS",r.WORKERFS="WORKERFS",r.PROXYFS="PROXYFS"})(ne||(ne={}));const Se=new Error("failed to get response body reader"),Oe=new Error("failed to complete download"),_e="Content-Length",Te=r=>new Promise((t,i)=>{const d=new FileReader;d.onload=()=>{const{result:n}=d;n instanceof ArrayBuffer?t(new Uint8Array(n)):t(new Uint8Array)},d.onerror=n=>{var m,x;i(Error(`File could not be read! Code=${((x=(m=n==null?void 0:n.target)==null?void 0:m.error)==null?void 0:x.code)||-1}`))},d.readAsArrayBuffer(r)}),de=async r=>{let t;if(typeof r=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(r)?t=atob(r.split(",")[1]).split("").map(i=>i.charCodeAt(0)):t=await(await fetch(r)).arrayBuffer();else if(r instanceof URL)t=await(await fetch(r)).arrayBuffer();else if(r instanceof File||r instanceof Blob)t=await Te(r);else return new Uint8Array;return new Uint8Array(t)},Le=async(r,t)=>{var n;const i=await fetch(r);let d;try{const m=parseInt(i.headers.get(_e)||"-1"),x=(n=i.body)==null?void 0:n.getReader();if(!x)throw Se;const E=[];let R=0;for(;;){const{done:h,value:p}=await x.read(),g=p?p.length:0;if(h){if(m!=-1&&m!==R)throw Oe;t&&t({url:r,total:m,received:R,delta:g,done:h});break}E.push(p),R+=g,t&&t({url:r,total:m,received:R,delta:g,done:h})}const L=new Uint8Array(R);let B=0;for(const h of E)L.set(h,B),B+=h.length;d=L.buffer}catch(m){console.log("failed to send download progress event: ",m),d=await i.arrayBuffer()}return d},ee=async(r,t,i=!1,d)=>{const n=i?await Le(r,d):await(await fetch(r)).arrayBuffer(),m=new Blob([n],{type:t});return URL.createObjectURL(m)},Ge={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},We={class:"grid grid-cols-1 lg:grid-cols-10 gap-8"},Be={class:"lg:col-span-6 order-1 lg:order-2"},He={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},Ne={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},Xe={class:"flex items-center"},$e={class:"text-blue-800 dark:text-blue-200"},Ue={class:"mb-8"},je={class:"mt-4"},ze={key:0,class:"mt-2 text-sm text-blue-600 dark:text-blue-400"},qe={key:1,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},Ke={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400"},Je={class:"mb-8"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ye={class:"text-center"},Ze=["disabled"],ea={key:0,class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},aa={key:1,class:"inline-block h-5 w-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oa={key:0,class:"mt-8"},la={class:"flex items-center justify-between mb-2"},ta={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},ia={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},sa={key:1,class:"mt-8"},ra={class:"flex items-center justify-between mb-2"},na={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},da={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},ua={key:2,class:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},ca={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},va={class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},ma={class:"mt-2"},ba={class:"text-sm text-gray-500 dark:text-gray-400 whitespace-pre-line"},pa={class:"mt-4 flex justify-end"},ae="https://cdn.jsdelivr.net/npm/@ffmpeg/core-mt@0.12.10/dist/esm",wa={__name:"VideoConverter",setup(r){const t=k(!1),i=k(!1),d=k(!1),n=k(0),m=k(null),x=k(null),E=k(""),R=k("请选择视频文件开始转换"),L=k(!1),B=k(""),h=k(null),p=k({duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),g=o=>{R.value=o,console.log(`[VideoConverter] ${o}`)},ue=o=>{B.value=o,L.value=!0},H=k("mp4"),w=k("high"),j=k("original"),z=k("original"),N={input:[{value:"mp4",label:"MP4 (H.264/H.265)",codecs:["h264","h265","hevc"]},{value:"avi",label:"AVI (Xvid/DivX)",codecs:["xvid","divx","h264"]},{value:"mov",label:"MOV (QuickTime)",codecs:["h264","h265","prores"]},{value:"mkv",label:"MKV (Matroska)",codecs:["h264","h265","vp8","vp9"]},{value:"wmv",label:"WMV (Windows Media)",codecs:["wmv1","wmv2","wmv3"]},{value:"flv",label:"FLV (Flash Video)",codecs:["h264","vp6"]},{value:"webm",label:"WebM (Web Video)",codecs:["vp8","vp9","av1"]},{value:"m4v",label:"M4V (iTunes)",codecs:["h264","h265"]},{value:"3gp",label:"3GP (Mobile)",codecs:["h264","h263"]},{value:"ogv",label:"OGV (Ogg Video)",codecs:["theora"]},{value:"ts",label:"TS (Transport Stream)",codecs:["h264","h265"]},{value:"mts",label:"MTS (AVCHD)",codecs:["h264"]},{value:"rm",label:"RM (RealMedia)",codecs:["rv40","rv50"]},{value:"rmvb",label:"RMVB (RealMedia)",codecs:["rv40","rv50"]},{value:"asf",label:"ASF (Advanced Systems)",codecs:["wmv1","wmv2"]},{value:"vob",label:"VOB (DVD Video)",codecs:["mpeg2","h264"]},{value:"mpg",label:"MPG (MPEG-1/2)",codecs:["mpeg1","mpeg2"]},{value:"mpeg",label:"MPEG (MPEG-1/2)",codecs:["mpeg1","mpeg2"]},{value:"divx",label:"DIVX (DivX)",codecs:["divx","h264"]},{value:"xvid",label:"XVID (Xvid)",codecs:["xvid"]},{value:"swf",label:"SWF (Flash)",codecs:["vp6","h264"]},{value:"f4v",label:"F4V (Flash Video)",codecs:["h264"]},{value:"m2ts",label:"M2TS (Blu-ray)",codecs:["h264","h265"]},{value:"mxf",label:"MXF (Material Exchange)",codecs:["h264","h265","prores"]},{value:"gif",label:"GIF (Animated)",codecs:["gif"]},{value:"apng",label:"APNG (Animated PNG)",codecs:["apng"]},{value:"bmp",label:"BMP (Bitmap)",codecs:["bmp"]},{value:"png",label:"PNG (Portable Network)",codecs:["png"]},{value:"jpg",label:"JPEG (Joint Photographic)",codecs:["mjpeg"]},{value:"jpeg",label:"JPEG (Joint Photographic)",codecs:["mjpeg"]},{value:"tiff",label:"TIFF (Tagged Image)",codecs:["tiff"]},{value:"tga",label:"TGA (Targa)",codecs:["tga"]},{value:"ico",label:"ICO (Icon)",codecs:["ico"]},{value:"pcx",label:"PCX (PC Paintbrush)",codecs:["pcx"]},{value:"ppm",label:"PPM (Portable Pixmap)",codecs:["ppm"]},{value:"pgm",label:"PGM (Portable Graymap)",codecs:["pgm"]},{value:"pbm",label:"PBM (Portable Bitmap)",codecs:["pbm"]},{value:"sgi",label:"SGI (Silicon Graphics)",codecs:["sgi"]},{value:"cin",label:"CIN (Cineon)",codecs:["cin"]},{value:"dpx",label:"DPX (Digital Picture)",codecs:["dpx"]},{value:"exr",label:"EXR (OpenEXR)",codecs:["exr"]},{value:"hdr",label:"HDR (High Dynamic Range)",codecs:["hdr"]},{value:"webp",label:"WebP (Web Picture)",codecs:["webp"]},{value:"avif",label:"AVIF (AV1 Image)",codecs:["av1"]},{value:"heic",label:"HEIC (HEIF)",codecs:["hevc"]},{value:"heif",label:"HEIF (High Efficiency)",codecs:["hevc"]}],output:[{value:"mp4",label:"MP4 (H.264/H.265)",videoCodec:"libx264",audioCodec:"aac"},{value:"avi",label:"AVI (Xvid)",videoCodec:"libxvid",audioCodec:"mp3"},{value:"mov",label:"MOV (QuickTime)",videoCodec:"libx264",audioCodec:"aac"},{value:"mkv",label:"MKV (Matroska)",videoCodec:"libx264",audioCodec:"aac"},{value:"wmv",label:"WMV (Windows Media)",videoCodec:"wmv2",audioCodec:"wmav2"},{value:"flv",label:"FLV (Flash Video)",videoCodec:"libx264",audioCodec:"mp3"},{value:"webm",label:"WebM (Web Video)",videoCodec:"libvpx",audioCodec:"libvorbis"},{value:"m4v",label:"M4V (iTunes)",videoCodec:"libx264",audioCodec:"aac"},{value:"3gp",label:"3GP (Mobile)",videoCodec:"libx264",audioCodec:"aac"},{value:"ogv",label:"OGV (Ogg Video)",videoCodec:"libtheora",audioCodec:"libvorbis"},{value:"ts",label:"TS (Transport Stream)",videoCodec:"libx264",audioCodec:"aac"},{value:"mts",label:"MTS (AVCHD)",videoCodec:"libx264",audioCodec:"aac"},{value:"asf",label:"ASF (Advanced Systems)",videoCodec:"wmv2",audioCodec:"wmav2"},{value:"vob",label:"VOB (DVD Video)",videoCodec:"mpeg2video",audioCodec:"mp2"},{value:"mpg",label:"MPG (MPEG-1/2)",videoCodec:"mpeg2video",audioCodec:"mp2"},{value:"mpeg",label:"MPEG (MPEG-1/2)",videoCodec:"mpeg2video",audioCodec:"mp2"},{value:"divx",label:"DIVX (DivX)",videoCodec:"libxvid",audioCodec:"mp3"},{value:"xvid",label:"XVID (Xvid)",videoCodec:"libxvid",audioCodec:"mp3"},{value:"swf",label:"SWF (Flash)",videoCodec:"flv",audioCodec:"mp3"},{value:"f4v",label:"F4V (Flash Video)",videoCodec:"libx264",audioCodec:"aac"},{value:"m2ts",label:"M2TS (Blu-ray)",videoCodec:"libx264",audioCodec:"aac"},{value:"mxf",label:"MXF (Material Exchange)",videoCodec:"libx264",audioCodec:"aac"},{value:"gif",label:"GIF (Animated)",videoCodec:"gif",audioCodec:null},{value:"apng",label:"APNG (Animated PNG)",videoCodec:"apng",audioCodec:null},{value:"webp",label:"WebP (Web Picture)",videoCodec:"libwebp",audioCodec:null},{value:"avif",label:"AVIF (AV1 Image)",videoCodec:"libaom-av1",audioCodec:null},{value:"heic",label:"HEIC (HEIF)",videoCodec:"libx265",audioCodec:null},{value:"heif",label:"HEIF (High Efficiency)",videoCodec:"libx265",audioCodec:null}]},y=new Ae;Me(async()=>{y.off("log",()=>{}),y.off("progress",()=>{}),y.on("log",({message:o})=>{var a;if(i.value){if(o.includes("frame=")&&o.includes("fps=")||o.includes("size=")&&o.includes("bitrate="))return;(o.includes("Stream mapping:")||o.includes("Output #")||o.includes("video:")||o.includes("audio:")||o.includes("muxing overhead:"))&&console.log(`[FFmpeg] ${o}`)}else(o.includes("Duration:")||o.includes("Video:")||o.includes("Audio:"))&&console.log(`[FFmpeg] ${o}`);if(o.includes("Duration:")){const l=o.match(/Duration: (\d{2}):(\d{2}):(\d{2}\.\d{2})/);if(l){const u=parseInt(l[1]),s=parseInt(l[2]),b=parseFloat(l[3]),v=u*3600+s*60+b;p.value||(p.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),p.value.duration=v}}if(o.includes("Video:")){const l=o.match(/(\d{3,4})x(\d{3,4})/),u=o.match(/(\d+) fps/),s=o.match(/Video: (\w+)/),b=o.match(/(\d+) kb\/s/);if(p.value||(p.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),l){const v=parseInt(l[1]),M=parseInt(l[2]);v>=100&&M>=100&&(p.value.resolution=`${v}x${M}`)}u&&(p.value.fps=parseInt(u[1])),s&&(p.value.videoCodec=s[1]),b&&(p.value.bitrate=`${b[1]} kb/s`)}if(o.includes("Audio:")){const l=o.match(/Audio: (\w+)/);p.value||(p.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),l&&(p.value.audioCodec=l[1])}if(o.includes("frame=")){const l=o.match(/frame=\s*(\d+)/);if(l&&i.value){const u=parseInt(l[1]),s=((a=h.value)==null?void 0:a.totalFrames)||111,b=Math.min(u/s*.4,.4);n.value=b*100}}}),y.on("progress",({progress:o})=>{});try{d.value=!0,g("正在加载资源...");const o=setInterval(()=>{n.value<80&&(n.value+=5,g(`正在加载资源... ${n.value}%`))},200);await y.load({coreURL:await ee(`${ae}/ffmpeg-core.js`,"text/javascript"),wasmURL:await ee(`${ae}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await ee(`${ae}/ffmpeg-core.worker.js`,"text/javascript")}),clearInterval(o),n.value=100,g("资源加载完成！"),t.value=!0,d.value=!1,await new Promise(a=>setTimeout(a,1e3)),g("请选择视频文件开始转换"),n.value=0}catch(o){console.error("FFmpeg加载失败:",o),g("资源加载失败，请刷新页面重试"),d.value=!1}});const ce=async o=>{const a=o.target;a.files&&a.files[0]&&(m.value=a.files[0],x.value=null,E.value="",n.value=0,h.value=null,g(`已选择文件: ${m.value.name}`),await oe())},ve=async o=>{var a;console.log(o),o.preventDefault(),(a=o.dataTransfer)!=null&&a.files&&o.dataTransfer.files[0]&&(m.value=o.dataTransfer.files[0],x.value=null,E.value="",n.value=0,h.value=null,g(`已选择文件: ${m.value.name}`),await oe())},me=o=>{o.preventDefault()},oe=async()=>{if(m.value){if(!t.value){g("资源尚未加载完成，无法读取视频信息");return}try{g("正在读取视频信息..."),p.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"};const o=le(m.value.name);await y.writeFile(`temp_input.${o}`,await de(m.value)),console.log("尝试使用exec获取视频信息...");try{if(await y.exec(["-i",`temp_input.${o}`]),p.value&&p.value.duration>0){const a=Math.round(p.value.duration*p.value.fps);h.value={duration:p.value.duration,fps:p.value.fps,totalFrames:a,resolution:p.value.resolution,bitrate:p.value.bitrate,format:o},g(`视频信息读取成功: ${p.value.resolution}, ${p.value.duration.toFixed(2)}秒, ${p.value.fps}fps`),console.log("解析到的视频信息:",p.value)}else throw new Error("无法解析视频信息")}catch(a){throw console.error("exec命令失败:",a),new Error("无法读取视频信息")}await y.deleteFile(`temp_input.${o}`)}catch(o){console.error("读取视频信息失败:",o),g("读取视频信息失败，无法继续转换"),h.value=null,m.value=null}}},be=async()=>{if(!m.value||!y){alert("请先选择视频文件");return}const o=100*1024*1024;if(m.value.size>o){alert("文件过大，请选择小于100MB的文件");return}const a=le(m.value.name),l=H.value;console.log("开始转换:",m.value.name,"→",H.value,"文件大小:",m.value.size,"字节"),i.value=!0,n.value=0,g("正在加载资源...");try{if(!t.value){g("资源尚未加载完成，请稍候...");return}g("开始转换..."),n.value=0,g("正在写入输入文件..."),await y.writeFile(`input.${a}`,await de(m.value)),n.value=0,await pe(a,l),g("正在读取输出文件...");try{const u=await y.readFile(`output.${l}`);if(!u||u.length===0)throw new Error("输出文件为空或无效");x.value=new Blob([u.buffer],{type:`video/${l}`}),E.value=URL.createObjectURL(x.value),n.value=100,g("转换完成！"),console.log("转换成功，文件大小:",u.length,"字节"),await Y(a,l)}catch(u){console.error("读取输出文件失败:",u);try{const s=await y.readFile(`video_only.${l}`);if(s&&s.length>0){x.value=new Blob([s.buffer],{type:`video/${l}`}),E.value=URL.createObjectURL(x.value),n.value=100,g("转换完成！（仅视频）"),console.log("转换成功（仅视频），文件大小:",s.length,"字节"),await Y(a,l);return}}catch(s){console.error("视频文件也不存在:",s)}throw new Error(`读取输出文件失败: ${u.message||u.toString()}`)}}catch(u){console.error("转换失败:",u.message||u.toString());let s="转换失败，请检查文件格式或重试";const b=u.message||u.toString()||"";b.includes("超时")?s="转换超时，建议：1. 尝试更小的文件 2. 降低视频质量设置 3. 检查网络连接":b.includes("编码器")?s="编码器错误，建议：1. 尝试不同的输出格式 2. 检查输入文件是否损坏":b.includes("内存")||b.includes("memory access out of bounds")?s="内存不足，建议：1. 关闭其他程序 2. 尝试更小的文件 3. 降低视频质量设置":b.includes("FS error")||b.includes("文件")?s="文件系统错误，建议：1. 刷新页面重试 2. 检查文件格式 3. 尝试不同的输出格式":l==="avi"&&(b.includes("内存")||b.includes("memory"))?s="AVI格式转换失败，建议：1. 尝试其他输出格式（如MP4） 2. 降低视频质量设置 3. 检查输入文件是否损坏":b.includes("stream")||b.includes("map")?s="流映射错误，建议：1. 尝试选择'仅视频'选项 2. 检查音频流是否兼容 3. 尝试不同的输出格式":(b.includes("音频")||b.includes("audio"))&&(s="音频处理错误，建议：1. 选择'仅视频'选项 2. 尝试不同的音频处理模式 3. 检查音频编码器兼容性"),g(s),ue(s),await we(u,a,l),await Y(a,l)}finally{i.value=!1,d.value=!1}},pe=async(o,a)=>{let l=0,u=0,s=0;const b=new Promise((v,M)=>{setTimeout(()=>{M(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)});try{const v=N.output.find(G=>G.value===a),M=!(v!=null&&v.audioCodec);g("正在转码视频..."),n.value=0;const X=fe(o,a),Z=Date.now();if(await Promise.race([y.exec(X),b]),l=Date.now()-Z,n.value=M?100:40,!M){g("正在处理音频..."),n.value=40;const G=ge(o,a);if(G){const $=Date.now();await Promise.race([y.exec(G),b]),u=Date.now()-$}n.value=80,g("正在合并视频和音频..."),n.value=80;const q=he(a);if(q){const $=Date.now();await Promise.race([y.exec(q),b]),s=Date.now()-$}n.value=100}console.log("转码完成，总耗时:",l+u+s,"ms")}catch(v){throw console.error("转码失败:",v),v}},fe=(o,a)=>{const l=["-i",`input.${o}`];if(j.value!=="original"){const v={"4k":"3840:2160","1080p":"1920:1080","720p":"1280:720","480p":"854:480"};l.push("-vf",`scale=${v[j.value]}`)}z.value!=="original"&&l.push("-r",z.value);const u=N.output.find(v=>v.value===a),s=(u==null?void 0:u.videoCodec)||"libx264",b=w.value==="high"?18:w.value==="medium"?23:28;if(s==="libx264"||s==="libx265")l.push("-c:v",s,"-preset","ultrafast","-crf",b.toString(),"-threads","2","-max_muxing_queue_size","1024");else if(s==="libvpx"){const v=w.value==="high"?"good":(w.value==="medium","realtime");l.push("-c:v",s,"-quality",v,"-crf",b.toString())}else if(s==="libtheora"){const v=w.value==="high"?"8":w.value==="medium"?"6":"4";l.push("-c:v",s,"-q:v",v)}else if(s==="wmv2"){const v=w.value==="high"?"2000k":w.value==="medium"?"1000k":"500k";l.push("-c:v",s,"-b:v",v)}else if(s==="mpeg2video"){const v=w.value==="high"?"4000k":w.value==="medium"?"2000k":"1000k";l.push("-c:v",s,"-b:v",v)}else if(s==="libxvid"){const v=w.value==="high"?"3":w.value==="medium"?"5":"7";l.push("-c:v",s,"-qscale:v",v,"-pix_fmt","yuv420p","-g","30","-bf","2")}else if(s==="gif"||s==="apng")l.push("-c:v",s);else if(s==="libwebp"){const v=w.value==="high"?"90":w.value==="medium"?"70":"50";l.push("-c:v",s,"-quality",v)}else if(s==="libaom-av1"){const v=w.value==="high"?"20":w.value==="medium"?"30":"40";l.push("-c:v",s,"-crf",v)}else l.push("-c:v","libx264","-preset","ultrafast","-crf",b.toString());return s!=="gif"&&s!=="apng"&&s!=="libwebp"&&s!=="libaom-av1"&&l.push("-an"),l.push("-y",`video_only.${a}`),l},ge=(o,a)=>{const l=["-i",`input.${o}`];l.push("-vn");const u=N.output.find(b=>b.value===a),s=u==null?void 0:u.audioCodec;return s?(s==="mp3"?(l.push("-c:a","mp3","-b:a","128k","-ar","44100","-ac","2"),l.push("-y","audio.mp3")):s==="aac"?(l.push("-c:a","aac","-b:a","128k","-ar","48000"),l.push("-y","audio.aac")):s==="libvorbis"?(l.push("-c:a","libvorbis","-b:a","128k","-ar","48000"),l.push("-y","audio.ogg")):s==="wmav2"?(l.push("-c:a","wmav2","-b:a","128k","-ar","44100"),l.push("-y","audio.wma")):s==="mp2"?(l.push("-c:a","mp2","-b:a","192k","-ar","48000"),l.push("-y","audio.mp2")):(l.push("-c:a","aac","-b:a","128k","-ar","48000"),l.push("-y","audio.aac")),l):null},he=o=>{const a=N.output.find(b=>b.value===o),l=a==null?void 0:a.audioCodec;if(!l)return null;let u="audio.aac";l==="mp3"?u="audio.mp3":l==="libvorbis"?u="audio.ogg":l==="wmav2"?u="audio.wma":l==="mp2"&&(u="audio.mp2");const s=["-i",`video_only.${o}`,"-i",u,"-c:v","copy","-c:a","copy","-shortest"];return o==="avi"&&s.push("-pix_fmt","yuv420p","-avoid_negative_ts","make_zero"),s.push("-y",`output.${o}`),s},Y=async(o,a)=>{try{const l=N.output.find(v=>v.value===a),u=l==null?void 0:l.audioCodec;let s="audio.aac";u==="mp3"?s="audio.mp3":u==="libvorbis"?s="audio.ogg":u==="wmav2"?s="audio.wma":u==="mp2"&&(s="audio.mp2");const b=[`input.${o}`,`video_only.${a}`,s,`output.${a}`];for(const v of b)try{await y.deleteFile(v)}catch(M){console.warn("删除临时文件失败:",M)}}catch(l){console.warn("清理临时文件失败:",l)}},le=o=>{var a;return((a=o.split(".").pop())==null?void 0:a.toLowerCase())||"mp4"},we=async(o,a,l)=>{var u;try{const s=()=>{const M=navigator.userAgent.toLowerCase(),X=window.screen.width,Z=/mobile|android|iphone|ipad|phone|blackberry|opera mini|iemobile/i.test(M),G=/tablet|ipad|android(?=.*\b(?!mobile\b)(?:tablet|sdk))/i.test(M),q=X<=768,$=X>768&&X<=1024;return Z||q?"mobile":G||$?"tablet":"desktop"},b={error_type:"video_conversion_failed",error_message:o.message||o.toString(),input_format:a,output_format:l,file_size:((u=m.value)==null?void 0:u.size)||0,user_agent:navigator.userAgent,browser_fingerprint:"",device_type:s(),screen_resolution:`${window.screen.width}x${window.screen.height}`},v=await fetch("/api/access-log/error",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(b)});if(v.ok){const M=await v.json();M.code===1?console.log("转换错误日志已记录"):console.warn("记录转换错误失败:",M.message)}else console.warn("记录转换错误失败:",v.status)}catch(s){console.warn("记录转换错误时出错:",s)}},xe=async()=>{try{const o=await fetch("/api/tools/record-usage-public",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({tool_name:"视频转码"})});o.ok?console.log("工具使用记录已保存"):console.warn("工具使用记录失败:",o.status)}catch(o){console.warn("记录工具使用时出错:",o)}},ye=async()=>{if(x.value&&E.value&&m.value){const o=document.createElement("a");o.href=E.value;const a=m.value.name,l=a.substring(0,a.lastIndexOf("."));o.download=`${l}.${H.value}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),await xe()}};return(o,a)=>(D(),Ve(Pe,{title:"视频格式转换工具 - 在线MP4、AVI、MOV、MKV转换器 | 小左子的工具箱"},{default:Ce(()=>[e("div",Ge,[e("div",We,[a[28]||(a[28]=e("div",{class:"lg:col-span-4 order-2 lg:order-1"},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 lg:sticky lg:top-8"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 在线视频格式转换工具 "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," 专业的在线视频格式转换器，支持MP4、AVI、MOV、MKV等多种格式转换。无需下载软件，免费在线使用，快速高效。 "),e("div",{class:"grid grid-cols-2 gap-4"},[e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输入格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid, DivX)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)"),e("li",null,"• WebM (VP8, VP9, AV1)"),e("li",null,"• M4V (iTunes)"),e("li",null,"• 3GP (Mobile)"),e("li",null,"• OGV (Ogg Video)"),e("li",null,"• TS/MTS (Transport Stream)"),e("li",null,"• RM/RMVB (RealMedia)"),e("li",null,"• ASF (Advanced Systems)"),e("li",null,"• VOB (DVD Video)"),e("li",null,"• MPG/MPEG (MPEG-1/2)"),e("li",null,"• SWF/F4V (Flash)"),e("li",null,"• M2TS (Blu-ray)"),e("li",null,"• MXF (Material Exchange)"),e("li",null,"• GIF/APNG (Animated)"),e("li",null,"• WebP/AVIF (Web Images)"),e("li",null,"• HEIC/HEIF (High Efficiency)"),e("li",null,"• 以及更多图片格式...")])]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输出格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)"),e("li",null,"• WebM (VP8, VP9, AV1)"),e("li",null,"• M4V (iTunes)"),e("li",null,"• 3GP (Mobile)"),e("li",null,"• OGV (Ogg Video)"),e("li",null,"• TS/MTS (Transport Stream)"),e("li",null,"• ASF (Advanced Systems)"),e("li",null,"• VOB (DVD Video)"),e("li",null,"• MPG/MPEG (MPEG-1/2)"),e("li",null,"• SWF/F4V (Flash)"),e("li",null,"• M2TS (Blu-ray)"),e("li",null,"• MXF (Material Exchange)"),e("li",null,"• GIF/APNG (Animated)"),e("li",null,"• WebP/AVIF (Web Images)"),e("li",null,"• HEIC/HEIF (High Efficiency)"),e("li",null,"• 以及更多图片格式...")])])]),e("div",{class:"mt-6 space-y-4"},[e("div",{class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," 智能分离转码 "),e("p",{class:"text-sm text-green-700 dark:text-green-300 mt-1"}," 系统采用分离式转码技术，分别处理视频和音频，有效避免转换卡住问题，提供更稳定的转换体验。 "),e("div",{class:"mt-2 text-xs text-green-600 dark:text-green-400"},[e("div",null,"• 自动检测音频流并选择最佳处理方式"),e("div",null,"• 视频和音频独立处理，避免相互影响"),e("div",null,"• 支持多种音频编码器，兼容性更好")])])])]),e("div",{class:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-blue-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," 强大的格式转换支持 "),e("p",{class:"text-sm text-blue-700 dark:text-blue-300 mt-1"}," 基于融茂软件核心，支持超过50种视频格式和编码器，包括最新的AV1、H.265等先进编码技术。 "),e("div",{class:"mt-2 text-xs text-blue-600 dark:text-blue-400"},[e("div",null,"• 支持H.264、H.265、VP8、VP9、AV1等现代编码"),e("div",null,"• 兼容MPEG-1/2、Xvid、DivX等传统格式"),e("div",null,"• 支持GIF、WebP、AVIF等图片和动画格式"),e("div",null,"• 专业级MXF、M2TS等广播级格式支持")])])])])])])],-1)),e("div",Be,[e("div",He,[e("div",Ne,[e("div",Xe,[a[5]||(a[5]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",$e,P(R.value),1)])]),e("div",Ue,[a[10]||(a[10]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 选择视频文件 ",-1)),e("div",{onDrop:ve,onDragover:me,class:Ie(["border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":m.value}])},[a[9]||(a[9]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",je,[a[7]||(a[7]=e("label",{for:"file-upload",class:"cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 选择文件 ",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"video/*",onChange:ce},null,32),a[8]||(a[8]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 支持 MP4, AVI, MOV, MKV, WMV, WebM, M4V, 3GP, OGV, TS, MTS, RM, RMVB, ASF, VOB, MPG, MPEG, DIVX, XVID, SWF, F4V, M2TS, MXF, GIF, APNG, WebP, AVIF, HEIC, HEIF 等格式 ",-1)),m.value?(D(),S("p",ze," 已选择: "+P(m.value.name),1)):W("",!0),h.value?(D(),S("div",qe,[a[6]||(a[6]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," 视频信息 ",-1)),e("div",Ke,[e("div",null,"时长: "+P(h.value.duration.toFixed(2))+"秒",1),e("div",null,"帧率: "+P(h.value.fps.toFixed(2))+"fps",1),e("div",null,"总帧数: "+P(h.value.totalFrames),1),e("div",null,"分辨率: "+P(h.value.resolution),1),e("div",null,"比特率: "+P(h.value.bitrate),1),e("div",null,"格式: "+P(h.value.format),1)])])):W("",!0)])],34)]),e("div",Je,[a[19]||(a[19]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 转换选项 ",-1)),e("div",Qe,[e("div",null,[a[12]||(a[12]=e("label",{for:"output-format",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 输出格式 ",-1)),K(e("select",{id:"output-format","onUpdate:modelValue":a[0]||(a[0]=l=>H.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},a[11]||(a[11]=[e("option",{value:"mp4"},"MP4 (H.264/H.265)",-1),e("option",{value:"avi"},"AVI (Xvid)",-1),e("option",{value:"mov"},"MOV (QuickTime)",-1),e("option",{value:"mkv"},"MKV (Matroska)",-1),e("option",{value:"wmv"},"WMV (Windows Media)",-1),e("option",{value:"flv"},"FLV (Flash Video)",-1),e("option",{value:"webm"},"WebM (VP8/VP9/AV1)",-1),e("option",{value:"m4v"},"M4V (iTunes)",-1),e("option",{value:"3gp"},"3GP (Mobile)",-1),e("option",{value:"ogv"},"OGV (Ogg Video)",-1),e("option",{value:"ts"},"TS (Transport Stream)",-1),e("option",{value:"mts"},"MTS (AVCHD)",-1),e("option",{value:"asf"},"ASF (Advanced Systems)",-1),e("option",{value:"vob"},"VOB (DVD Video)",-1),e("option",{value:"mpg"},"MPG (MPEG-1/2)",-1),e("option",{value:"mpeg"},"MPEG (MPEG-1/2)",-1),e("option",{value:"divx"},"DIVX (DivX)",-1),e("option",{value:"xvid"},"XVID (Xvid)",-1),e("option",{value:"swf"},"SWF (Flash)",-1),e("option",{value:"f4v"},"F4V (Flash Video)",-1),e("option",{value:"m2ts"},"M2TS (Blu-ray)",-1),e("option",{value:"mxf"},"MXF (Material Exchange)",-1),e("option",{value:"gif"},"GIF (Animated)",-1),e("option",{value:"apng"},"APNG (Animated PNG)",-1),e("option",{value:"webp"},"WebP (Web Picture)",-1),e("option",{value:"avif"},"AVIF (AV1 Image)",-1),e("option",{value:"heic"},"HEIC (HEIF)",-1),e("option",{value:"heif"},"HEIF (High Efficiency)",-1)]),512),[[J,H.value]])]),e("div",null,[a[14]||(a[14]=e("label",{for:"video-quality",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频质量 ",-1)),K(e("select",{id:"video-quality","onUpdate:modelValue":a[1]||(a[1]=l=>w.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},a[13]||(a[13]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"中等质量",-1),e("option",{value:"low"},"低质量",-1)]),512),[[J,w.value]])]),e("div",null,[a[16]||(a[16]=e("label",{for:"resolution",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 分辨率 ",-1)),K(e("select",{id:"resolution","onUpdate:modelValue":a[2]||(a[2]=l=>j.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},a[15]||(a[15]=[e("option",{value:"original"},"保持原分辨率",-1),e("option",{value:"4k"},"4K (3840x2160)",-1),e("option",{value:"1080p"},"1080p (1920x1080)",-1),e("option",{value:"720p"},"720p (1280x720)",-1),e("option",{value:"480p"},"480p (854x480)",-1)]),512),[[J,j.value]])]),e("div",null,[a[18]||(a[18]=e("label",{for:"framerate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 帧率 ",-1)),K(e("select",{id:"framerate","onUpdate:modelValue":a[3]||(a[3]=l=>z.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},a[17]||(a[17]=[e("option",{value:"original"},"保持原帧率",-1),e("option",{value:"60"},"60 FPS",-1),e("option",{value:"30"},"30 FPS",-1),e("option",{value:"25"},"25 FPS",-1),e("option",{value:"24"},"24 FPS",-1)]),512),[[J,z.value]])])])]),e("div",Ye,[e("button",{onClick:be,disabled:!m.value||!h.value||i.value||!t.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[i.value?(D(),S("svg",aa,a[21]||(a[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(D(),S("svg",ea,a[20]||(a[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))),se(" "+P(i.value?"转换中...":"开始转换"),1)],8,Ze)]),d.value?(D(),S("div",oa,[a[23]||(a[23]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 资源加载进度 ",-1)),e("div",la,[a[22]||(a[22]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"正在加载核心文件，请稍候...",-1)),e("span",ta,P(Math.round(n.value))+"%",1)]),e("div",ia,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:re({width:n.value+"%"})},null,4)])])):W("",!0),i.value&&!d.value?(D(),S("div",sa,[a[25]||(a[25]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 转换进度 ",-1)),e("div",ra,[a[24]||(a[24]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"正在转换中，请稍候...",-1)),e("span",na,P(Math.round(n.value))+"%",1)]),e("div",da,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:re({width:n.value+"%"})},null,4)])])):W("",!0),x.value&&E.value?(D(),S("div",ua,[e("div",{class:"flex items-center justify-between"},[a[27]||(a[27]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-green-800 dark:text-green-200"},"转换完成！")],-1)),e("button",{onClick:ye,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},a[26]||(a[26]=[e("svg",{class:"inline-block h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),se(" 下载文件 ",-1)]))])])):W("",!0)])])])]),L.value?(D(),S("div",ca,[e("div",va,[a[29]||(a[29]=e("div",{class:"flex items-center mb-4"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])]),e("div",{class:"ml-3"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"转换失败")])],-1)),e("div",ma,[e("p",ba,P(B.value),1)]),e("div",pa,[e("button",{onClick:a[4]||(a[4]=l=>L.value=!1),class:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 确定 ")])])])):W("",!0)]),_:1}))}};export{wa as default};
