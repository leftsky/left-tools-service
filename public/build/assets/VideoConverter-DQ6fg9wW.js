import{k as U,r as c,l as te,m as le,f as re,o as v,w as ae,b as e,a as m,g as w,t as g,n as se,i as S,p as oe,F as E,q as A,s as I,j as D,x as H}from"./app-CLiRSmbH.js";import{_ as ne}from"./Layout.vue_vue_type_script_setup_true_lang-1Lgoqtis.js";const ie="/api/file-conversion";var W;const b=U.create({baseURL:ie,timeout:3e4,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":((W=document.querySelector('meta[name="csrf-token"]'))==null?void 0:W.getAttribute("content"))||""}}),B={retries:3,retryDelay:1e3,retryCondition:u=>!u.response||u.response.status>=500&&u.response.status<600},L=async(u,l=B.retries)=>{try{return await u()}catch(r){if(l>0&&B.retryCondition(r))return await new Promise(o=>setTimeout(o,B.retryDelay)),L(u,l-1);throw r}};b.interceptors.request.use(u=>{var r;const l=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");return l&&(u.headers["X-CSRF-TOKEN"]=l),u},u=>Promise.reject(u));b.interceptors.response.use(u=>u.data&&u.data.code===0?Promise.reject(new Error(u.data.message||"请求失败")):u,u=>{var l;if(u.response){const r=((l=u.response.data)==null?void 0:l.message)||`请求失败 (${u.response.status})`;return Promise.reject(new Error(r))}else return u.request?Promise.reject(new Error("网络连接失败，请检查网络连接")):Promise.reject(new Error(u.message||"请求失败"))});class V{static async uploadAndConvert(l,r={}){const o=new FormData;o.append("file",l),o.append("output_format",r.outputFormat||"mp4"),o.append("engine",r.engine||"cloudconvert"),r.conversionOptions&&Array.isArray(r.conversionOptions)&&r.conversionOptions.forEach((a,p)=>{a.key&&a.value!==void 0&&(o.append(`options[${p}][key]`,a.key),o.append(`options[${p}][value]`,a.value))});try{return(await b.post("/upload",o,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw new Error(a.message||"上传失败")}}static async getStatus(l){try{return(await L(()=>b.get("/status",{params:{task_id:l}}))).data}catch(r){throw new Error(r.message||"获取状态失败")}}static async cancelTask(l){try{return(await b.post("/cancel",{task_id:l})).data}catch(r){throw new Error(r.message||"取消失败")}}static async getSupportedFormats(){try{return(await b.get("/formats")).data}catch(l){throw new Error(l.message||"获取格式失败")}}static async createDirectUpload(l,r={}){try{return(await b.post("/direct-upload",{filename:l,output_format:r.outputFormat||"mp4",engine:r.engine||"cloudconvert",options:r.conversionOptions||[]})).data}catch(o){throw new Error(o.message||"创建直传任务失败")}}static async confirmDirectUpload(l){try{return(await b.post("/confirm-direct-upload",{task_id:l})).data}catch(r){throw new Error(r.message||"确认直传失败")}}static async directUploadToCloudConvert(l,r={}){try{const o=await this.createDirectUpload(l.name,r);if(o.code!==1)throw new Error(o.message||"创建直传任务失败");const{task_id:a,upload_url:p,form_data:h}=o.data,x=new FormData;x.append("file",l),h&&Object.keys(h).forEach(i=>{i!=="file"&&x.append(i,h[i])}),await U.post(p,x,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4,onUploadProgress:i=>{if(r.onProgress){const y=Math.round(i.loaded*100/i.total);r.onProgress(y)}}});const k=await this.confirmDirectUpload(a);if(k.code!==1)throw new Error(k.message||"确认直传失败");return{task_id:a,status:"uploaded",message:"文件直传成功，开始转换"}}catch(o){throw new Error(`直传失败: ${o.message}`)}}static async getHistory(l={}){try{return(await b.get("/history",{params:{limit:l.limit||20,page:l.page||1,...l}})).data}catch(r){throw new Error(r.message||"获取历史失败")}}static pollStatus(l,r,o,a,p=2e3){let h=!1;const x=async()=>{if(!h)try{const i=(await this.getStatus(l)).data;if(r&&r(i),i.status===2){o&&o(i);return}if(i.status===3){a&&a(new Error(i.error_message||"转换失败"));return}if(i.status===4){o&&o(i);return}setTimeout(x,p)}catch(k){a&&a(k)}};return x(),()=>{h=!0}}static formatFileSize(l){if(l===0)return"0 B";const r=1024,o=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(l)/Math.log(r));return parseFloat((l/Math.pow(r,a)).toFixed(2))+" "+o[a]}static formatTime(l){if(l<60)return`${l}秒`;if(l<3600)return`${Math.floor(l/60)}分钟${l%60}秒`;{const r=Math.floor(l/3600),o=Math.floor(l%3600/60);return`${r}小时${o}分钟`}}static getStatusText(l){return{0:"等待中",1:"转换中",2:"已完成",3:"失败",4:"已取消"}[l]||"未知状态"}static isFileSupported(l){return["video/mp4","video/avi","video/mov","video/mkv","video/wmv","video/flv","video/webm","video/m4v","video/3gp","video/ogv","image/gif","image/webp","image/avif","image/heic","image/heif"].includes(l.type)||l.name.match(/\.(mp4|avi|mov|mkv|wmv|flv|webm|m4v|3gp|ogv|gif|webp|avif|heic|heif)$/i)}static getFileInfo(l){var r;return{name:l.name,size:l.size,sizeFormatted:this.formatFileSize(l.size),type:l.type,extension:((r=l.name.split(".").pop())==null?void 0:r.toLowerCase())||"unknown",lastModified:new Date(l.lastModified).toLocaleString(),isSupported:this.isFileSupported(l)}}static setTimeout(l){b.defaults.timeout=l}static getTimeout(){return b.defaults.timeout}}const ue={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},de={class:"grid grid-cols-1 lg:grid-cols-10 gap-8"},ce={class:"lg:col-span-6 order-1 lg:order-2"},ve={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},me={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},ge={class:"flex items-center"},pe={class:"text-blue-800 dark:text-blue-200"},fe={class:"mb-8"},be={class:"mt-4"},xe={key:0,class:"mt-2 text-sm text-blue-600 dark:text-blue-400"},he={key:1,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},ke={class:"space-y-2 text-xs text-gray-600 dark:text-gray-400"},ye={class:"grid grid-cols-2 gap-2"},we={class:"mb-8"},Me={class:"hidden mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},Ve={class:"flex items-center justify-between"},Fe={class:"relative inline-flex items-center cursor-pointer"},_e=["disabled"],Se={key:0,class:"mt-2 text-xs text-green-600 dark:text-green-400"},Pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Te=["value"],Ce=["value"],Ee=["value"],Ae=["value"],Ie={class:"text-center space-y-4"},Oe=["disabled"],De={key:0,class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Be={key:1,class:"inline-block h-5 w-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={key:0,class:"mt-8"},je={class:"flex items-center justify-between mb-2"},ze={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},He={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},We={key:1,class:"mt-8"},Ue={class:"flex items-center justify-between mb-2"},Le={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},$e={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Re={key:2,class:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},Xe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ne={class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},qe={class:"mt-2"},Ke={class:"text-sm text-gray-500 dark:text-gray-400 whitespace-pre-line"},Qe={class:"mt-4 flex justify-end"},Ze={__name:"VideoConverter",setup(u){const l=c(!1),r=c(!1),o=c(0),a=c(null),p=c(""),h=c("请选择视频文件开始转换"),x=c(!1),k=c(""),i=c(null),y=c("mp4"),P=c("high"),T=c("original"),C=c("original"),F=c("cloudconvert"),O=c(!1),_=c(null),M=c(null),$=c(null),R=[{value:"mp4",label:"MP4 (H.264)"},{value:"avi",label:"AVI"},{value:"mov",label:"MOV (QuickTime)"},{value:"mkv",label:"MKV (Matroska)"},{value:"wmv",label:"WMV (Windows Media)"},{value:"flv",label:"FLV (Flash Video)"},{value:"webm",label:"WebM (VP8/VP9)"},{value:"gif",label:"GIF (动画)"},{value:"m4v",label:"M4V (iTunes)"},{value:"3gp",label:"3GP (移动设备)"},{value:"ogv",label:"OGV (Ogg Video)"}],X=[{value:"high",label:"高质量"},{value:"medium",label:"中等质量"},{value:"low",label:"低质量"}],N=[{value:"original",label:"原始分辨率"},{value:"1920x1080",label:"1080p (1920x1080)"},{value:"1280x720",label:"720p (1280x720)"},{value:"854x480",label:"480p (854x480)"},{value:"640x360",label:"360p (640x360)"}],q=[{value:"original",label:"原始帧率"},{value:"30",label:"30 FPS"},{value:"25",label:"25 FPS"},{value:"24",label:"24 FPS"},{value:"15",label:"15 FPS"},{value:"10",label:"10 FPS"}],d=s=>{h.value=s,console.log(`[VideoConverter] ${s}`)},G=s=>{k.value=s,x.value=!0};te(async()=>{d("请选择视频文件开始转换");try{const s=await V.getSupportedFormats();s.code===1&&($.value=s.data)}catch(s){console.error("格式加载失败:",s)}}),le(()=>{M.value&&M.value()});const K=async s=>{const t=s.target;t.files&&t.files[0]&&(a.value=t.files[0],p.value="",o.value=0,i.value=null,d(`已选择文件: ${a.value.name}`),await j())},Q=async s=>{var t;s.preventDefault(),(t=s.dataTransfer)!=null&&t.files&&s.dataTransfer.files[0]&&(a.value=s.dataTransfer.files[0],p.value="",o.value=0,i.value=null,d(`已选择文件: ${a.value.name}`),await j())},J=s=>{s.preventDefault()},j=async()=>{var s;if(a.value)try{d("正在读取文件信息..."),i.value={name:a.value.name,size:a.value.size,sizeFormatted:V.formatFileSize(a.value.size),type:a.value.type,format:((s=a.value.name.split(".").pop())==null?void 0:s.toLowerCase())||"unknown",lastModified:new Date(a.value.lastModified).toLocaleString()},d(`文件信息读取成功: ${i.value.sizeFormatted}, ${i.value.format} 格式`)}catch(t){console.error("读取文件信息失败:",t),d("读取文件信息失败，但可以继续转换"),i.value=null}},Y=async()=>{if(!a.value){alert("请先选择视频文件");return}const s=1024*1024*1024;if(a.value.size>s){alert("文件过大，请选择小于1GB的文件");return}console.log("开始转换:",a.value.name,"→",y.value),l.value=!0,r.value=!0,o.value=0,d("正在上传文件...");try{const t=[];P.value!=="high"&&t.push({key:"quality",value:P.value}),T.value!=="original"&&t.push({key:"resolution",value:T.value}),C.value!=="original"&&t.push({key:"fps",value:parseInt(C.value)});let n;if(O.value&&F.value==="cloudconvert")d("正在创建直传任务..."),n=await V.directUploadToCloudConvert(a.value,{outputFormat:y.value,engine:F.value,conversionOptions:t,onProgress:f=>{o.value=f,d(`正在直传文件... ${f}%`)}}),_.value=n.task_id,r.value=!1,d("文件直传完成，开始转换...");else{if(n=await V.uploadAndConvert(a.value,{outputFormat:y.value,engine:F.value,conversionOptions:t}),n.code!==1)throw new Error(n.message||"转换任务创建失败");_.value=n.data.task_id,r.value=!1,d("文件上传完成，开始转换...")}M.value=V.pollStatus(n.data.task_id,f=>{o.value=f.step_percent||0,d(`转换中... ${f.step_percent||0}%`)},f=>{o.value=100,d("转换完成！"),l.value=!1,f.output_url&&(p.value=f.output_url),z()},f=>{console.error("转换失败:",f),d("转换失败，请检查文件格式或重试"),G(f.message||"转换失败，请检查文件格式或重试"),l.value=!1})}catch(t){console.error("转换失败:",t),d("转换失败，请检查文件格式或重试"),G(t instanceof Error?t.message:"转换失败，请检查文件格式或重试"),l.value=!1,r.value=!1}},Z=async()=>{if(_.value)try{d("正在取消转换...");const s=await V.cancelTask(_.value);s.code===1?(d("转换已取消"),l.value=!1,o.value=0,M.value&&(M.value(),M.value=null)):d("取消失败: "+(s.message||"未知错误"))}catch(s){console.error("取消失败:",s),d("取消失败: "+s.message)}},z=async()=>{try{const s=await fetch("/api/tools/record-usage-public",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({tool_name:"视频转码"})});s.ok?console.log("工具使用记录已保存"):console.warn("工具使用记录失败:",s.status)}catch(s){console.warn("记录工具使用时出错:",s)}},ee=async()=>{if(p.value&&a.value){const s=document.createElement("a");s.href=p.value;const t=a.value.name,n=t.substring(0,t.lastIndexOf("."));s.download=`${n}.${y.value}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),await z()}};return(s,t)=>(v(),re(ne,{title:"视频格式转换工具 - 在线MP4、AVI、MOV、MKV转换器 | 小左子的工具箱"},{default:ae(()=>[e("div",ue,[e("div",de,[t[28]||(t[28]=e("div",{class:"lg:col-span-4 order-2 lg:order-1"},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 lg:sticky lg:top-8"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 在线视频格式转换工具 "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," 专业的在线视频格式转换器，支持MP4、AVI、MOV、MKV等多种格式转换。无需下载软件，免费在线使用，快速高效。 "),e("div",{class:"grid grid-cols-2 gap-4"},[e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输入格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid, DivX)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)"),e("li",null,"• WebM (VP8, VP9, AV1)"),e("li",null,"• M4V (iTunes)"),e("li",null,"• 3GP (Mobile)"),e("li",null,"• OGV (Ogg Video)"),e("li",null,"• TS/MTS (Transport Stream)"),e("li",null,"• RM/RMVB (RealMedia)"),e("li",null,"• ASF (Advanced Systems)"),e("li",null,"• VOB (DVD Video)"),e("li",null,"• MPG/MPEG (MPEG-1/2)"),e("li",null,"• SWF/F4V (Flash)"),e("li",null,"• M2TS (Blu-ray)"),e("li",null,"• MXF (Material Exchange)"),e("li",null,"• GIF/APNG (Animated)"),e("li",null,"• WebP/AVIF (Web Images)"),e("li",null,"• HEIC/HEIF (High Efficiency)"),e("li",null,"• 以及更多图片格式...")])]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输出格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)"),e("li",null,"• WebM (VP8, VP9, AV1)"),e("li",null,"• M4V (iTunes)"),e("li",null,"• 3GP (Mobile)"),e("li",null,"• OGV (Ogg Video)"),e("li",null,"• TS/MTS (Transport Stream)"),e("li",null,"• ASF (Advanced Systems)"),e("li",null,"• VOB (DVD Video)"),e("li",null,"• MPG/MPEG (MPEG-1/2)"),e("li",null,"• SWF/F4V (Flash)"),e("li",null,"• M2TS (Blu-ray)"),e("li",null,"• MXF (Material Exchange)"),e("li",null,"• GIF/APNG (Animated)"),e("li",null,"• WebP/AVIF (Web Images)"),e("li",null,"• HEIC/HEIF (High Efficiency)"),e("li",null,"• 以及更多图片格式...")])])]),e("div",{class:"mt-6 space-y-4"},[e("div",{class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," 智能分离转码 "),e("p",{class:"text-sm text-green-700 dark:text-green-300 mt-1"}," 系统采用分离式转码技术，分别处理视频和音频，有效避免转换卡住问题，提供更稳定的转换体验。 "),e("div",{class:"mt-2 text-xs text-green-600 dark:text-green-400"},[e("div",null,"• 自动检测音频流并选择最佳处理方式"),e("div",null,"• 视频和音频独立处理，避免相互影响"),e("div",null,"• 支持多种音频编码器，兼容性更好")])])])]),e("div",{class:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-blue-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," 强大的格式转换支持 "),e("p",{class:"text-sm text-blue-700 dark:text-blue-300 mt-1"}," 基于融茂软件核心，支持超过50种视频格式和编码器，包括最新的AV1、H.265等先进编码技术。 "),e("div",{class:"mt-2 text-xs text-blue-600 dark:text-blue-400"},[e("div",null,"• 支持H.264、H.265、VP8、VP9、AV1等现代编码"),e("div",null,"• 兼容MPEG-1/2、Xvid、DivX等传统格式"),e("div",null,"• 支持GIF、WebP、AVIF等图片和动画格式"),e("div",null,"• 专业级MXF、M2TS等广播级格式支持")])])])])])])],-1)),e("div",ce,[e("div",ve,[e("div",me,[e("div",ge,[t[6]||(t[6]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",pe,g(h.value),1)])]),e("div",fe,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 选择视频文件 ",-1)),e("div",{onDrop:Q,onDragover:J,class:se(["border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":a.value}])},[t[10]||(t[10]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",be,[t[8]||(t[8]=e("label",{for:"file-upload",class:"cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 选择文件 ",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"video/*",onChange:K},null,32),t[9]||(t[9]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 支持 MP4, AVI, MOV, MKV, WMV, WebM, M4V, 3GP, OGV, TS, MTS, RM, RMVB, ASF, VOB, MPG, MPEG, DIVX, XVID, SWF, F4V, M2TS, MXF, GIF, APNG, WebP, AVIF, HEIC, HEIF 等格式 ",-1)),a.value?(v(),m("p",xe," 已选择: "+g(a.value.name),1)):w("",!0),i.value?(v(),m("div",he,[t[7]||(t[7]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," 文件信息 ",-1)),e("div",ke,[e("div",ye,[e("div",null,"文件名: "+g(i.value.name),1),e("div",null,"文件大小: "+g(i.value.sizeFormatted),1),e("div",null,"文件格式: "+g(i.value.format),1),e("div",null,"修改时间: "+g(i.value.lastModified),1)])])])):w("",!0)])],34)]),e("div",we,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 转换选项 ",-1)),e("div",Me,[e("div",Ve,[t[13]||(t[13]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," 客户端直传（推荐） "),e("p",{class:"text-sm text-green-700 dark:text-green-300"}," 文件直接从浏览器上传到 CloudConvert，节省服务器带宽 ")])],-1)),e("label",Fe,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=n=>O.value=n),disabled:F.value!=="cloudconvert",class:"sr-only peer"},null,8,_e),[[oe,O.value]]),t[12]||(t[12]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]),F.value!=="cloudconvert"?(v(),m("div",Se," 直传功能仅支持 CloudConvert 引擎 ")):w("",!0)]),e("div",Pe,[e("div",null,[t[14]||(t[14]=e("label",{for:"output-format",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 输出格式 ",-1)),S(e("select",{id:"output-format","onUpdate:modelValue":t[1]||(t[1]=n=>y.value=n),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(v(),m(E,null,A(R,n=>e("option",{key:n.value,value:n.value},g(n.label),9,Te)),64))],512),[[I,y.value]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"video-quality",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频质量 ",-1)),S(e("select",{id:"video-quality","onUpdate:modelValue":t[2]||(t[2]=n=>P.value=n),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(v(),m(E,null,A(X,n=>e("option",{key:n.value,value:n.value},g(n.label),9,Ce)),64))],512),[[I,P.value]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"resolution",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 分辨率 ",-1)),S(e("select",{id:"resolution","onUpdate:modelValue":t[3]||(t[3]=n=>T.value=n),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(v(),m(E,null,A(N,n=>e("option",{key:n.value,value:n.value},g(n.label),9,Ee)),64))],512),[[I,T.value]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"framerate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 帧率 ",-1)),S(e("select",{id:"framerate","onUpdate:modelValue":t[4]||(t[4]=n=>C.value=n),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(v(),m(E,null,A(q,n=>e("option",{key:n.value,value:n.value},g(n.label),9,Ae)),64))],512),[[I,C.value]])])])]),e("div",Ie,[e("button",{onClick:Y,disabled:!a.value||l.value||r.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[!l.value&&!r.value?(v(),m("svg",De,t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))):(v(),m("svg",Be,t[20]||(t[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),D(" "+g(r.value?"上传中...":l.value?"转换中...":"开始转换"),1)],8,Oe),l.value&&_.value?(v(),m("button",{key:0,onClick:Z,class:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-6 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},t[21]||(t[21]=[e("svg",{class:"inline-block h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),D(" 取消转换 ",-1)]))):w("",!0)]),r.value?(v(),m("div",Ge,[t[23]||(t[23]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 文件上传进度 ",-1)),e("div",je,[t[22]||(t[22]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"正在上传文件，请稍候...",-1)),e("span",ze,g(Math.round(o.value))+"%",1)]),e("div",He,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:H({width:o.value+"%"})},null,4)])])):w("",!0),l.value&&!r.value?(v(),m("div",We,[t[25]||(t[25]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 转换进度 ",-1)),e("div",Ue,[t[24]||(t[24]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"正在转换中，请稍候...",-1)),e("span",Le,g(Math.round(o.value))+"%",1)]),e("div",$e,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:H({width:o.value+"%"})},null,4)])])):w("",!0),p.value&&!l.value?(v(),m("div",Re,[e("div",{class:"flex items-center justify-between"},[t[27]||(t[27]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-green-800 dark:text-green-200"},"转换完成！")],-1)),e("button",{onClick:ee,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},t[26]||(t[26]=[e("svg",{class:"inline-block h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" 下载文件 ",-1)]))])])):w("",!0)])])])]),x.value?(v(),m("div",Xe,[e("div",Ne,[t[29]||(t[29]=e("div",{class:"flex items-center mb-4"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])]),e("div",{class:"ml-3"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"转换失败")])],-1)),e("div",qe,[e("p",Ke,g(k.value),1)]),e("div",Qe,[e("button",{onClick:t[5]||(t[5]=n=>x.value=!1),class:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 确定 ")])])])):w("",!0)]),_:1}))}};export{Ze as default};
