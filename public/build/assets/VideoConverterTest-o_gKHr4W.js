import{_ as f}from"./Layout.vue_vue_type_script_setup_true_lang-LkGwZtLh.js";import{t as i,f as v,F as w}from"./index-bIxDAEjd.js";import{d as x,r as d,g as k,o as n,w as h,b as e,a as u,i as c,t as b,k as m}from"./app-CxVLoMpi.js";const y={class:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},F={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},_={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},B={class:"flex items-center"},C={class:"text-blue-800 dark:text-blue-200"},j={class:"space-y-4 mb-8"},L={key:0,class:"mb-8"},M={class:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4"},U=["src"],z=x({__name:"VideoConverterTest",setup(R){const a=d(!1),o=d("点击加载FFmpeg"),l=d("");let r=null;const g=async()=>{if(r)try{o.value="正在加载FFmpeg...";const s="https://cdn.jsdelivr.net/npm/@ffmpeg/core-mt@0.12.10/dist/esm";r.on("log",({message:t})=>{o.value=t,console.log("[测试FFmpeg]",t)}),await r.load({coreURL:await i(`${s}/ffmpeg-core.js`,"text/javascript"),wasmURL:await i(`${s}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await i(`${s}/ffmpeg-core.worker.js`,"text/javascript")}),a.value=!0,o.value="FFmpeg加载完成，点击开始转换"}catch(s){console.error("测试FFmpeg加载失败:",s),o.value=`加载失败: ${s.message}`}},p=async()=>{if(!(!r||!a.value))try{o.value="开始转换...",await r.writeFile("input.webm",await v("https://raw.githubusercontent.com/ffmpegwasm/testdata/master/Big_Buck_Bunny_180_10s.webm")),o.value="文件写入完成，开始转换...",await r.exec(["-i","input.webm","output.mp4"]),o.value="转换完成，读取文件...";const s=await r.readFile("output.mp4");l.value=URL.createObjectURL(new Blob([s.buffer],{type:"video/mp4"})),o.value="转换成功！"}catch(s){console.error("测试转换失败:",s),o.value=`转换失败: ${s.message}`}};return(()=>{r=new w,a.value=!1,o.value="点击加载FFmpeg",l.value=""})(),(s,t)=>(n(),k(f,{title:"FFmpeg转换测试 - 小左子的工具箱"},{default:h(()=>[t[5]||(t[5]=e("div",{class:"bg-white dark:bg-gray-800 shadow-sm"},[e("div",{class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},[e("div",{class:"flex items-center space-x-4"},[e("div",{class:"h-12 w-12 rounded-lg bg-green-600 flex items-center justify-center"},[e("svg",{class:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"FFmpeg转换测试"),e("p",{class:"text-gray-600 dark:text-gray-400"},"测试FFmpeg基本转换功能")])])])],-1)),e("div",y,[e("div",F,[e("div",_,[e("div",B,[t[0]||(t[0]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",C,b(o.value),1)])]),e("div",j,[a.value?c("",!0):(n(),u("button",{key:0,onClick:g,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},t[1]||(t[1]=[e("svg",{class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1),m(" 加载FFmpeg (~31 MB) ",-1)]))),a.value?(n(),u("button",{key:1,onClick:p,class:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},t[2]||(t[2]=[e("svg",{class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),m(" 转换 webm 到 mp4 ",-1)]))):c("",!0)]),l.value?(n(),u("div",L,[t[3]||(t[3]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"转换结果：",-1)),e("div",M,[e("video",{src:l.value,controls:"",class:"w-full rounded-md",preload:"metadata"},null,8,U)])])):c("",!0),t[4]||(t[4]=e("div",{class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"测试说明"),e("div",{class:"space-y-3 text-sm text-gray-600 dark:text-gray-400"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"打开开发者工具 (Ctrl+Shift+I) 查看详细日志")]),e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"测试使用官方示例视频进行转换")]),e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"用于验证FFmpeg基本功能是否正常")]),e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"测试网络连接和CDN是否正常")])])],-1))])])]),_:1,__:[5]}))}});export{z as default};
