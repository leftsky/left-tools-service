import{d as re,r as v,f as ne,g as ie,o as g,w as de,b as e,a as p,i as w,t as i,n as K,F as N,j as Q,k as D,v as T,l as X,m as q}from"./app-_eBFLlcy.js";import{_ as ue}from"./Layout.vue_vue_type_script_setup_true_lang-CjIAlh2T.js";import{F as ce,t as H,f as G}from"./index-bIxDAEjd.js";const ve={class:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},me={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},ge={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},pe={class:"flex items-center"},fe={class:"text-blue-800 dark:text-blue-200"},be={class:"mb-8"},xe={class:"mt-4"},ke={key:0,class:"mt-2 text-sm text-blue-600 dark:text-blue-400"},we={key:1,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},he={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400"},ye={key:0,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600"},Fe={class:"text-xs font-medium text-gray-900 dark:text-white mb-2"},Me={class:"space-y-1 text-xs text-gray-600 dark:text-gray-400"},$e={class:"mb-8"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ce={key:0},De=["value"],Te={class:"text-center"},Ie=["disabled"],je={key:0,class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Se={key:1,class:"inline-block h-5 w-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={key:0,class:"mt-8"},Pe={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Be={key:1,class:"mt-8"},Ue={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},He={key:0,class:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md"},ze={class:"text-xs text-blue-700 dark:text-blue-300"},Ae={key:0},Re={key:2,class:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},z="https://cdn.jsdelivr.net/npm/@ffmpeg/core-mt@0.12.10/dist/esm",Ke=re({__name:"VideoConverter",setup(_e){const P=v(!1),k=v(!1),F=v(!1),n=v(0),c=v(null),M=v(null),$=v(""),A=v("请选择视频文件开始转换"),b=v(null),f=v([]),V=v(0),s=v(null),d=t=>{A.value=t,console.log(`[VideoConverter] ${t}`)},C=v("mp4"),I=v("high"),j=v("original"),S=v("original"),y=v("auto"),u=new ce;ne(async()=>{u.off("log"),u.off("progress"),u.on("log",({message:t})=>{var o;if(k.value?(console.log(`[FFmpeg转换] ${t}`),d(t)):(t.includes("Duration:")||t.includes("Video:")||t.includes("Audio:"))&&console.log(`[FFmpeg信息] ${t}`),t.includes("Duration:")){const a=t.match(/Duration: (\d{2}):(\d{2}):(\d{2}\.\d{2})/);if(a){const l=parseInt(a[1]),r=parseInt(a[2]),m=parseFloat(a[3]),x=l*3600+r*60+m;s.value||(s.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),s.value.duration=x}}if(t.includes("Video:")){console.log("解析视频信息行:",t);const a=t.match(/(\d{3,4})x(\d{3,4})/),l=t.match(/(\d+) fps/),r=t.match(/Video: (\w+)/),m=t.match(/(\d+) kb\/s/);if(s.value||(s.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),a){const x=parseInt(a[1]),h=parseInt(a[2]);x>=100&&h>=100?(s.value.resolution=`${x}x${h}`,console.log("解析到分辨率:",s.value.resolution)):console.log("分辨率值不合理，跳过:",x,"x",h)}l&&(s.value.fps=parseInt(l[1]),console.log("解析到帧率:",s.value.fps)),r&&(s.value.videoCodec=r[1],console.log("解析到视频编解码器:",s.value.videoCodec)),m&&(s.value.bitrate=`${m[1]} kb/s`,console.log("解析到比特率:",s.value.bitrate))}if(t.includes("Audio:")){const a=t.match(/Audio: (\w+)/),l=t.match(/Stream #0:(\d+)/),r=t.match(/(\d+) channels/),m=t.match(/(\d+) Hz/),x=t.match(/\((\w+)\)/);if(s.value||(s.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),a&&(s.value.audioCodec=a[1]),l){const h=parseInt(l[1]),L={index:h,codec:a?a[1]:"未知",channels:r?parseInt(r[1]):2,sampleRate:m?parseInt(m[1]):48e3,language:x?x[1]:void 0};f.value.findIndex(U=>U.index===h)===-1&&(f.value.push(L),console.log("检测到音频流:",L))}}if(t.includes("frame=")){const a=t.match(/frame=\s*(\d+)/);if(a&&k.value){const l=parseInt(a[1]),r=((o=b.value)==null?void 0:o.totalFrames)||111,m=Math.min(l/r*70,70);n.value=20+m,console.log(`[转换进度] ${l}/${r} 帧 (${n.value.toFixed(1)}%) - ${new Date().toLocaleTimeString()}`)}}if(k.value){if(t.includes("Stream mapping:"))console.log("[转换阶段] 开始流映射...");else if(t.includes("Output #0"))console.log("[转换阶段] 开始输出...");else if(t.includes("frame=")&&t.includes("fps=")){const a=t.match(/fps=\s*(\d+)/);a&&console.log(`[转换性能] 当前FPS: ${a[1]}`)}}}),u.on("progress",({progress:t,time:o})=>{console.log(`[VideoConverter] 转换进度: ${t*100}%, 时间: ${o}`),t>0&&(n.value=20+t*70)});try{F.value=!0,d("正在加载FFmpeg...");const t=setInterval(()=>{n.value<80&&(n.value+=5,d(`正在加载FFmpeg... ${n.value}%`))},200);await u.load({coreURL:await H(`${z}/ffmpeg-core.js`,"text/javascript"),wasmURL:await H(`${z}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await H(`${z}/ffmpeg-core.worker.js`,"text/javascript")}),clearInterval(t),n.value=100,d("FFmpeg加载完成！"),P.value=!0,F.value=!1,console.log("检查ffprobe可用性:",typeof u.ffprobe),console.log("FFmpeg对象:",u),await new Promise(o=>setTimeout(o,1e3)),d("请选择视频文件开始转换"),n.value=0}catch(t){console.error("FFmpeg加载失败:",t),d("FFmpeg加载失败，请刷新页面重试"),F.value=!1}});const J=async t=>{const o=t.target;o.files&&o.files[0]&&(c.value=o.files[0],M.value=null,$.value="",n.value=0,b.value=null,d(`已选择文件: ${c.value.name}`),await R())},Y=async t=>{var o;console.log(t),t.preventDefault(),(o=t.dataTransfer)!=null&&o.files&&t.dataTransfer.files[0]&&(c.value=t.dataTransfer.files[0],M.value=null,$.value="",n.value=0,b.value=null,d(`已选择文件: ${c.value.name}`),await R())},Z=t=>{t.preventDefault()},R=async()=>{if(c.value){if(!P.value){d("FFmpeg尚未加载完成，无法读取视频信息");return}try{d("正在读取视频信息..."),s.value=null,f.value=[],V.value=0;const t=O(c.value.name);await u.writeFile(`temp_input.${t}`,await G(c.value)),console.log("尝试使用exec获取视频信息...");try{if(await u.exec(["-i",`temp_input.${t}`]),s.value&&s.value.duration>0){const o=Math.round(s.value.duration*s.value.fps);b.value={duration:s.value.duration,fps:s.value.fps,totalFrames:o,resolution:s.value.resolution,bitrate:s.value.bitrate,format:t},d(`视频信息读取成功: ${s.value.resolution}, ${s.value.duration.toFixed(2)}秒, ${s.value.fps}fps`),console.log("解析到的视频信息:",s.value),console.log("检测到的音频流:",f.value)}else throw new Error("无法解析视频信息")}catch(o){throw console.error("exec命令失败:",o),new Error("无法读取视频信息")}await u.deleteFile(`temp_input.${t}`)}catch(t){console.error("读取视频信息失败:",t),d("读取视频信息失败，无法继续转换"),b.value=null,c.value=null}}},ee=async()=>{if(!c.value||!u){alert("请先选择视频文件");return}console.log("=== 开始分离式转换 ==="),console.log("FFmpeg实例:",u),console.log("选择文件:",c.value.name,"大小:",(c.value.size/1024/1024).toFixed(2),"MB"),console.log("输出格式:",C.value),console.log("视频质量:",I.value),console.log("分辨率设置:",j.value),console.log("帧率设置:",S.value),k.value=!0,n.value=0,d("正在加载FFmpeg...");try{if(!P.value){d("FFmpeg尚未加载完成，请稍候...");return}d("开始转换..."),n.value=10;const t=O(c.value.name),o=C.value;d("正在写入输入文件..."),console.log("开始写入输入文件...");const a=Date.now();await u.writeFile(`input.${t}`,await G(c.value));const l=Date.now()-a;console.log(`文件写入完成，耗时: ${l}ms`),n.value=20;const r=f.value.length>0&&y.value!=="none";console.log("是否有音频流:",r),r?await oe(t,o):await te(t,o),d("正在读取输出文件...");const m=await u.readFile(`output.${o}`);M.value=new Blob([m.buffer],{type:`video/${o}`}),$.value=URL.createObjectURL(M.value),n.value=100,d("转换完成！"),await E(t,o)}catch(t){console.error("=== 转换失败 ==="),console.error("错误类型:",t.constructor.name),console.error("错误消息:",t.message),console.error("错误堆栈:",t.stack);let o="转换失败，请检查文件格式或重试";t.message.includes("超时")?o="转换超时，建议：1. 尝试更小的文件 2. 降低视频质量设置 3. 检查网络连接":t.message.includes("编码器")?o="编码器错误，建议：1. 尝试不同的输出格式 2. 检查输入文件是否损坏":t.message.includes("内存")?o="内存不足，建议：1. 关闭其他程序 2. 尝试更小的文件":t.message.includes("stream")||t.message.includes("map")?o="流映射错误，建议：1. 尝试选择'仅视频'选项 2. 检查音频流是否兼容 3. 尝试不同的输出格式":(t.message.includes("音频")||t.message.includes("audio"))&&(o="音频处理错误，建议：1. 选择'仅视频'选项 2. 尝试不同的音频处理模式 3. 检查音频编码器兼容性"),d(o),alert(o),await E(inputExt,C.value)}finally{k.value=!1,F.value=!1,console.log("=== 转换流程结束 ===")}},oe=async(t,o)=>{console.log("=== 开始分离式转码 ===");const a=new Promise((l,r)=>{setTimeout(()=>{r(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)});try{d("正在转码视频..."),n.value=30,console.log("步骤1: 转码视频（无音频）");const l=_(t,o);console.log("视频转码命令:",l.join(" "));const r=Date.now();await Promise.race([u.exec(l),a]);const m=Date.now()-r;console.log(`视频转码完成，耗时: ${m}ms`),n.value=50,d("正在处理音频..."),n.value=60,console.log("步骤2: 提取并转码音频");const x=le(t,o);console.log("音频转码命令:",x.join(" "));const h=Date.now();await Promise.race([u.exec(x),a]);const L=Date.now()-h;console.log(`音频转码完成，耗时: ${L}ms`),n.value=70,d("正在合并视频和音频..."),n.value=80,console.log("步骤3: 重新组合视频和音频");const B=ae(o);console.log("合并命令:",B.join(" "));const U=Date.now();await Promise.race([u.exec(B),a]);const W=Date.now()-U;console.log(`合并完成，耗时: ${W}ms`),n.value=90,console.log("=== 分离式转码完成 ==="),console.log(`总耗时: ${m+L+W}ms`)}catch(l){throw console.error("分离式转码失败:",l),l}},te=async(t,o)=>{console.log("=== 开始仅视频转码 ===");const a=new Promise((l,r)=>{setTimeout(()=>{r(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)});try{d("正在转码视频..."),n.value=30;const l=_(t,o);console.log("仅视频转码命令:",l.join(" "));const r=Date.now();await Promise.race([u.exec(l),a]);const m=Date.now()-r;console.log(`仅视频转码完成，耗时: ${m}ms`),n.value=90}catch(l){throw console.error("仅视频转码失败:",l),l}},_=(t,o)=>{const a=["-i",`input.${t}`];if(j.value!=="original"){const r={"4k":"3840:2160","1080p":"1920:1080","720p":"1280:720","480p":"854:480"};a.push("-vf",`scale=${r[j.value]}`)}S.value!=="original"&&a.push("-r",S.value);const l=I.value==="high"?18:I.value==="medium"?23:28;return a.push("-c:v","libx264","-preset","ultrafast","-crf",l.toString()),a.push("-an"),a.push("-y",`video_only.${o}`),a},le=(t,o)=>{const a=["-i",`input.${t}`];switch(a.push("-vn"),o){case"mp4":case"mov":case"mkv":case"wmv":case"flv":a.push("-c:a","aac","-b:a","128k");break;case"avi":a.push("-c:a","mp3","-b:a","128k");break}return a.push("-y","audio.aac"),a},ae=t=>["-i",`video_only.${t}`,"-i","audio.aac","-c:v","copy","-c:a","copy","-shortest","-y",`output.${t}`],E=async(t,o)=>{try{const a=[`input.${t}`,`video_only.${o}`,"audio.aac",`output.${o}`];for(const l of a)try{await u.deleteFile(l)}catch(r){console.warn(`删除临时文件 ${l} 失败:`,r)}console.log("转换完成，已清理临时文件")}catch(a){console.warn("清理临时文件失败:",a)}},O=t=>{var o;return((o=t.split(".").pop())==null?void 0:o.toLowerCase())||"mp4"},se=()=>{if(M.value&&$.value){const t=document.createElement("a");t.href=$.value,t.download=`converted.${C.value}`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}};return(t,o)=>(g(),ie(ue,{title:"视频格式转换 - 小左子的工具箱"},{default:de(()=>{var a;return[o[34]||(o[34]=e("div",{class:"bg-white dark:bg-gray-800 shadow-sm"},[e("div",{class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},[e("div",{class:"flex items-center space-x-4"},[e("div",{class:"h-12 w-12 rounded-lg bg-blue-600 flex items-center justify-center"},[e("svg",{class:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])]),e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"视频格式转换"),e("p",{class:"text-gray-600 dark:text-gray-400"},"支持多种格式视频转换，快速高效")])])])],-1)),e("div",ve,[e("div",me,[e("div",ge,[e("div",pe,[o[6]||(o[6]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",fe,i(A.value),1)])]),e("div",be,[o[11]||(o[11]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 选择视频文件 ",-1)),e("div",{onDrop:Y,onDragover:Z,class:K(["border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":c.value}])},[o[10]||(o[10]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",xe,[o[8]||(o[8]=e("label",{for:"file-upload",class:"cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 选择文件 ",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"video/*",onChange:J},null,32),o[9]||(o[9]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 支持 MP4, AVI, MOV, MKV, WMV 等格式 ",-1)),c.value?(g(),p("p",ke," 已选择: "+i(c.value.name),1)):w("",!0),b.value?(g(),p("div",we,[o[7]||(o[7]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," 视频信息 ",-1)),e("div",he,[e("div",null,"时长: "+i(b.value.duration.toFixed(2))+"秒",1),e("div",null,"帧率: "+i(b.value.fps.toFixed(2))+"fps",1),e("div",null,"总帧数: "+i(b.value.totalFrames),1),e("div",null,"分辨率: "+i(b.value.resolution),1),e("div",null,"比特率: "+i(b.value.bitrate),1),e("div",null,"格式: "+i(b.value.format),1)]),f.value.length>0?(g(),p("div",ye,[e("h5",Fe," 音频流 ("+i(f.value.length)+"个) ",1),e("div",Me,[(g(!0),p(N,null,Q(f.value,l=>(g(),p("div",{key:l.index,class:K({"text-blue-600 dark:text-blue-400 font-medium":l.index===V.value})}," 流 "+i(l.index)+": "+i(l.codec)+" ("+i(l.channels)+"声道, "+i(l.sampleRate)+"Hz) "+i(l.language?`[${l.language}]`:"")+" "+i(l.index===V.value?"✓":""),3))),128))])])):w("",!0)])):w("",!0)])],34)]),e("div",$e,[o[23]||(o[23]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 转换选项 ",-1)),e("div",Ve,[e("div",null,[o[13]||(o[13]=e("label",{for:"output-format",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 输出格式 ",-1)),D(e("select",{id:"output-format","onUpdate:modelValue":o[0]||(o[0]=l=>C.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[12]||(o[12]=[e("option",{value:"mp4"},"MP4",-1),e("option",{value:"avi"},"AVI",-1),e("option",{value:"mov"},"MOV",-1),e("option",{value:"mkv"},"MKV",-1),e("option",{value:"wmv"},"WMV",-1),e("option",{value:"flv"},"FLV",-1)]),512),[[T,C.value]])]),e("div",null,[o[15]||(o[15]=e("label",{for:"video-quality",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频质量 ",-1)),D(e("select",{id:"video-quality","onUpdate:modelValue":o[1]||(o[1]=l=>I.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[14]||(o[14]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"中等质量",-1),e("option",{value:"low"},"低质量",-1)]),512),[[T,I.value]])]),e("div",null,[o[17]||(o[17]=e("label",{for:"resolution",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 分辨率 ",-1)),D(e("select",{id:"resolution","onUpdate:modelValue":o[2]||(o[2]=l=>j.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[16]||(o[16]=[e("option",{value:"original"},"保持原分辨率",-1),e("option",{value:"4k"},"4K (3840x2160)",-1),e("option",{value:"1080p"},"1080p (1920x1080)",-1),e("option",{value:"720p"},"720p (1280x720)",-1),e("option",{value:"480p"},"480p (854x480)",-1)]),512),[[T,j.value]])]),e("div",null,[o[19]||(o[19]=e("label",{for:"framerate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 帧率 ",-1)),D(e("select",{id:"framerate","onUpdate:modelValue":o[3]||(o[3]=l=>S.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[18]||(o[18]=[e("option",{value:"original"},"保持原帧率",-1),e("option",{value:"60"},"60 FPS",-1),e("option",{value:"30"},"30 FPS",-1),e("option",{value:"25"},"25 FPS",-1),e("option",{value:"24"},"24 FPS",-1)]),512),[[T,S.value]])]),e("div",null,[o[21]||(o[21]=e("label",{for:"audio-mode",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 音频处理 ",-1)),D(e("select",{id:"audio-mode","onUpdate:modelValue":o[4]||(o[4]=l=>y.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[20]||(o[20]=[e("option",{value:"auto"},"自动（推荐）",-1),e("option",{value:"keep"},"保留音频",-1),e("option",{value:"none"},"仅视频",-1)]),512),[[T,y.value]])]),y.value!=="none"&&f.value.length>1?(g(),p("div",Ce,[o[22]||(o[22]=e("label",{for:"audio-stream",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 音频流选择 ",-1)),D(e("select",{id:"audio-stream","onUpdate:modelValue":o[5]||(o[5]=l=>V.value=l),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(g(!0),p(N,null,Q(f.value,l=>(g(),p("option",{key:l.index,value:l.index}," 流 "+i(l.index)+": "+i(l.codec)+" ("+i(l.channels)+"声道, "+i(l.sampleRate)+"Hz) "+i(l.language?`[${l.language}]`:""),9,De))),128))],512),[[T,V.value]])])):w("",!0)])]),e("div",Te,[e("button",{onClick:ee,disabled:!c.value||!b.value||k.value||!P.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[k.value?(g(),p("svg",Se,o[25]||(o[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(g(),p("svg",je,o[24]||(o[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))),X(" "+i(k.value?"转换中...":"开始转换"),1)],8,Ie)]),F.value?(g(),p("div",Le,[o[26]||(o[26]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," FFmpeg加载进度 ",-1)),e("div",Pe,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:q({width:n.value+"%"})},null,4)]),o[27]||(o[27]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 正在加载FFmpeg核心文件，请稍候... ",-1))])):w("",!0),k.value&&!F.value?(g(),p("div",Be,[o[29]||(o[29]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"转换进度",-1)),e("div",Ue,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:q({width:n.value+"%"})},null,4)]),o[30]||(o[30]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 正在转换中，请稍候... ",-1)),f.value.length>0?(g(),p("div",He,[o[28]||(o[28]=e("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2"}," 流映射状态 ",-1)),e("div",ze,[e("div",null,"音频流数量: "+i(f.value.length),1),e("div",null,"处理模式: "+i(y.value==="auto"?"自动":y.value==="keep"?"保留音频":"仅视频"),1),y.value!=="none"&&f.value.length>0?(g(),p("div",Ae," 选中音频流: "+i(((a=f.value[V.value])==null?void 0:a.codec)||"未知"),1)):w("",!0)])])):w("",!0)])):w("",!0),M.value&&$.value?(g(),p("div",Re,[e("div",{class:"flex items-center justify-between"},[o[32]||(o[32]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-green-800 dark:text-green-200"},"转换完成！")],-1)),e("button",{onClick:se,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},o[31]||(o[31]=[e("svg",{class:"inline-block h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),X(" 下载文件 ",-1)]))])])):w("",!0)]),o[33]||(o[33]=e("div",{class:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"功能说明"),e("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输入格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid, DivX)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输出格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])])]),e("div",{class:"space-y-4"},[e("div",{class:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-blue-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," 隐私保护 "),e("p",{class:"text-sm text-blue-700 dark:text-blue-300 mt-1"}," 所有视频转换都在您的浏览器本地进行，文件不会上传到服务器，确保您的隐私安全。 ")])])]),e("div",{class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," 智能分离转码 "),e("p",{class:"text-sm text-green-700 dark:text-green-300 mt-1"}," 系统采用分离式转码技术，分别处理视频和音频，有效避免转换卡住问题，提供更稳定的转换体验。 "),e("div",{class:"mt-2 text-xs text-green-600 dark:text-green-400"},[e("div",null,"• 自动检测音频流并选择最佳处理方式"),e("div",null,"• 视频和音频独立处理，避免相互影响"),e("div",null,"• 支持多种音频编码器，兼容性更好")])])])])])],-1))])]}),_:1,__:[34]}))}});export{Ke as default};
