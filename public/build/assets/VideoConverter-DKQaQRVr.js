var ge=Object.defineProperty;var Q=l=>{throw TypeError(l)};var be=(l,a,r)=>a in l?ge(l,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[a]=r;var x=(l,a,r)=>be(l,typeof a!="symbol"?a+"":a,r),Y=(l,a,r)=>a.has(l)||Q("Cannot "+r);var d=(l,a,r)=>(Y(l,a,"read from private field"),r?r.call(l):a.get(l)),C=(l,a,r)=>a.has(l)?Q("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(l):a.set(l,r),T=(l,a,r,i)=>(Y(l,a,"write to private field"),i?i.call(l,r):a.set(l,r),r);import{d as he,r as k,f as we,g as xe,o as A,w as ye,b as e,a as S,i as B,t as D,n as ke,j,v as W,k as J,l as Z}from"./app-BESIWa7u.js";import{_ as Ee}from"./Layout.vue_vue_type_script_setup_true_lang-DnrDoKJE.js";var v;(function(l){l.LOAD="LOAD",l.EXEC="EXEC",l.FFPROBE="FFPROBE",l.WRITE_FILE="WRITE_FILE",l.READ_FILE="READ_FILE",l.DELETE_FILE="DELETE_FILE",l.RENAME="RENAME",l.CREATE_DIR="CREATE_DIR",l.LIST_DIR="LIST_DIR",l.DELETE_DIR="DELETE_DIR",l.ERROR="ERROR",l.DOWNLOAD="DOWNLOAD",l.PROGRESS="PROGRESS",l.LOG="LOG",l.MOUNT="MOUNT",l.UNMOUNT="UNMOUNT"})(v||(v={}));const Re=(()=>{let l=0;return()=>l++})(),De=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Oe=new Error("called FFmpeg.terminate()");var E,F,I,V,$,H,y;class Le{constructor(){C(this,E,null);C(this,F,{});C(this,I,{});C(this,V,[]);C(this,$,[]);x(this,"loaded",!1);C(this,H,()=>{d(this,E)&&(d(this,E).onmessage=({data:{id:a,type:r,data:i}})=>{switch(r){case v.LOAD:this.loaded=!0,d(this,F)[a](i);break;case v.MOUNT:case v.UNMOUNT:case v.EXEC:case v.FFPROBE:case v.WRITE_FILE:case v.READ_FILE:case v.DELETE_FILE:case v.RENAME:case v.CREATE_DIR:case v.LIST_DIR:case v.DELETE_DIR:d(this,F)[a](i);break;case v.LOG:d(this,V).forEach(n=>n(i));break;case v.PROGRESS:d(this,$).forEach(n=>n(i));break;case v.ERROR:d(this,I)[a](i);break}delete d(this,F)[a],delete d(this,I)[a]})});C(this,y,({type:a,data:r},i=[],n)=>d(this,E)?new Promise((u,g)=>{const w=Re();d(this,E)&&d(this,E).postMessage({id:w,type:a,data:r},i),d(this,F)[w]=u,d(this,I)[w]=g,n==null||n.addEventListener("abort",()=>{g(new DOMException(`Message # ${w} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(De));x(this,"load",({classWorkerURL:a,...r}={},{signal:i}={})=>(d(this,E)||(T(this,E,a?new Worker(new URL(a,import.meta.url),{type:"module"}):new Worker(new URL("/build/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),d(this,H).call(this)),d(this,y).call(this,{type:v.LOAD,data:r},void 0,i)));x(this,"exec",(a,r=-1,{signal:i}={})=>d(this,y).call(this,{type:v.EXEC,data:{args:a,timeout:r}},void 0,i));x(this,"ffprobe",(a,r=-1,{signal:i}={})=>d(this,y).call(this,{type:v.FFPROBE,data:{args:a,timeout:r}},void 0,i));x(this,"terminate",()=>{const a=Object.keys(d(this,I));for(const r of a)d(this,I)[r](Oe),delete d(this,I)[r],delete d(this,F)[r];d(this,E)&&(d(this,E).terminate(),T(this,E,null),this.loaded=!1)});x(this,"writeFile",(a,r,{signal:i}={})=>{const n=[];return r instanceof Uint8Array&&n.push(r.buffer),d(this,y).call(this,{type:v.WRITE_FILE,data:{path:a,data:r}},n,i)});x(this,"mount",(a,r,i)=>{const n=[];return d(this,y).call(this,{type:v.MOUNT,data:{fsType:a,options:r,mountPoint:i}},n)});x(this,"unmount",a=>{const r=[];return d(this,y).call(this,{type:v.UNMOUNT,data:{mountPoint:a}},r)});x(this,"readFile",(a,r="binary",{signal:i}={})=>d(this,y).call(this,{type:v.READ_FILE,data:{path:a,encoding:r}},void 0,i));x(this,"deleteFile",(a,{signal:r}={})=>d(this,y).call(this,{type:v.DELETE_FILE,data:{path:a}},void 0,r));x(this,"rename",(a,r,{signal:i}={})=>d(this,y).call(this,{type:v.RENAME,data:{oldPath:a,newPath:r}},void 0,i));x(this,"createDir",(a,{signal:r}={})=>d(this,y).call(this,{type:v.CREATE_DIR,data:{path:a}},void 0,r));x(this,"listDir",(a,{signal:r}={})=>d(this,y).call(this,{type:v.LIST_DIR,data:{path:a}},void 0,r));x(this,"deleteDir",(a,{signal:r}={})=>d(this,y).call(this,{type:v.DELETE_DIR,data:{path:a}},void 0,r))}on(a,r){a==="log"?d(this,V).push(r):a==="progress"&&d(this,$).push(r)}off(a,r){a==="log"?T(this,V,d(this,V).filter(i=>i!==r)):a==="progress"&&T(this,$,d(this,$).filter(i=>i!==r))}}E=new WeakMap,F=new WeakMap,I=new WeakMap,V=new WeakMap,$=new WeakMap,H=new WeakMap,y=new WeakMap;var ee;(function(l){l.MEMFS="MEMFS",l.NODEFS="NODEFS",l.NODERAWFS="NODERAWFS",l.IDBFS="IDBFS",l.WORKERFS="WORKERFS",l.PROXYFS="PROXYFS"})(ee||(ee={}));const Ie=new Error("failed to get response body reader"),Me=new Error("failed to complete download"),_e="Content-Length",Ce=l=>new Promise((a,r)=>{const i=new FileReader;i.onload=()=>{const{result:n}=i;n instanceof ArrayBuffer?a(new Uint8Array(n)):a(new Uint8Array)},i.onerror=n=>{var u,g;r(Error(`File could not be read! Code=${((g=(u=n==null?void 0:n.target)==null?void 0:u.error)==null?void 0:g.code)||-1}`))},i.readAsArrayBuffer(l)}),te=async l=>{let a;if(typeof l=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(l)?a=atob(l.split(",")[1]).split("").map(r=>r.charCodeAt(0)):a=await(await fetch(l)).arrayBuffer();else if(l instanceof URL)a=await(await fetch(l)).arrayBuffer();else if(l instanceof File||l instanceof Blob)a=await Ce(l);else return new Uint8Array;return new Uint8Array(a)},Ae=async(l,a)=>{var n;const r=await fetch(l);let i;try{const u=parseInt(r.headers.get(_e)||"-1"),g=(n=r.body)==null?void 0:n.getReader();if(!g)throw Ie;const w=[];let M=0;for(;;){const{done:c,value:L}=await g.read(),_=L?L.length:0;if(c){if(u!=-1&&u!==M)throw Me;a&&a({url:l,total:u,received:M,delta:_,done:c});break}w.push(L),M+=_,a&&a({url:l,total:u,received:M,delta:_,done:c})}const b=new Uint8Array(M);let m=0;for(const c of w)b.set(c,m),m+=c.length;i=b.buffer}catch(u){console.log("failed to send download progress event: ",u),i=await r.arrayBuffer()}return i},z=async(l,a,r=!1,i)=>{const n=r?await Ae(l,i):await(await fetch(l)).arrayBuffer(),u=new Blob([n],{type:a});return URL.createObjectURL(u)},Fe={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},Se={class:"grid grid-cols-1 lg:grid-cols-10 gap-8"},Ve={class:"lg:col-span-6 order-1 lg:order-2"},$e={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},Ue={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},Te={class:"flex items-center"},Be={class:"text-blue-800 dark:text-blue-200"},Ne={class:"mb-8"},Pe={class:"mt-4"},je={key:0,class:"mt-2 text-sm text-blue-600 dark:text-blue-400"},We={key:1,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},He={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400"},Xe={class:"mb-8"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ke={class:"text-center"},Ge=["disabled"],qe={key:0,class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qe={key:1,class:"inline-block h-5 w-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ye={key:0,class:"mt-8"},Je={class:"flex items-center justify-between mb-2"},Ze={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},et={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},tt={key:1,class:"mt-8"},ot={class:"flex items-center justify-between mb-2"},at={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},rt={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},lt={key:2,class:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},K="https://cdn.jsdelivr.net/npm/@ffmpeg/core-mt@0.12.10/dist/esm",dt=he({__name:"VideoConverter",setup(l){const a=k(!1),r=k(!1),i=k(!1),n=k(0),u=k(null),g=k(null),w=k(""),M=k("请选择视频文件开始转换"),b=k(null),m=k(null),c=o=>{M.value=o,console.log(`[VideoConverter] ${o}`)},L=k("mp4"),_=k("high"),N=k("original"),P=k("original"),h=new Le;we(async()=>{h.off("log"),h.off("progress"),h.on("log",({message:o})=>{var t;if(r.value){if(o.includes("frame=")&&o.includes("fps=")||o.includes("size=")&&o.includes("bitrate="))return;(o.includes("Stream mapping:")||o.includes("Output #")||o.includes("video:")||o.includes("audio:")||o.includes("muxing overhead:"))&&console.log(`[FFmpeg] ${o}`)}else(o.includes("Duration:")||o.includes("Video:")||o.includes("Audio:"))&&console.log(`[FFmpeg] ${o}`);if(o.includes("Duration:")){const s=o.match(/Duration: (\d{2}):(\d{2}):(\d{2}\.\d{2})/);if(s){const f=parseInt(s[1]),p=parseInt(s[2]),R=parseFloat(s[3]),O=f*3600+p*60+R;m.value||(m.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),m.value.duration=O}}if(o.includes("Video:")){const s=o.match(/(\d{3,4})x(\d{3,4})/),f=o.match(/(\d+) fps/),p=o.match(/Video: (\w+)/),R=o.match(/(\d+) kb\/s/);if(m.value||(m.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),s){const O=parseInt(s[1]),U=parseInt(s[2]);O>=100&&U>=100&&(m.value.resolution=`${O}x${U}`)}f&&(m.value.fps=parseInt(f[1])),p&&(m.value.videoCodec=p[1]),R&&(m.value.bitrate=`${R[1]} kb/s`)}if(o.includes("Audio:")){const s=o.match(/Audio: (\w+)/);m.value||(m.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),s&&(m.value.audioCodec=s[1])}if(o.includes("frame=")){const s=o.match(/frame=\s*(\d+)/);if(s&&r.value){const f=parseInt(s[1]),p=((t=b.value)==null?void 0:t.totalFrames)||111,R=Math.min(f/p*.4,.4);n.value=R*100}}}),h.on("progress",({progress:o})=>{});try{i.value=!0,c("正在加载资源...");const o=setInterval(()=>{n.value<80&&(n.value+=5,c(`正在加载资源... ${n.value}%`))},200);await h.load({coreURL:await z(`${K}/ffmpeg-core.js`,"text/javascript"),wasmURL:await z(`${K}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await z(`${K}/ffmpeg-core.worker.js`,"text/javascript")}),clearInterval(o),n.value=100,c("资源加载完成！"),a.value=!0,i.value=!1,await new Promise(t=>setTimeout(t,1e3)),c("请选择视频文件开始转换"),n.value=0}catch(o){console.error("FFmpeg加载失败:",o),c("资源加载失败，请刷新页面重试"),i.value=!1}});const oe=async o=>{const t=o.target;t.files&&t.files[0]&&(u.value=t.files[0],g.value=null,w.value="",n.value=0,b.value=null,c(`已选择文件: ${u.value.name}`),await G())},ae=async o=>{var t;console.log(o),o.preventDefault(),(t=o.dataTransfer)!=null&&t.files&&o.dataTransfer.files[0]&&(u.value=o.dataTransfer.files[0],g.value=null,w.value="",n.value=0,b.value=null,c(`已选择文件: ${u.value.name}`),await G())},re=o=>{o.preventDefault()},G=async()=>{if(u.value){if(!a.value){c("资源尚未加载完成，无法读取视频信息");return}try{c("正在读取视频信息..."),m.value=null;const o=q(u.value.name);await h.writeFile(`temp_input.${o}`,await te(u.value)),console.log("尝试使用exec获取视频信息...");try{if(await h.exec(["-i",`temp_input.${o}`]),m.value&&m.value.duration>0){const t=Math.round(m.value.duration*m.value.fps);b.value={duration:m.value.duration,fps:m.value.fps,totalFrames:t,resolution:m.value.resolution,bitrate:m.value.bitrate,format:o},c(`视频信息读取成功: ${m.value.resolution}, ${m.value.duration.toFixed(2)}秒, ${m.value.fps}fps`),console.log("解析到的视频信息:",m.value)}else throw new Error("无法解析视频信息")}catch(t){throw console.error("exec命令失败:",t),new Error("无法读取视频信息")}await h.deleteFile(`temp_input.${o}`)}catch(o){console.error("读取视频信息失败:",o),c("读取视频信息失败，无法继续转换"),b.value=null,u.value=null}}},le=async()=>{if(!u.value||!h){alert("请先选择视频文件");return}const o=q(u.value.name),t=L.value;console.log("开始转换:",u.value.name,"→",L.value),r.value=!0,n.value=0,c("正在加载资源...");try{if(!a.value){c("资源尚未加载完成，请稍候...");return}c("开始转换..."),n.value=0,c("正在写入输入文件..."),await h.writeFile(`input.${o}`,await te(u.value)),n.value=0,await se(o,t),c("正在读取输出文件...");try{const s=await h.readFile(`output.${t}`);if(!s||s.length===0)throw new Error("输出文件为空或无效");g.value=new Blob([s.buffer],{type:`video/${t}`}),w.value=URL.createObjectURL(g.value),n.value=100,c("转换完成！"),console.log("转换成功，文件大小:",s.length,"字节"),await X(o,t)}catch(s){console.error("读取输出文件失败:",s);try{const f=await h.readFile(`video_only.${t}`);if(f&&f.length>0){g.value=new Blob([f.buffer],{type:`video/${t}`}),w.value=URL.createObjectURL(g.value),n.value=100,c("转换完成！（仅视频）"),console.log("转换成功（仅视频），文件大小:",f.length,"字节"),await X(o,t);return}}catch(f){console.error("视频文件也不存在:",f)}throw new Error(`读取输出文件失败: ${s.message||s.toString()}`)}}catch(s){console.error("转换失败:",s.message||s.toString());let f="转换失败，请检查文件格式或重试";const p=s.message||s.toString()||"";p.includes("超时")?f="转换超时，建议：1. 尝试更小的文件 2. 降低视频质量设置 3. 检查网络连接":p.includes("编码器")?f="编码器错误，建议：1. 尝试不同的输出格式 2. 检查输入文件是否损坏":p.includes("内存")?f="内存不足，建议：1. 关闭其他程序 2. 尝试更小的文件":p.includes("stream")||p.includes("map")?f="流映射错误，建议：1. 尝试选择'仅视频'选项 2. 检查音频流是否兼容 3. 尝试不同的输出格式":(p.includes("音频")||p.includes("audio"))&&(f="音频处理错误，建议：1. 选择'仅视频'选项 2. 尝试不同的音频处理模式 3. 检查音频编码器兼容性"),c(f),alert(f),await X(o,t)}finally{r.value=!1,i.value=!1}},se=async(o,t)=>{let s=0,f=0,p=0;const R=new Promise((O,U)=>{setTimeout(()=>{U(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)});try{c("正在转码视频..."),n.value=0;const O=ne(o,t),U=Date.now();await Promise.race([h.exec(O),R]),s=Date.now()-U,n.value=40,c("正在处理音频..."),n.value=40;const ve=ie(o,t),me=Date.now();await Promise.race([h.exec(ve),R]),f=Date.now()-me,n.value=80,c("正在合并视频和音频..."),n.value=80;const fe=de(t),pe=Date.now();await Promise.race([h.exec(fe),R]),p=Date.now()-pe,n.value=100,console.log("转码完成，总耗时:",s+f+p,"ms")}catch(O){throw console.error("转码失败:",O),O}},ne=(o,t)=>{const s=["-i",`input.${o}`];if(N.value!=="original"){const p={"4k":"3840:2160","1080p":"1920:1080","720p":"1280:720","480p":"854:480"};s.push("-vf",`scale=${p[N.value]}`)}P.value!=="original"&&s.push("-r",P.value);const f=_.value==="high"?18:_.value==="medium"?23:28;return s.push("-c:v","libx264","-preset","ultrafast","-crf",f.toString()),s.push("-an"),s.push("-y",`video_only.${t}`),s},ie=(o,t)=>{const s=["-i",`input.${o}`];return s.push("-vn"),t==="avi"?(s.push("-c:a","mp3","-b:a","128k","-ar","44100"),s.push("-y","audio.mp3")):(s.push("-c:a","aac","-b:a","128k","-ar","48000"),s.push("-y","audio.aac")),s},de=o=>{const t=o==="avi"?"audio.mp3":"audio.aac";return["-i",`video_only.${o}`,"-i",t,"-c:v","copy","-c:a","copy","-shortest","-y",`output.${o}`]},X=async(o,t)=>{try{const s=t==="avi"?"audio.mp3":"audio.aac",f=[`input.${o}`,`video_only.${t}`,s,`output.${t}`];for(const p of f)try{await h.deleteFile(p)}catch(R){console.warn("删除临时文件失败:",R)}}catch(s){console.warn("清理临时文件失败:",s)}},q=o=>{var t;return((t=o.split(".").pop())==null?void 0:t.toLowerCase())||"mp4"},ue=async()=>{try{const o=await fetch("/api/tools/record-usage-public",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({tool_name:"视频转码"})});o.ok?console.log("工具使用记录已保存"):console.warn("工具使用记录失败:",o.status)}catch(o){console.warn("记录工具使用时出错:",o)}},ce=async()=>{if(g.value&&w.value&&u.value){const o=document.createElement("a");o.href=w.value;const t=u.value.name,s=t.substring(0,t.lastIndexOf("."));o.download=`${s}.${L.value}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),await ue()}};return(o,t)=>(A(),xe(Ee,{title:"视频格式转换 - 小左子的工具箱"},{default:ye(()=>[e("div",Fe,[e("div",Se,[t[27]||(t[27]=e("div",{class:"lg:col-span-4 order-2 lg:order-1"},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 lg:sticky lg:top-8"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 功能说明 "),e("div",{class:"grid grid-cols-2 gap-4"},[e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输入格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid, DivX)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输出格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])])]),e("div",{class:"mt-6"},[e("div",{class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," 智能分离转码 "),e("p",{class:"text-sm text-green-700 dark:text-green-300 mt-1"}," 系统采用分离式转码技术，分别处理视频和音频，有效避免转换卡住问题，提供更稳定的转换体验。 "),e("div",{class:"mt-2 text-xs text-green-600 dark:text-green-400"},[e("div",null,"• 自动检测音频流并选择最佳处理方式"),e("div",null,"• 视频和音频独立处理，避免相互影响"),e("div",null,"• 支持多种音频编码器，兼容性更好")])])])])])])],-1)),e("div",Ve,[e("div",$e,[e("div",Ue,[e("div",Te,[t[4]||(t[4]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Be,D(M.value),1)])]),e("div",Ne,[t[9]||(t[9]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 选择视频文件 ",-1)),e("div",{onDrop:ae,onDragover:re,class:ke(["border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":u.value}])},[t[8]||(t[8]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",Pe,[t[6]||(t[6]=e("label",{for:"file-upload",class:"cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 选择文件 ",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"video/*",onChange:oe},null,32),t[7]||(t[7]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 支持 MP4, AVI, MOV, MKV, WMV 等格式 ",-1)),u.value?(A(),S("p",je," 已选择: "+D(u.value.name),1)):B("",!0),b.value?(A(),S("div",We,[t[5]||(t[5]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," 视频信息 ",-1)),e("div",He,[e("div",null,"时长: "+D(b.value.duration.toFixed(2))+"秒",1),e("div",null,"帧率: "+D(b.value.fps.toFixed(2))+"fps",1),e("div",null,"总帧数: "+D(b.value.totalFrames),1),e("div",null,"分辨率: "+D(b.value.resolution),1),e("div",null,"比特率: "+D(b.value.bitrate),1),e("div",null,"格式: "+D(b.value.format),1)])])):B("",!0)])],34)]),e("div",Xe,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 转换选项 ",-1)),e("div",ze,[e("div",null,[t[11]||(t[11]=e("label",{for:"output-format",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 输出格式 ",-1)),j(e("select",{id:"output-format","onUpdate:modelValue":t[0]||(t[0]=s=>L.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},t[10]||(t[10]=[e("option",{value:"mp4"},"MP4",-1),e("option",{value:"avi"},"AVI",-1),e("option",{value:"mov"},"MOV",-1),e("option",{value:"mkv"},"MKV",-1),e("option",{value:"wmv"},"WMV",-1),e("option",{value:"flv"},"FLV",-1)]),512),[[W,L.value]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"video-quality",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频质量 ",-1)),j(e("select",{id:"video-quality","onUpdate:modelValue":t[1]||(t[1]=s=>_.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},t[12]||(t[12]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"中等质量",-1),e("option",{value:"low"},"低质量",-1)]),512),[[W,_.value]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"resolution",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 分辨率 ",-1)),j(e("select",{id:"resolution","onUpdate:modelValue":t[2]||(t[2]=s=>N.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},t[14]||(t[14]=[e("option",{value:"original"},"保持原分辨率",-1),e("option",{value:"4k"},"4K (3840x2160)",-1),e("option",{value:"1080p"},"1080p (1920x1080)",-1),e("option",{value:"720p"},"720p (1280x720)",-1),e("option",{value:"480p"},"480p (854x480)",-1)]),512),[[W,N.value]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"framerate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 帧率 ",-1)),j(e("select",{id:"framerate","onUpdate:modelValue":t[3]||(t[3]=s=>P.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},t[16]||(t[16]=[e("option",{value:"original"},"保持原帧率",-1),e("option",{value:"60"},"60 FPS",-1),e("option",{value:"30"},"30 FPS",-1),e("option",{value:"25"},"25 FPS",-1),e("option",{value:"24"},"24 FPS",-1)]),512),[[W,P.value]])])])]),e("div",Ke,[e("button",{onClick:le,disabled:!u.value||!b.value||r.value||!a.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[r.value?(A(),S("svg",Qe,t[20]||(t[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(A(),S("svg",qe,t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))),J(" "+D(r.value?"转换中...":"开始转换"),1)],8,Ge)]),i.value?(A(),S("div",Ye,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 资源加载进度 ",-1)),e("div",Je,[t[21]||(t[21]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"正在加载核心文件，请稍候...",-1)),e("span",Ze,D(Math.round(n.value))+"%",1)]),e("div",et,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Z({width:n.value+"%"})},null,4)])])):B("",!0),r.value&&!i.value?(A(),S("div",tt,[t[24]||(t[24]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 转换进度 ",-1)),e("div",ot,[t[23]||(t[23]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"正在转换中，请稍候...",-1)),e("span",at,D(Math.round(n.value))+"%",1)]),e("div",rt,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Z({width:n.value+"%"})},null,4)])])):B("",!0),g.value&&w.value?(A(),S("div",lt,[e("div",{class:"flex items-center justify-between"},[t[26]||(t[26]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-green-800 dark:text-green-200"},"转换完成！")],-1)),e("button",{onClick:ce,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},t[25]||(t[25]=[e("svg",{class:"inline-block h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),J(" 下载文件 ",-1)]))])])):B("",!0)])])])])]),_:1}))}});export{dt as default};
