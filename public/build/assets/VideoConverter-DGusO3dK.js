var ge=Object.defineProperty;var Z=a=>{throw TypeError(a)};var pe=(a,t,r)=>t in a?ge(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;var y=(a,t,r)=>pe(a,typeof t!="symbol"?t+"":t,r),J=(a,t,r)=>t.has(a)||Z("Cannot "+r);var d=(a,t,r)=>(J(a,t,"read from private field"),r?r.call(a):t.get(a)),$=(a,t,r)=>t.has(a)?Z("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,r),P=(a,t,r,i)=>(J(a,t,"write to private field"),i?i.call(a,r):t.set(a,r),r);import{d as be,r as E,f as he,g as we,o as A,w as xe,b as e,a as S,i as N,t as I,n as ye,j,v as W,k as ee,l as oe}from"./app-CrFsRwlR.js";import{_ as ke}from"./Layout.vue_vue_type_script_setup_true_lang-qRnSc4tq.js";var m;(function(a){a.LOAD="LOAD",a.EXEC="EXEC",a.FFPROBE="FFPROBE",a.WRITE_FILE="WRITE_FILE",a.READ_FILE="READ_FILE",a.DELETE_FILE="DELETE_FILE",a.RENAME="RENAME",a.CREATE_DIR="CREATE_DIR",a.LIST_DIR="LIST_DIR",a.DELETE_DIR="DELETE_DIR",a.ERROR="ERROR",a.DOWNLOAD="DOWNLOAD",a.PROGRESS="PROGRESS",a.LOG="LOG",a.MOUNT="MOUNT",a.UNMOUNT="UNMOUNT"})(m||(m={}));const Ee=(()=>{let a=0;return()=>a++})(),Re=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),De=new Error("called FFmpeg.terminate()");var R,F,M,V,U,H,k;class Le{constructor(){$(this,R,null);$(this,F,{});$(this,M,{});$(this,V,[]);$(this,U,[]);y(this,"loaded",!1);$(this,H,()=>{d(this,R)&&(d(this,R).onmessage=({data:{id:t,type:r,data:i}})=>{switch(r){case m.LOAD:this.loaded=!0,d(this,F)[t](i);break;case m.MOUNT:case m.UNMOUNT:case m.EXEC:case m.FFPROBE:case m.WRITE_FILE:case m.READ_FILE:case m.DELETE_FILE:case m.RENAME:case m.CREATE_DIR:case m.LIST_DIR:case m.DELETE_DIR:d(this,F)[t](i);break;case m.LOG:d(this,V).forEach(n=>n(i));break;case m.PROGRESS:d(this,U).forEach(n=>n(i));break;case m.ERROR:d(this,M)[t](i);break}delete d(this,F)[t],delete d(this,M)[t]})});$(this,k,({type:t,data:r},i=[],n)=>d(this,R)?new Promise((v,b)=>{const x=Ee();d(this,R)&&d(this,R).postMessage({id:x,type:t,data:r},i),d(this,F)[x]=v,d(this,M)[x]=b,n==null||n.addEventListener("abort",()=>{b(new DOMException(`Message # ${x} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(Re));y(this,"load",({classWorkerURL:t,...r}={},{signal:i}={})=>(d(this,R)||(P(this,R,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/build/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),d(this,H).call(this)),d(this,k).call(this,{type:m.LOAD,data:r},void 0,i)));y(this,"exec",(t,r=-1,{signal:i}={})=>d(this,k).call(this,{type:m.EXEC,data:{args:t,timeout:r}},void 0,i));y(this,"ffprobe",(t,r=-1,{signal:i}={})=>d(this,k).call(this,{type:m.FFPROBE,data:{args:t,timeout:r}},void 0,i));y(this,"terminate",()=>{const t=Object.keys(d(this,M));for(const r of t)d(this,M)[r](De),delete d(this,M)[r],delete d(this,F)[r];d(this,R)&&(d(this,R).terminate(),P(this,R,null),this.loaded=!1)});y(this,"writeFile",(t,r,{signal:i}={})=>{const n=[];return r instanceof Uint8Array&&n.push(r.buffer),d(this,k).call(this,{type:m.WRITE_FILE,data:{path:t,data:r}},n,i)});y(this,"mount",(t,r,i)=>{const n=[];return d(this,k).call(this,{type:m.MOUNT,data:{fsType:t,options:r,mountPoint:i}},n)});y(this,"unmount",t=>{const r=[];return d(this,k).call(this,{type:m.UNMOUNT,data:{mountPoint:t}},r)});y(this,"readFile",(t,r="binary",{signal:i}={})=>d(this,k).call(this,{type:m.READ_FILE,data:{path:t,encoding:r}},void 0,i));y(this,"deleteFile",(t,{signal:r}={})=>d(this,k).call(this,{type:m.DELETE_FILE,data:{path:t}},void 0,r));y(this,"rename",(t,r,{signal:i}={})=>d(this,k).call(this,{type:m.RENAME,data:{oldPath:t,newPath:r}},void 0,i));y(this,"createDir",(t,{signal:r}={})=>d(this,k).call(this,{type:m.CREATE_DIR,data:{path:t}},void 0,r));y(this,"listDir",(t,{signal:r}={})=>d(this,k).call(this,{type:m.LIST_DIR,data:{path:t}},void 0,r));y(this,"deleteDir",(t,{signal:r}={})=>d(this,k).call(this,{type:m.DELETE_DIR,data:{path:t}},void 0,r))}on(t,r){t==="log"?d(this,V).push(r):t==="progress"&&d(this,U).push(r)}off(t,r){t==="log"?P(this,V,d(this,V).filter(i=>i!==r)):t==="progress"&&P(this,U,d(this,U).filter(i=>i!==r))}}R=new WeakMap,F=new WeakMap,M=new WeakMap,V=new WeakMap,U=new WeakMap,H=new WeakMap,k=new WeakMap;var te;(function(a){a.MEMFS="MEMFS",a.NODEFS="NODEFS",a.NODERAWFS="NODERAWFS",a.IDBFS="IDBFS",a.WORKERFS="WORKERFS",a.PROXYFS="PROXYFS"})(te||(te={}));const Oe=new Error("failed to get response body reader"),Ie=new Error("failed to complete download"),Me="Content-Length",Ce=a=>new Promise((t,r)=>{const i=new FileReader;i.onload=()=>{const{result:n}=i;n instanceof ArrayBuffer?t(new Uint8Array(n)):t(new Uint8Array)},i.onerror=n=>{var v,b;r(Error(`File could not be read! Code=${((b=(v=n==null?void 0:n.target)==null?void 0:v.error)==null?void 0:b.code)||-1}`))},i.readAsArrayBuffer(a)}),le=async a=>{let t;if(typeof a=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(a)?t=atob(a.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=await(await fetch(a)).arrayBuffer();else if(a instanceof URL)t=await(await fetch(a)).arrayBuffer();else if(a instanceof File||a instanceof Blob)t=await Ce(a);else return new Uint8Array;return new Uint8Array(t)},$e=async(a,t)=>{var n;const r=await fetch(a);let i;try{const v=parseInt(r.headers.get(Me)||"-1"),b=(n=r.body)==null?void 0:n.getReader();if(!b)throw Oe;const x=[];let C=0;for(;;){const{done:f,value:L}=await b.read(),O=L?L.length:0;if(f){if(v!=-1&&v!==C)throw Ie;t&&t({url:a,total:v,received:C,delta:O,done:f});break}x.push(L),C+=O,t&&t({url:a,total:v,received:C,delta:O,done:f})}const w=new Uint8Array(C);let u=0;for(const f of x)w.set(f,u),u+=f.length;i=w.buffer}catch(v){console.log("failed to send download progress event: ",v),i=await r.arrayBuffer()}return i},z=async(a,t,r=!1,i)=>{const n=r?await $e(a,i):await(await fetch(a)).arrayBuffer(),v=new Blob([n],{type:t});return URL.createObjectURL(v)},Ae={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},Fe={class:"grid grid-cols-1 lg:grid-cols-10 gap-8"},_e={class:"lg:col-span-6 order-1 lg:order-2"},Se={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},Ve={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},Ue={class:"flex items-center"},Te={class:"text-blue-800 dark:text-blue-200"},Be={class:"mb-8"},Pe={class:"mt-4"},Ne={key:0,class:"mt-2 text-sm text-blue-600 dark:text-blue-400"},je={key:1,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},We={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400"},He={class:"mb-8"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ze={class:"text-center"},Ke=["disabled"],Ge={key:0,class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qe={key:1,class:"inline-block h-5 w-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ye={key:0,class:"mt-8"},qe={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Ze={key:1,class:"mt-8"},Je={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},eo={key:2,class:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},K="https://cdn.jsdelivr.net/npm/@ffmpeg/core-mt@0.12.10/dist/esm",ro=be({__name:"VideoConverter",setup(a){const t=E(!1),r=E(!1),i=E(!1),n=E(0),v=E(null),b=E(null),x=E(""),C=E("请选择视频文件开始转换"),w=E(null),u=E(null),f=l=>{C.value=l,console.log(`[VideoConverter] ${l}`)},L=E("mp4"),O=E("high"),T=E("original"),B=E("original"),p=new Le;he(async()=>{p.off("log"),p.off("progress"),p.on("log",({message:l})=>{var o;if(r.value?(console.log(`[FFmpeg转换] ${l}`),f(l)):(l.includes("Duration:")||l.includes("Video:")||l.includes("Audio:"))&&console.log(`[FFmpeg信息] ${l}`),l.includes("Duration:")){const s=l.match(/Duration: (\d{2}):(\d{2}):(\d{2}\.\d{2})/);if(s){const g=parseInt(s[1]),c=parseInt(s[2]),h=parseFloat(s[3]),D=g*3600+c*60+h;u.value||(u.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),u.value.duration=D}}if(l.includes("Video:")){console.log("解析视频信息行:",l);const s=l.match(/(\d{3,4})x(\d{3,4})/),g=l.match(/(\d+) fps/),c=l.match(/Video: (\w+)/),h=l.match(/(\d+) kb\/s/);if(u.value||(u.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),s){const D=parseInt(s[1]),_=parseInt(s[2]);D>=100&&_>=100?(u.value.resolution=`${D}x${_}`,console.log("解析到分辨率:",u.value.resolution)):console.log("分辨率值不合理，跳过:",D,"x",_)}g&&(u.value.fps=parseInt(g[1]),console.log("解析到帧率:",u.value.fps)),c&&(u.value.videoCodec=c[1],console.log("解析到视频编解码器:",u.value.videoCodec)),h&&(u.value.bitrate=`${h[1]} kb/s`,console.log("解析到比特率:",u.value.bitrate))}if(l.includes("Audio:")){const s=l.match(/Audio: (\w+)/);u.value||(u.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),s&&(u.value.audioCodec=s[1])}if(l.includes("frame=")){const s=l.match(/frame=\s*(\d+)/);if(s&&r.value){const g=parseInt(s[1]),c=((o=w.value)==null?void 0:o.totalFrames)||111,h=Math.min(g/c*70,70);n.value=20+h,console.log(`[转换进度] ${g}/${c} 帧 (${n.value.toFixed(1)}%) - ${new Date().toLocaleTimeString()}`)}}if(r.value){if(l.includes("Stream mapping:"))console.log("[转换阶段] 开始流映射...");else if(l.includes("Output #0"))console.log("[转换阶段] 开始输出...");else if(l.includes("frame=")&&l.includes("fps=")){const s=l.match(/fps=\s*(\d+)/);s&&console.log(`[转换性能] 当前FPS: ${s[1]}`)}}}),p.on("progress",({progress:l,time:o})=>{console.log(`[VideoConverter] 转换进度: ${l*100}%, 时间: ${o}`),l>0&&(n.value=20+l*70)});try{i.value=!0,f("正在加载资源...");const l=setInterval(()=>{n.value<80&&(n.value+=5,f(`正在加载资源... ${n.value}%`))},200);await p.load({coreURL:await z(`${K}/ffmpeg-core.js`,"text/javascript"),wasmURL:await z(`${K}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await z(`${K}/ffmpeg-core.worker.js`,"text/javascript")}),clearInterval(l),n.value=100,f("资源加载完成！"),t.value=!0,i.value=!1,console.log("检查ffprobe可用性:",typeof p.ffprobe),console.log("FFmpeg对象:",p),await new Promise(o=>setTimeout(o,1e3)),f("请选择视频文件开始转换"),n.value=0}catch(l){console.error("FFmpeg加载失败:",l),f("资源加载失败，请刷新页面重试"),i.value=!1}});const re=async l=>{const o=l.target;o.files&&o.files[0]&&(v.value=o.files[0],b.value=null,x.value="",n.value=0,w.value=null,f(`已选择文件: ${v.value.name}`),await G())},ae=async l=>{var o;console.log(l),l.preventDefault(),(o=l.dataTransfer)!=null&&o.files&&l.dataTransfer.files[0]&&(v.value=l.dataTransfer.files[0],b.value=null,x.value="",n.value=0,w.value=null,f(`已选择文件: ${v.value.name}`),await G())},se=l=>{l.preventDefault()},G=async()=>{if(v.value){if(!t.value){f("资源尚未加载完成，无法读取视频信息");return}try{f("正在读取视频信息..."),u.value=null;const l=Q(v.value.name);await p.writeFile(`temp_input.${l}`,await le(v.value)),console.log("尝试使用exec获取视频信息...");try{if(await p.exec(["-i",`temp_input.${l}`]),u.value&&u.value.duration>0){const o=Math.round(u.value.duration*u.value.fps);w.value={duration:u.value.duration,fps:u.value.fps,totalFrames:o,resolution:u.value.resolution,bitrate:u.value.bitrate,format:l},f(`视频信息读取成功: ${u.value.resolution}, ${u.value.duration.toFixed(2)}秒, ${u.value.fps}fps`),console.log("解析到的视频信息:",u.value)}else throw new Error("无法解析视频信息")}catch(o){throw console.error("exec命令失败:",o),new Error("无法读取视频信息")}await p.deleteFile(`temp_input.${l}`)}catch(l){console.error("读取视频信息失败:",l),f("读取视频信息失败，无法继续转换"),w.value=null,v.value=null}}},ne=async()=>{if(!v.value||!p){alert("请先选择视频文件");return}const l=Q(v.value.name),o=L.value;console.log("=== 开始分离式转换 ==="),console.log("FFmpeg实例:",p),console.log("选择文件:",v.value.name,"大小:",(v.value.size/1024/1024).toFixed(2),"MB"),console.log("输出格式:",L.value),console.log("视频质量:",O.value),console.log("分辨率设置:",T.value),console.log("帧率设置:",B.value),r.value=!0,n.value=0,f("正在加载资源...");try{if(!t.value){f("资源尚未加载完成，请稍候...");return}f("开始转换..."),n.value=10,f("正在写入输入文件..."),console.log("开始写入输入文件...");const s=Date.now();await p.writeFile(`input.${l}`,await le(v.value));const g=Date.now()-s;console.log(`文件写入完成，耗时: ${g}ms`),n.value=20,await ie(l,o),f("正在读取输出文件...");try{const c=await p.readFile(`output.${o}`);if(!c||c.length===0)throw new Error("输出文件为空或无效");b.value=new Blob([c.buffer],{type:`video/${o}`}),x.value=URL.createObjectURL(b.value),n.value=100,f("转换完成！"),console.log("=== 转换成功完成 ==="),console.log("输出文件大小:",c.length,"字节"),await X(l,o)}catch(c){console.error("读取输出文件失败:",c);try{const h=await p.readFile(`video_only.${o}`);if(h&&h.length>0){console.log("发现有效的视频文件，尝试直接使用"),b.value=new Blob([h.buffer],{type:`video/${o}`}),x.value=URL.createObjectURL(b.value),n.value=100,f("转换完成！（仅视频）"),console.log("=== 转换成功完成（仅视频）==="),console.log("输出文件大小:",h.length,"字节"),await X(l,o);return}}catch(h){console.error("视频文件也不存在:",h)}throw new Error(`读取输出文件失败: ${c.message||c.toString()}`)}}catch(s){console.error("=== 转换失败 ==="),console.error("错误对象:",s),console.error("错误类型:",s.constructor.name),console.error("错误消息:",s.message),console.error("错误字符串:",s.toString()),console.error("错误堆栈:",s.stack);let g="转换失败，请检查文件格式或重试";const c=s.message||s.toString()||"";c.includes("超时")?g="转换超时，建议：1. 尝试更小的文件 2. 降低视频质量设置 3. 检查网络连接":c.includes("编码器")?g="编码器错误，建议：1. 尝试不同的输出格式 2. 检查输入文件是否损坏":c.includes("内存")?g="内存不足，建议：1. 关闭其他程序 2. 尝试更小的文件":c.includes("stream")||c.includes("map")?g="流映射错误，建议：1. 尝试选择'仅视频'选项 2. 检查音频流是否兼容 3. 尝试不同的输出格式":(c.includes("音频")||c.includes("audio"))&&(g="音频处理错误，建议：1. 选择'仅视频'选项 2. 尝试不同的音频处理模式 3. 检查音频编码器兼容性"),f(g),alert(g),await X(l,o)}finally{r.value=!1,i.value=!1,console.log("=== 转换流程结束 ===")}},ie=async(l,o)=>{console.log("=== 开始分离式转码 ===");let s=0,g=0,c=0;const h=new Promise((D,_)=>{setTimeout(()=>{_(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)});try{f("正在转码视频..."),n.value=30,console.log("步骤1: 转码视频（无音频）");const D=de(l,o);console.log("视频转码命令:",D.join(" "));const _=Date.now();await Promise.race([p.exec(D),h]),s=Date.now()-_,console.log(`视频转码完成，耗时: ${s}ms`),n.value=50,f("正在处理音频..."),n.value=60,console.log("步骤2: 提取并转码音频");const Y=ue(l);console.log("音频转码命令:",Y.join(" "));const fe=Date.now();await Promise.race([p.exec(Y),h]),g=Date.now()-fe,console.log(`音频转码完成，耗时: ${g}ms`),n.value=70,f("正在合并视频和音频..."),n.value=80,console.log("步骤3: 重新组合视频和音频");const q=ce(o);console.log("合并命令:",q.join(" "));const me=Date.now();await Promise.race([p.exec(q),h]),c=Date.now()-me,console.log(`合并完成，耗时: ${c}ms`),n.value=90,console.log("=== 分离式转码完成 ==="),console.log(`总耗时: ${s+g+c}ms`)}catch(D){throw console.error("分离式转码失败:",D),D}},de=(l,o)=>{const s=["-i",`input.${l}`];if(T.value!=="original"){const c={"4k":"3840:2160","1080p":"1920:1080","720p":"1280:720","480p":"854:480"};s.push("-vf",`scale=${c[T.value]}`)}B.value!=="original"&&s.push("-r",B.value);const g=O.value==="high"?18:O.value==="medium"?23:28;return s.push("-c:v","libx264","-preset","ultrafast","-crf",g.toString()),s.push("-an"),s.push("-y",`video_only.${o}`),s},ue=l=>{const o=["-i",`input.${l}`];return o.push("-vn"),o.push("-c:a","aac","-b:a","128k","-ar","48000"),o.push("-y","audio.aac"),o},ce=l=>["-i",`video_only.${l}`,"-i","audio.aac","-c:v","copy","-c:a","copy","-shortest","-y",`output.${l}`],X=async(l,o)=>{try{const s=[`input.${l}`,`video_only.${o}`,"audio.aac",`output.${o}`];for(const g of s)try{await p.deleteFile(g),console.log(`已删除临时文件: ${g}`)}catch(c){console.warn(`删除临时文件 ${g} 失败:`,c)}console.log("转换完成，已清理临时文件")}catch(s){console.warn("清理临时文件失败:",s)}},Q=l=>{var o;return((o=l.split(".").pop())==null?void 0:o.toLowerCase())||"mp4"},ve=()=>{if(b.value&&x.value){const l=document.createElement("a");l.href=x.value,l.download=`converted.${L.value}`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}};return(l,o)=>(A(),we(ke,{title:"视频格式转换 - 小左子的工具箱"},{default:xe(()=>[e("div",Ae,[e("div",Fe,[o[27]||(o[27]=e("div",{class:"lg:col-span-4 order-2 lg:order-1"},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 lg:sticky lg:top-8"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"功能说明"),e("div",{class:"grid grid-cols-2 gap-4"},[e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输入格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid, DivX)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输出格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])])]),e("div",{class:"mt-6"},[e("div",{class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," 智能分离转码 "),e("p",{class:"text-sm text-green-700 dark:text-green-300 mt-1"}," 系统采用分离式转码技术，分别处理视频和音频，有效避免转换卡住问题，提供更稳定的转换体验。 "),e("div",{class:"mt-2 text-xs text-green-600 dark:text-green-400"},[e("div",null,"• 自动检测音频流并选择最佳处理方式"),e("div",null,"• 视频和音频独立处理，避免相互影响"),e("div",null,"• 支持多种音频编码器，兼容性更好")])])])])])])],-1)),e("div",_e,[e("div",Se,[e("div",Ve,[e("div",Ue,[o[4]||(o[4]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Te,I(C.value),1)])]),e("div",Be,[o[9]||(o[9]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 选择视频文件 ",-1)),e("div",{onDrop:ae,onDragover:se,class:ye(["border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":v.value}])},[o[8]||(o[8]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",Pe,[o[6]||(o[6]=e("label",{for:"file-upload",class:"cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 选择文件 ",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"video/*",onChange:re},null,32),o[7]||(o[7]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 支持 MP4, AVI, MOV, MKV, WMV 等格式 ",-1)),v.value?(A(),S("p",Ne," 已选择: "+I(v.value.name),1)):N("",!0),w.value?(A(),S("div",je,[o[5]||(o[5]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," 视频信息 ",-1)),e("div",We,[e("div",null,"时长: "+I(w.value.duration.toFixed(2))+"秒",1),e("div",null,"帧率: "+I(w.value.fps.toFixed(2))+"fps",1),e("div",null,"总帧数: "+I(w.value.totalFrames),1),e("div",null,"分辨率: "+I(w.value.resolution),1),e("div",null,"比特率: "+I(w.value.bitrate),1),e("div",null,"格式: "+I(w.value.format),1)])])):N("",!0)])],34)]),e("div",He,[o[18]||(o[18]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 转换选项 ",-1)),e("div",Xe,[e("div",null,[o[11]||(o[11]=e("label",{for:"output-format",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 输出格式 ",-1)),j(e("select",{id:"output-format","onUpdate:modelValue":o[0]||(o[0]=s=>L.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[10]||(o[10]=[e("option",{value:"mp4"},"MP4",-1),e("option",{value:"avi"},"AVI",-1),e("option",{value:"mov"},"MOV",-1),e("option",{value:"mkv"},"MKV",-1),e("option",{value:"wmv"},"WMV",-1),e("option",{value:"flv"},"FLV",-1)]),512),[[W,L.value]])]),e("div",null,[o[13]||(o[13]=e("label",{for:"video-quality",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频质量 ",-1)),j(e("select",{id:"video-quality","onUpdate:modelValue":o[1]||(o[1]=s=>O.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[12]||(o[12]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"中等质量",-1),e("option",{value:"low"},"低质量",-1)]),512),[[W,O.value]])]),e("div",null,[o[15]||(o[15]=e("label",{for:"resolution",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 分辨率 ",-1)),j(e("select",{id:"resolution","onUpdate:modelValue":o[2]||(o[2]=s=>T.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[14]||(o[14]=[e("option",{value:"original"},"保持原分辨率",-1),e("option",{value:"4k"},"4K (3840x2160)",-1),e("option",{value:"1080p"},"1080p (1920x1080)",-1),e("option",{value:"720p"},"720p (1280x720)",-1),e("option",{value:"480p"},"480p (854x480)",-1)]),512),[[W,T.value]])]),e("div",null,[o[17]||(o[17]=e("label",{for:"framerate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 帧率 ",-1)),j(e("select",{id:"framerate","onUpdate:modelValue":o[3]||(o[3]=s=>B.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[16]||(o[16]=[e("option",{value:"original"},"保持原帧率",-1),e("option",{value:"60"},"60 FPS",-1),e("option",{value:"30"},"30 FPS",-1),e("option",{value:"25"},"25 FPS",-1),e("option",{value:"24"},"24 FPS",-1)]),512),[[W,B.value]])])])]),e("div",ze,[e("button",{onClick:ne,disabled:!v.value||!w.value||r.value||!t.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[r.value?(A(),S("svg",Qe,o[20]||(o[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(A(),S("svg",Ge,o[19]||(o[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))),ee(" "+I(r.value?"转换中...":"开始转换"),1)],8,Ke)]),i.value?(A(),S("div",Ye,[o[21]||(o[21]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 资源加载进度 ",-1)),e("div",qe,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:oe({width:n.value+"%"})},null,4)]),o[22]||(o[22]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 正在加载核心文件，请稍候... ",-1))])):N("",!0),r.value&&!i.value?(A(),S("div",Ze,[o[23]||(o[23]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"转换进度",-1)),e("div",Je,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:oe({width:n.value+"%"})},null,4)]),o[24]||(o[24]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 正在转换中，请稍候... ",-1))])):N("",!0),b.value&&x.value?(A(),S("div",eo,[e("div",{class:"flex items-center justify-between"},[o[26]||(o[26]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-green-800 dark:text-green-200"},"转换完成！")],-1)),e("button",{onClick:ve,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},o[25]||(o[25]=[e("svg",{class:"inline-block h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),ee(" 下载文件 ",-1)]))])])):N("",!0)])])])])]),_:1}))}});export{ro as default};
