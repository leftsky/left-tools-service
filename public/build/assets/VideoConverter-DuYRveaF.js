var fe=Object.defineProperty;var Y=r=>{throw TypeError(r)};var be=(r,t,l)=>t in r?fe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[t]=l;var k=(r,t,l)=>be(r,typeof t!="symbol"?t+"":t,l),q=(r,t,l)=>t.has(r)||Y("Cannot "+l);var d=(r,t,l)=>(q(r,t,"read from private field"),l?l.call(r):t.get(r)),V=(r,t,l)=>t.has(r)?Y("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,l),P=(r,t,l,a)=>(q(r,t,"write to private field"),a?a.call(r,l):t.set(r,l),l);import{d as ge,r as w,l as he,f as pe,o as x,w as xe,b as e,a as y,g as C,t as E,n as we,i as U,F as B,m as N,u as W,p as $,j as Z,q as J}from"./app-BQRFa3BC.js";import{_ as ye}from"./Layout.vue_vue_type_script_setup_true_lang-CMGgeTgJ.js";var c;(function(r){r.LOAD="LOAD",r.EXEC="EXEC",r.FFPROBE="FFPROBE",r.WRITE_FILE="WRITE_FILE",r.READ_FILE="READ_FILE",r.DELETE_FILE="DELETE_FILE",r.RENAME="RENAME",r.CREATE_DIR="CREATE_DIR",r.LIST_DIR="LIST_DIR",r.DELETE_DIR="DELETE_DIR",r.ERROR="ERROR",r.DOWNLOAD="DOWNLOAD",r.PROGRESS="PROGRESS",r.LOG="LOG",r.MOUNT="MOUNT",r.UNMOUNT="UNMOUNT"})(c||(c={}));const Ee=(()=>{let r=0;return()=>r++})(),ke=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Me=new Error("called FFmpeg.terminate()");var F,I,O,L,D,G,M;class Fe{constructor(){V(this,F,null);V(this,I,{});V(this,O,{});V(this,L,[]);V(this,D,[]);k(this,"loaded",!1);V(this,G,()=>{d(this,F)&&(d(this,F).onmessage=({data:{id:t,type:l,data:a}})=>{switch(l){case c.LOAD:this.loaded=!0,d(this,I)[t](a);break;case c.MOUNT:case c.UNMOUNT:case c.EXEC:case c.FFPROBE:case c.WRITE_FILE:case c.READ_FILE:case c.DELETE_FILE:case c.RENAME:case c.CREATE_DIR:case c.LIST_DIR:case c.DELETE_DIR:d(this,I)[t](a);break;case c.LOG:d(this,L).forEach(i=>i(a));break;case c.PROGRESS:d(this,D).forEach(i=>i(a));break;case c.ERROR:d(this,O)[t](a);break}delete d(this,I)[t],delete d(this,O)[t]})});V(this,M,({type:t,data:l},a=[],i)=>d(this,F)?new Promise((s,m)=>{const b=Ee();d(this,F)&&d(this,F).postMessage({id:b,type:t,data:l},a),d(this,I)[b]=s,d(this,O)[b]=m,i==null||i.addEventListener("abort",()=>{m(new DOMException(`Message # ${b} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(ke));k(this,"load",({classWorkerURL:t,...l}={},{signal:a}={})=>(d(this,F)||(P(this,F,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/build/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),d(this,G).call(this)),d(this,M).call(this,{type:c.LOAD,data:l},void 0,a)));k(this,"exec",(t,l=-1,{signal:a}={})=>d(this,M).call(this,{type:c.EXEC,data:{args:t,timeout:l}},void 0,a));k(this,"ffprobe",(t,l=-1,{signal:a}={})=>d(this,M).call(this,{type:c.FFPROBE,data:{args:t,timeout:l}},void 0,a));k(this,"terminate",()=>{const t=Object.keys(d(this,O));for(const l of t)d(this,O)[l](Me),delete d(this,O)[l],delete d(this,I)[l];d(this,F)&&(d(this,F).terminate(),P(this,F,null),this.loaded=!1)});k(this,"writeFile",(t,l,{signal:a}={})=>{const i=[];return l instanceof Uint8Array&&i.push(l.buffer),d(this,M).call(this,{type:c.WRITE_FILE,data:{path:t,data:l}},i,a)});k(this,"mount",(t,l,a)=>{const i=[];return d(this,M).call(this,{type:c.MOUNT,data:{fsType:t,options:l,mountPoint:a}},i)});k(this,"unmount",t=>{const l=[];return d(this,M).call(this,{type:c.UNMOUNT,data:{mountPoint:t}},l)});k(this,"readFile",(t,l="binary",{signal:a}={})=>d(this,M).call(this,{type:c.READ_FILE,data:{path:t,encoding:l}},void 0,a));k(this,"deleteFile",(t,{signal:l}={})=>d(this,M).call(this,{type:c.DELETE_FILE,data:{path:t}},void 0,l));k(this,"rename",(t,l,{signal:a}={})=>d(this,M).call(this,{type:c.RENAME,data:{oldPath:t,newPath:l}},void 0,a));k(this,"createDir",(t,{signal:l}={})=>d(this,M).call(this,{type:c.CREATE_DIR,data:{path:t}},void 0,l));k(this,"listDir",(t,{signal:l}={})=>d(this,M).call(this,{type:c.LIST_DIR,data:{path:t}},void 0,l));k(this,"deleteDir",(t,{signal:l}={})=>d(this,M).call(this,{type:c.DELETE_DIR,data:{path:t}},void 0,l))}on(t,l){t==="log"?d(this,L).push(l):t==="progress"&&d(this,D).push(l)}off(t,l){t==="log"?P(this,L,d(this,L).filter(a=>a!==l)):t==="progress"&&P(this,D,d(this,D).filter(a=>a!==l))}}F=new WeakMap,I=new WeakMap,O=new WeakMap,L=new WeakMap,D=new WeakMap,G=new WeakMap,M=new WeakMap;var ee;(function(r){r.MEMFS="MEMFS",r.NODEFS="NODEFS",r.NODERAWFS="NODERAWFS",r.IDBFS="IDBFS",r.WORKERFS="WORKERFS",r.PROXYFS="PROXYFS"})(ee||(ee={}));const Re=new Error("failed to get response body reader"),Oe=new Error("failed to complete download"),Ve="Content-Length",Ie=r=>new Promise((t,l)=>{const a=new FileReader;a.onload=()=>{const{result:i}=a;i instanceof ArrayBuffer?t(new Uint8Array(i)):t(new Uint8Array)},a.onerror=i=>{var s,m;l(Error(`File could not be read! Code=${((m=(s=i==null?void 0:i.target)==null?void 0:s.error)==null?void 0:m.code)||-1}`))},a.readAsArrayBuffer(r)}),_e=async r=>{let t;if(typeof r=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(r)?t=atob(r.split(",")[1]).split("").map(l=>l.charCodeAt(0)):t=await(await fetch(r)).arrayBuffer();else if(r instanceof URL)t=await(await fetch(r)).arrayBuffer();else if(r instanceof File||r instanceof Blob)t=await Ie(r);else return new Uint8Array;return new Uint8Array(t)},Le=async(r,t)=>{var i;const l=await fetch(r);let a;try{const s=parseInt(l.headers.get(Ve)||"-1"),m=(i=l.body)==null?void 0:i.getReader();if(!m)throw Re;const b=[];let v=0;for(;;){const{done:g,value:p}=await m.read(),f=p?p.length:0;if(g){if(s!=-1&&s!==v)throw Oe;t&&t({url:r,total:s,received:v,delta:f,done:g});break}b.push(p),v+=f,t&&t({url:r,total:s,received:v,delta:f,done:g})}const h=new Uint8Array(v);let R=0;for(const g of b)h.set(g,R),R+=g.length;a=h.buffer}catch(s){console.log("failed to send download progress event: ",s),a=await l.arrayBuffer()}return a},X=async(r,t,l=!1,a)=>{const i=l?await Le(r,a):await(await fetch(r)).arrayBuffer(),s=new Blob([i],{type:t});return URL.createObjectURL(s)},z="https://cdn.jsdelivr.net/npm/@ffmpeg/core-mt@0.12.10/dist/esm",ae=[{value:"mp4",label:"MP4 (H.264/H.265)"},{value:"avi",label:"AVI (Xvid)"},{value:"mov",label:"MOV (QuickTime)"},{value:"mkv",label:"MKV (Matroska)"},{value:"wmv",label:"WMV (Windows Media)"},{value:"flv",label:"FLV (Flash Video)"},{value:"webm",label:"WebM (VP8/VP9/AV1)"},{value:"m4v",label:"M4V (iTunes)"},{value:"3gp",label:"3GP (Mobile)"},{value:"ogv",label:"OGV (Ogg Video)"},{value:"ts",label:"TS (Transport Stream)"},{value:"mts",label:"MTS (AVCHD)"},{value:"asf",label:"ASF (Advanced Systems)"},{value:"vob",label:"VOB (DVD Video)"},{value:"mpg",label:"MPG (MPEG-1/2)"},{value:"mpeg",label:"MPEG (MPEG-1/2)"},{value:"divx",label:"DIVX (DivX)"},{value:"xvid",label:"XVID (Xvid)"},{value:"swf",label:"SWF (Flash)"},{value:"f4v",label:"F4V (Flash Video)"},{value:"m2ts",label:"M2TS (Blu-ray)"},{value:"mxf",label:"MXF (Material Exchange)"},{value:"gif",label:"GIF (Animated)"},{value:"apng",label:"APNG (Animated PNG)"},{value:"webp",label:"WebP (Web Picture)"},{value:"avif",label:"AVIF (AV1 Image)"},{value:"heic",label:"HEIC (HEIF)"},{value:"heif",label:"HEIF (High Efficiency)"}],oe=[{value:"high",label:"高质量"},{value:"medium",label:"中等质量"},{value:"low",label:"低质量"}],re=[{value:"original",label:"保持原分辨率"},{value:"4k",label:"4K (3840x2160)"},{value:"1080p",label:"1080p (1920x1080)"},{value:"720p",label:"720p (1280x720)"},{value:"480p",label:"480p (854x480)"}],ie=[{value:"original",label:"保持原帧率"},{value:"60",label:"60 FPS"},{value:"30",label:"30 FPS"},{value:"25",label:"25 FPS"},{value:"24",label:"24 FPS"}],De={"4k":"3840:2160","1080p":"1920:1080","720p":"1280:720","480p":"854:480"},Ae={high:18,medium:23,low:28},Se=["video/mp4","video/avi","video/quicktime","video/x-matroska","video/x-ms-wmv","video/x-flv","video/webm","video/x-msvideo","video/3gpp","video/ogg","video/mpeg","video/x-m4v"],Te=["mp4","avi","mov","mkv","wmv","flv","webm","m4v","3gp","ogv","ts","mts","rm","rmvb","asf","vob","mpg","mpeg","divx","xvid","swf","f4v","m2ts","mxf","gif","apng","webp","avif","heic","heif"],te=100*1024*1024;class Ce{constructor(){this.ffmpeg=new Fe,this.isLoaded=!1,this.isLoading=!1}async init(t){try{return this.isLoading=!0,t&&t("正在加载资源..."),await this.ffmpeg.load({coreURL:await X(`${z}/ffmpeg-core.js`,"text/javascript"),wasmURL:await X(`${z}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await X(`${z}/ffmpeg-core.worker.js`,"text/javascript")}),this.isLoaded=!0,this.isLoading=!1,t&&t("资源加载完成！"),!0}catch(l){throw console.error("FFmpeg加载失败:",l),this.isLoading=!1,new Error("资源加载失败，请刷新页面重试")}}getSupportedConfigs(){return{outputFormats:ae,videoQualityOptions:oe,resolutionOptions:re,framerateOptions:ie,supportedFileTypes:Se,supportedExtensions:Te,maxFileSize:te}}async convert(t,l,a){if(!this.isLoaded)throw new Error("FFmpeg尚未初始化，请先调用init()方法");let i,s,m;if(typeof t=="string")try{a&&a("正在获取在线文件...",0);const v=await fetch(t);if(!v.ok)throw new Error(`无法获取文件: ${v.statusText}`);const h=await v.blob();i=new File([h],"input_video",{type:h.type}),s=this.getFileExtensionFromUrl(t)||"mp4",m=`input_video.${s}`,a&&a("在线文件获取完成",5)}catch(v){throw new Error(`获取在线文件失败: ${v instanceof Error?v.message:"未知错误"}`)}else i=t,s=this.getFileExtension(t.name),m=t.name;if(i.size>te)throw new Error("文件过大，请选择小于100MB的文件");const b=l.outputFormat||"mp4";console.log("开始转换:",m,"→",b);try{a&&a("正在写入输入文件...",5),await this.ffmpeg.writeFile(`input.${s}`,await _e(i)),a&&a("输入文件写入完成，开始转码...",10),await this.performSeparateTranscode(s,b,l,a),a&&a("正在读取输出文件...",90);const v=await this.ffmpeg.readFile(`output.${b}`);if(!v||v.length===0)throw new Error("输出文件为空或无效");const h=v,R=h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength),g=new Blob([R],{type:`video/${b}`});a&&a("转换完成！",100),await this.cleanupFiles(s,b);const f=`${m.substring(0,m.lastIndexOf("."))}.${b}`;return{blob:g,filename:f,size:h.length}}catch(v){throw console.error("转换失败:",v),await this.cleanupFiles(s,b),v}}getFileExtension(t){var l;return((l=t.split(".").pop())==null?void 0:l.toLowerCase())||"mp4"}getFileExtensionFromUrl(t){try{const a=new URL(t).pathname;return this.getFileExtension(a)}catch{return"mp4"}}async performSeparateTranscode(t,l,a,i){let s=0,m=0,b=0;const v=new Promise((h,R)=>{setTimeout(()=>{R(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)});try{if(this.ffmpeg.off("log"),i){const _=({message:A})=>{if(A.includes("frame=")){const S=A.match(/frame=\s*(\d+)/);if(S){const T=parseInt(S[1]),j=Math.min(10+T/1e3*30,40);i(`正在转码视频... (帧: ${T})`,parseFloat(j.toFixed(2)))}}};this.ffmpeg.on("log",_)}i&&i("开始转码视频...",10);const h=this.buildVideoCommand(t,l,a),R=Date.now();await Promise.race([this.ffmpeg.exec(h),v]),s=Date.now()-R,i&&i("视频转码完成，开始处理音频...",40);const g=this.buildAudioCommand(t,l),p=Date.now();await Promise.race([this.ffmpeg.exec(g),v]),m=Date.now()-p,i&&i("音频处理完成，开始合并...",70);const f=this.buildMergeCommand(l),H=Date.now();await Promise.race([this.ffmpeg.exec(f),v]),b=Date.now()-H,i&&i("合并完成",90),console.log("转码完成，总耗时:",s+m+b,"ms"),i&&this.ffmpeg.off("log")}catch(h){throw console.error("转码失败:",h),i&&this.ffmpeg.off("log"),h}}buildVideoCommand(t,l,a){const i=["-i",`input.${t}`];if(a.resolution&&a.resolution!=="original"){const m=De[a.resolution];m&&i.push("-vf",`scale=${m}`)}a.framerate&&a.framerate!=="original"&&i.push("-r",a.framerate);const s=Ae[a.videoQuality||"medium"]||23;return i.push("-c:v","libx264","-preset","ultrafast","-crf",s.toString()),i.push("-an"),i.push("-y",`video_only.${l}`),i}buildAudioCommand(t,l){const a=["-i",`input.${t}`];return a.push("-vn"),l==="avi"?(a.push("-c:a","mp3","-b:a","128k","-ar","44100"),a.push("-y","audio.mp3")):(a.push("-c:a","aac","-b:a","128k","-ar","48000"),a.push("-y","audio.aac")),a}buildMergeCommand(t){const l=t==="avi"?"audio.mp3":"audio.aac";return["-i",`video_only.${t}`,"-i",l,"-c:v","copy","-c:a","copy","-shortest","-y",`output.${t}`]}async cleanupFiles(t,l){try{const a=l==="avi"?"audio.mp3":"audio.aac",i=[`input.${t}`,`video_only.${l}`,a,`output.${l}`];for(const s of i)try{await this.ffmpeg.deleteFile(s)}catch(m){console.warn("删除临时文件失败:",m)}}catch(a){console.warn("清理临时文件失败:",a)}}isReady(){return this.isLoaded&&!this.isLoading}getLoadingState(){return{isLoaded:this.isLoaded,isLoading:this.isLoading}}}const le=new Ce,Pe={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},Ue={class:"grid grid-cols-1 lg:grid-cols-10 gap-8"},Be={class:"lg:col-span-6 order-1 lg:order-2"},Ne={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},We={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},$e={class:"flex items-center"},Ge={class:"text-blue-800 dark:text-blue-200"},He={class:"mb-8"},je={class:"mt-4"},Xe={key:0,class:"mt-2 text-sm text-blue-600 dark:text-blue-400"},ze={key:1,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},Ke={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400"},Qe={class:"mb-8"},Ye={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},qe=["value"],Ze=["value"],Je=["value"],et=["value"],tt={class:"text-center"},lt=["disabled"],at={key:0,class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ot={key:1,class:"inline-block h-5 w-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rt={key:0,class:"mt-8"},it={class:"flex items-center justify-between mb-2"},st={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},nt={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},dt={key:1,class:"mt-8"},ut={class:"flex items-center justify-between mb-2"},ct={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},mt={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},vt={key:2,class:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},ft={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},bt={class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},gt={class:"mt-2"},ht={class:"text-sm text-gray-500 dark:text-gray-400 whitespace-pre-line"},pt={class:"mt-4 flex justify-end"},Et=ge({__name:"VideoConverter",setup(r){const t=w(!1),l=w(!1),a=w(!1),i=w(0),s=w(null),m=w(null),b=w(""),v=w("请选择视频文件开始转换"),h=w(!1),R=w(""),g=w(null),p=w({duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),f=n=>{v.value=n,console.log(`[VideoConverter] ${n}`)},H=n=>{R.value=n,h.value=!0},_=w("mp4"),A=w("high"),S=w("original"),T=w("original");he(async()=>{try{a.value=!0,f("正在加载资源...");const n=setInterval(()=>{i.value<80&&(i.value+=5,f(`正在加载资源... ${i.value}%`))},200);await le.init(o=>{f(o)}),clearInterval(n),i.value=100,f("资源加载完成！"),t.value=!0,a.value=!1,await new Promise(o=>setTimeout(o,1e3)),f("请选择视频文件开始转换"),i.value=0}catch(n){console.error("FFmpeg加载失败:",n),f("资源加载失败，请刷新页面重试"),a.value=!1}});const j=async n=>{const o=n.target;o.files&&o.files[0]&&(s.value=o.files[0],m.value=null,b.value="",i.value=0,g.value=null,f(`已选择文件: ${s.value.name}`),await K())},se=async n=>{var o;console.log(n),n.preventDefault(),(o=n.dataTransfer)!=null&&o.files&&n.dataTransfer.files[0]&&(s.value=n.dataTransfer.files[0],m.value=null,b.value="",i.value=0,g.value=null,f(`已选择文件: ${s.value.name}`),await K())},ne=n=>{n.preventDefault()},K=async()=>{if(s.value){if(!t.value){f("资源尚未加载完成，无法读取视频信息");return}try{f("正在读取视频信息..."),p.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"};const n=ue(s.value.name);await ffmpeg.writeFile(`temp_input.${n}`,await fetchFile(s.value)),console.log("尝试使用exec获取视频信息...");try{if(await ffmpeg.exec(["-i",`temp_input.${n}`]),p.value&&p.value.duration>0){const o=Math.round(p.value.duration*p.value.fps);g.value={duration:p.value.duration,fps:p.value.fps,totalFrames:o,resolution:p.value.resolution,bitrate:p.value.bitrate,format:n},f(`视频信息读取成功: ${p.value.resolution}, ${p.value.duration.toFixed(2)}秒, ${p.value.fps}fps`),console.log("解析到的视频信息:",p.value)}else throw new Error("无法解析视频信息")}catch(o){throw console.error("exec命令失败:",o),new Error("无法读取视频信息")}await ffmpeg.deleteFile(`temp_input.${n}`)}catch(n){console.error("读取视频信息失败:",n),f("读取视频信息失败，无法继续转换"),g.value=null,s.value=null}}},de=async()=>{if(!s.value){alert("请先选择视频文件");return}const n=100*1024*1024;if(s.value.size>n){alert("文件过大，请选择小于100MB的文件");return}console.log("开始转换:",s.value.name,"→",_.value),l.value=!0,i.value=0,f("正在加载资源...");try{if(!t.value){f("资源尚未加载完成，请稍候...");return}f("开始转换..."),i.value=0;const o={outputFormat:_.value,videoQuality:A.value,resolution:S.value,framerate:T.value},u=await le.convert(s.value,o,(ve,Q)=>{f(ve),Q!==void 0&&(i.value=Q)});m.value=u.blob,b.value=URL.createObjectURL(u.blob),i.value=100,f("转换完成！")}catch(o){console.error("转换失败:",o),f("转换失败，请检查文件格式或重试"),H(o instanceof Error?o.message:"转换失败，请检查文件格式或重试")}finally{l.value=!1,a.value=!1}},ue=n=>{var o;return((o=n.split(".").pop())==null?void 0:o.toLowerCase())||"mp4"},ce=async()=>{try{const n=await fetch("/api/tools/record-usage-public",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({tool_name:"视频转码"})});n.ok?console.log("工具使用记录已保存"):console.warn("工具使用记录失败:",n.status)}catch(n){console.warn("记录工具使用时出错:",n)}},me=async()=>{if(m.value&&b.value&&s.value){const n=document.createElement("a");n.href=b.value;const o=s.value.name,u=o.substring(0,o.lastIndexOf("."));n.download=`${u}.${_.value}`,document.body.appendChild(n),n.click(),document.body.removeChild(n),await ce()}};return(n,o)=>(x(),pe(ye,{title:"视频格式转换工具 - 在线MP4、AVI、MOV、MKV转换器 | 小左子的工具箱"},{default:xe(()=>[e("div",Pe,[e("div",Ue,[o[24]||(o[24]=e("div",{class:"lg:col-span-4 order-2 lg:order-1"},[e("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 lg:sticky lg:top-8"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 在线视频格式转换工具 "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," 专业的在线视频格式转换器，支持MP4、AVI、MOV、MKV等多种格式转换。无需下载软件，免费在线使用，快速高效。 "),e("div",{class:"grid grid-cols-2 gap-4"},[e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输入格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid, DivX)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)"),e("li",null,"• WebM (VP8, VP9, AV1)"),e("li",null,"• M4V (iTunes)"),e("li",null,"• 3GP (Mobile)"),e("li",null,"• OGV (Ogg Video)"),e("li",null,"• TS/MTS (Transport Stream)"),e("li",null,"• RM/RMVB (RealMedia)"),e("li",null,"• ASF (Advanced Systems)"),e("li",null,"• VOB (DVD Video)"),e("li",null,"• MPG/MPEG (MPEG-1/2)"),e("li",null,"• SWF/F4V (Flash)"),e("li",null,"• M2TS (Blu-ray)"),e("li",null,"• MXF (Material Exchange)"),e("li",null,"• GIF/APNG (Animated)"),e("li",null,"• WebP/AVIF (Web Images)"),e("li",null,"• HEIC/HEIF (High Efficiency)"),e("li",null,"• 以及更多图片格式...")])]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输出格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1 text-sm"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)"),e("li",null,"• WebM (VP8, VP9, AV1)"),e("li",null,"• M4V (iTunes)"),e("li",null,"• 3GP (Mobile)"),e("li",null,"• OGV (Ogg Video)"),e("li",null,"• TS/MTS (Transport Stream)"),e("li",null,"• ASF (Advanced Systems)"),e("li",null,"• VOB (DVD Video)"),e("li",null,"• MPG/MPEG (MPEG-1/2)"),e("li",null,"• SWF/F4V (Flash)"),e("li",null,"• M2TS (Blu-ray)"),e("li",null,"• MXF (Material Exchange)"),e("li",null,"• GIF/APNG (Animated)"),e("li",null,"• WebP/AVIF (Web Images)"),e("li",null,"• HEIC/HEIF (High Efficiency)"),e("li",null,"• 以及更多图片格式...")])])]),e("div",{class:"mt-6 space-y-4"},[e("div",{class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," 智能分离转码 "),e("p",{class:"text-sm text-green-700 dark:text-green-300 mt-1"}," 系统采用分离式转码技术，分别处理视频和音频，有效避免转换卡住问题，提供更稳定的转换体验。 "),e("div",{class:"mt-2 text-xs text-green-600 dark:text-green-400"},[e("div",null,"• 自动检测音频流并选择最佳处理方式"),e("div",null,"• 视频和音频独立处理，避免相互影响"),e("div",null,"• 支持多种音频编码器，兼容性更好")])])])]),e("div",{class:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-blue-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-blue-800 dark:text-blue-200"}," 强大的格式转换支持 "),e("p",{class:"text-sm text-blue-700 dark:text-blue-300 mt-1"}," 基于融茂软件核心，支持超过50种视频格式和编码器，包括最新的AV1、H.265等先进编码技术。 "),e("div",{class:"mt-2 text-xs text-blue-600 dark:text-blue-400"},[e("div",null,"• 支持H.264、H.265、VP8、VP9、AV1等现代编码"),e("div",null,"• 兼容MPEG-1/2、Xvid、DivX等传统格式"),e("div",null,"• 支持GIF、WebP、AVIF等图片和动画格式"),e("div",null,"• 专业级MXF、M2TS等广播级格式支持")])])])])])])],-1)),e("div",Be,[e("div",Ne,[e("div",We,[e("div",$e,[o[5]||(o[5]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Ge,E(v.value),1)])]),e("div",He,[o[10]||(o[10]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 选择视频文件 ",-1)),e("div",{onDrop:se,onDragover:ne,class:we(["border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":s.value}])},[o[9]||(o[9]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",je,[o[7]||(o[7]=e("label",{for:"file-upload",class:"cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 选择文件 ",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"video/*",onChange:j},null,32),o[8]||(o[8]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 支持 MP4, AVI, MOV, MKV, WMV, WebM, M4V, 3GP, OGV, TS, MTS, RM, RMVB, ASF, VOB, MPG, MPEG, DIVX, XVID, SWF, F4V, M2TS, MXF, GIF, APNG, WebP, AVIF, HEIC, HEIF 等格式 ",-1)),s.value?(x(),y("p",Xe," 已选择: "+E(s.value.name),1)):C("",!0),g.value?(x(),y("div",ze,[o[6]||(o[6]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," 视频信息 ",-1)),e("div",Ke,[e("div",null,"时长: "+E(g.value.duration.toFixed(2))+"秒",1),e("div",null,"帧率: "+E(g.value.fps.toFixed(2))+"fps",1),e("div",null,"总帧数: "+E(g.value.totalFrames),1),e("div",null,"分辨率: "+E(g.value.resolution),1),e("div",null,"比特率: "+E(g.value.bitrate),1),e("div",null,"格式: "+E(g.value.format),1)])])):C("",!0)])],34)]),e("div",Qe,[o[15]||(o[15]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 转换选项 ",-1)),e("div",Ye,[e("div",null,[o[11]||(o[11]=e("label",{for:"output-format",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 输出格式 ",-1)),U(e("select",{id:"output-format","onUpdate:modelValue":o[0]||(o[0]=u=>_.value=u),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(x(!0),y(B,null,N(W(ae),u=>(x(),y("option",{key:u.value,value:u.value},E(u.label),9,qe))),128))],512),[[$,_.value]])]),e("div",null,[o[12]||(o[12]=e("label",{for:"video-quality",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频质量 ",-1)),U(e("select",{id:"video-quality","onUpdate:modelValue":o[1]||(o[1]=u=>A.value=u),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(x(!0),y(B,null,N(W(oe),u=>(x(),y("option",{key:u.value,value:u.value},E(u.label),9,Ze))),128))],512),[[$,A.value]])]),e("div",null,[o[13]||(o[13]=e("label",{for:"resolution",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 分辨率 ",-1)),U(e("select",{id:"resolution","onUpdate:modelValue":o[2]||(o[2]=u=>S.value=u),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(x(!0),y(B,null,N(W(re),u=>(x(),y("option",{key:u.value,value:u.value},E(u.label),9,Je))),128))],512),[[$,S.value]])]),e("div",null,[o[14]||(o[14]=e("label",{for:"framerate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 帧率 ",-1)),U(e("select",{id:"framerate","onUpdate:modelValue":o[3]||(o[3]=u=>T.value=u),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},[(x(!0),y(B,null,N(W(ie),u=>(x(),y("option",{key:u.value,value:u.value},E(u.label),9,et))),128))],512),[[$,T.value]])])])]),e("div",tt,[e("button",{onClick:de,disabled:!s.value||!g.value||l.value||!t.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[l.value?(x(),y("svg",ot,o[17]||(o[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(x(),y("svg",at,o[16]||(o[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))),Z(" "+E(l.value?"转换中...":"开始转换"),1)],8,lt)]),a.value?(x(),y("div",rt,[o[19]||(o[19]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 资源加载进度 ",-1)),e("div",it,[o[18]||(o[18]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"正在加载核心文件，请稍候...",-1)),e("span",st,E(Math.round(i.value))+"%",1)]),e("div",nt,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:J({width:i.value+"%"})},null,4)])])):C("",!0),l.value&&!a.value?(x(),y("div",dt,[o[21]||(o[21]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," 转换进度 ",-1)),e("div",ut,[o[20]||(o[20]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"正在转换中，请稍候...",-1)),e("span",ct,E(Math.round(i.value))+"%",1)]),e("div",mt,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:J({width:i.value+"%"})},null,4)])])):C("",!0),m.value&&b.value?(x(),y("div",vt,[e("div",{class:"flex items-center justify-between"},[o[23]||(o[23]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-green-800 dark:text-green-200"},"转换完成！")],-1)),e("button",{onClick:me,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},o[22]||(o[22]=[e("svg",{class:"inline-block h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),Z(" 下载文件 ",-1)]))])])):C("",!0)])])])]),h.value?(x(),y("div",ft,[e("div",bt,[o[25]||(o[25]=e("div",{class:"flex items-center mb-4"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])]),e("div",{class:"ml-3"},[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"转换失败")])],-1)),e("div",gt,[e("p",ht,E(R.value),1)]),e("div",pt,[e("button",{onClick:o[4]||(o[4]=u=>h.value=!1),class:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 确定 ")])])])):C("",!0)]),_:1}))}});export{Et as default};
