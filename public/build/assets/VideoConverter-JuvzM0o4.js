var pe=Object.defineProperty;var te=r=>{throw TypeError(r)};var be=(r,t,a)=>t in r?pe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;var y=(r,t,a)=>be(r,typeof t!="symbol"?t+"":t,a),ae=(r,t,a)=>t.has(r)||te("Cannot "+a);var u=(r,t,a)=>(ae(r,t,"read from private field"),a?a.call(r):t.get(r)),A=(r,t,a)=>t.has(r)?te("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,a),j=(r,t,a,i)=>(ae(r,t,"write to private field"),i?i.call(r,a):t.set(r,a),a);import{d as he,r as E,f as we,g as xe,o as _,w as ye,b as e,a as V,i as W,t as C,n as ke,j as z,v as X,k as le,l as re}from"./app-CSMma57N.js";import{_ as Ee}from"./Layout.vue_vue_type_script_setup_true_lang-Drr2ucb8.js";var f;(function(r){r.LOAD="LOAD",r.EXEC="EXEC",r.FFPROBE="FFPROBE",r.WRITE_FILE="WRITE_FILE",r.READ_FILE="READ_FILE",r.DELETE_FILE="DELETE_FILE",r.RENAME="RENAME",r.CREATE_DIR="CREATE_DIR",r.LIST_DIR="LIST_DIR",r.DELETE_DIR="DELETE_DIR",r.ERROR="ERROR",r.DOWNLOAD="DOWNLOAD",r.PROGRESS="PROGRESS",r.LOG="LOG",r.MOUNT="MOUNT",r.UNMOUNT="UNMOUNT"})(f||(f={}));const Re=(()=>{let r=0;return()=>r++})(),De=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Fe=new Error("called FFmpeg.terminate()");var R,S,I,T,U,K,k;class Le{constructor(){A(this,R,null);A(this,S,{});A(this,I,{});A(this,T,[]);A(this,U,[]);y(this,"loaded",!1);A(this,K,()=>{u(this,R)&&(u(this,R).onmessage=({data:{id:t,type:a,data:i}})=>{switch(a){case f.LOAD:this.loaded=!0,u(this,S)[t](i);break;case f.MOUNT:case f.UNMOUNT:case f.EXEC:case f.FFPROBE:case f.WRITE_FILE:case f.READ_FILE:case f.DELETE_FILE:case f.RENAME:case f.CREATE_DIR:case f.LIST_DIR:case f.DELETE_DIR:u(this,S)[t](i);break;case f.LOG:u(this,T).forEach(n=>n(i));break;case f.PROGRESS:u(this,U).forEach(n=>n(i));break;case f.ERROR:u(this,I)[t](i);break}delete u(this,S)[t],delete u(this,I)[t]})});A(this,k,({type:t,data:a},i=[],n)=>u(this,R)?new Promise((v,b)=>{const x=Re();u(this,R)&&u(this,R).postMessage({id:x,type:t,data:a},i),u(this,S)[x]=v,u(this,I)[x]=b,n==null||n.addEventListener("abort",()=>{b(new DOMException(`Message # ${x} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(De));y(this,"load",({classWorkerURL:t,...a}={},{signal:i}={})=>(u(this,R)||(j(this,R,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/build/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),u(this,K).call(this)),u(this,k).call(this,{type:f.LOAD,data:a},void 0,i)));y(this,"exec",(t,a=-1,{signal:i}={})=>u(this,k).call(this,{type:f.EXEC,data:{args:t,timeout:a}},void 0,i));y(this,"ffprobe",(t,a=-1,{signal:i}={})=>u(this,k).call(this,{type:f.FFPROBE,data:{args:t,timeout:a}},void 0,i));y(this,"terminate",()=>{const t=Object.keys(u(this,I));for(const a of t)u(this,I)[a](Fe),delete u(this,I)[a],delete u(this,S)[a];u(this,R)&&(u(this,R).terminate(),j(this,R,null),this.loaded=!1)});y(this,"writeFile",(t,a,{signal:i}={})=>{const n=[];return a instanceof Uint8Array&&n.push(a.buffer),u(this,k).call(this,{type:f.WRITE_FILE,data:{path:t,data:a}},n,i)});y(this,"mount",(t,a,i)=>{const n=[];return u(this,k).call(this,{type:f.MOUNT,data:{fsType:t,options:a,mountPoint:i}},n)});y(this,"unmount",t=>{const a=[];return u(this,k).call(this,{type:f.UNMOUNT,data:{mountPoint:t}},a)});y(this,"readFile",(t,a="binary",{signal:i}={})=>u(this,k).call(this,{type:f.READ_FILE,data:{path:t,encoding:a}},void 0,i));y(this,"deleteFile",(t,{signal:a}={})=>u(this,k).call(this,{type:f.DELETE_FILE,data:{path:t}},void 0,a));y(this,"rename",(t,a,{signal:i}={})=>u(this,k).call(this,{type:f.RENAME,data:{oldPath:t,newPath:a}},void 0,i));y(this,"createDir",(t,{signal:a}={})=>u(this,k).call(this,{type:f.CREATE_DIR,data:{path:t}},void 0,a));y(this,"listDir",(t,{signal:a}={})=>u(this,k).call(this,{type:f.LIST_DIR,data:{path:t}},void 0,a));y(this,"deleteDir",(t,{signal:a}={})=>u(this,k).call(this,{type:f.DELETE_DIR,data:{path:t}},void 0,a))}on(t,a){t==="log"?u(this,T).push(a):t==="progress"&&u(this,U).push(a)}off(t,a){t==="log"?j(this,T,u(this,T).filter(i=>i!==a)):t==="progress"&&j(this,U,u(this,U).filter(i=>i!==a))}}R=new WeakMap,S=new WeakMap,I=new WeakMap,T=new WeakMap,U=new WeakMap,K=new WeakMap,k=new WeakMap;var se;(function(r){r.MEMFS="MEMFS",r.NODEFS="NODEFS",r.NODERAWFS="NODERAWFS",r.IDBFS="IDBFS",r.WORKERFS="WORKERFS",r.PROXYFS="PROXYFS"})(se||(se={}));const Oe=new Error("failed to get response body reader"),$e=new Error("failed to complete download"),Ce="Content-Length",Ie=r=>new Promise((t,a)=>{const i=new FileReader;i.onload=()=>{const{result:n}=i;n instanceof ArrayBuffer?t(new Uint8Array(n)):t(new Uint8Array)},i.onerror=n=>{var v,b;a(Error(`File could not be read! Code=${((b=(v=n==null?void 0:n.target)==null?void 0:v.error)==null?void 0:b.code)||-1}`))},i.readAsArrayBuffer(r)}),ne=async r=>{let t;if(typeof r=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(r)?t=atob(r.split(",")[1]).split("").map(a=>a.charCodeAt(0)):t=await(await fetch(r)).arrayBuffer();else if(r instanceof URL)t=await(await fetch(r)).arrayBuffer();else if(r instanceof File||r instanceof Blob)t=await Ie(r);else return new Uint8Array;return new Uint8Array(t)},Me=async(r,t)=>{var n;const a=await fetch(r);let i;try{const v=parseInt(a.headers.get(Ce)||"-1"),b=(n=a.body)==null?void 0:n.getReader();if(!b)throw Oe;const x=[];let M=0;for(;;){const{done:m,value:O}=await b.read(),$=O?O.length:0;if(m){if(v!=-1&&v!==M)throw $e;t&&t({url:r,total:v,received:M,delta:$,done:m});break}x.push(O),M+=$,t&&t({url:r,total:v,received:M,delta:$,done:m})}const w=new Uint8Array(M);let c=0;for(const m of x)w.set(m,c),c+=m.length;i=w.buffer}catch(v){console.log("failed to send download progress event: ",v),i=await a.arrayBuffer()}return i},Y=async(r,t,a=!1,i)=>{const n=a?await Me(r,i):await(await fetch(r)).arrayBuffer(),v=new Blob([n],{type:t});return URL.createObjectURL(v)},Ae={class:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},_e={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},Se={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},Ve={class:"flex items-center"},Te={class:"text-blue-800 dark:text-blue-200"},Ue={class:"mb-8"},Be={class:"mt-4"},Pe={key:0,class:"mt-2 text-sm text-blue-600 dark:text-blue-400"},Ne={key:1,class:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},je={class:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400"},We={class:"mb-8"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ze={class:"text-center"},Xe=["disabled"],Ke={key:0,class:"inline-block h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={key:1,class:"inline-block h-5 w-5 mr-2 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qe={key:0,class:"mt-8"},Ye={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},qe={key:1,class:"mt-8"},Ze={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Je={key:2,class:"mt-8 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},q="https://cdn.jsdelivr.net/npm/@ffmpeg/core-mt@0.12.10/dist/esm",ao=he({__name:"VideoConverter",setup(r){const t=E(!1),a=E(!1),i=E(!1),n=E(0),v=E(null),b=E(null),x=E(""),M=E("请选择视频文件开始转换"),w=E(null),c=E(null),m=l=>{M.value=l,console.log(`[VideoConverter] ${l}`)},O=E("mp4"),$=E("high"),P=E("original"),N=E("original"),p=new Le;we(async()=>{p.off("log"),p.off("progress"),p.on("log",({message:l})=>{var o;if(a.value?(console.log(`[FFmpeg转换] ${l}`),m(l)):(l.includes("Duration:")||l.includes("Video:")||l.includes("Audio:"))&&console.log(`[FFmpeg信息] ${l}`),l.includes("Duration:")){const s=l.match(/Duration: (\d{2}):(\d{2}):(\d{2}\.\d{2})/);if(s){const d=parseInt(s[1]),g=parseInt(s[2]),D=parseFloat(s[3]),F=d*3600+g*60+D;c.value||(c.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),c.value.duration=F}}if(l.includes("Video:")){console.log("解析视频信息行:",l);const s=l.match(/(\d{3,4})x(\d{3,4})/),d=l.match(/(\d+) fps/),g=l.match(/Video: (\w+)/),D=l.match(/(\d+) kb\/s/);if(c.value||(c.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),s){const F=parseInt(s[1]),h=parseInt(s[2]);F>=100&&h>=100?(c.value.resolution=`${F}x${h}`,console.log("解析到分辨率:",c.value.resolution)):console.log("分辨率值不合理，跳过:",F,"x",h)}d&&(c.value.fps=parseInt(d[1]),console.log("解析到帧率:",c.value.fps)),g&&(c.value.videoCodec=g[1],console.log("解析到视频编解码器:",c.value.videoCodec)),D&&(c.value.bitrate=`${D[1]} kb/s`,console.log("解析到比特率:",c.value.bitrate))}if(l.includes("Audio:")){const s=l.match(/Audio: (\w+)/);c.value||(c.value={duration:0,fps:30,resolution:"未知",bitrate:"未知",videoCodec:"未知",audioCodec:"未知"}),s&&(c.value.audioCodec=s[1])}if(l.includes("frame=")){const s=l.match(/frame=\s*(\d+)/);if(s&&a.value){const d=parseInt(s[1]),g=((o=w.value)==null?void 0:o.totalFrames)||111,D=Math.min(d/g*70,70);n.value=20+D,console.log(`[转换进度] ${d}/${g} 帧 (${n.value.toFixed(1)}%) - ${new Date().toLocaleTimeString()}`)}}if(a.value){if(l.includes("Stream mapping:"))console.log("[转换阶段] 开始流映射...");else if(l.includes("Output #0"))console.log("[转换阶段] 开始输出...");else if(l.includes("frame=")&&l.includes("fps=")){const s=l.match(/fps=\s*(\d+)/);s&&console.log(`[转换性能] 当前FPS: ${s[1]}`)}}}),p.on("progress",({progress:l,time:o})=>{console.log(`[VideoConverter] 转换进度: ${l*100}%, 时间: ${o}`),l>0&&(n.value=20+l*70)});try{i.value=!0,m("正在加载FFmpeg...");const l=setInterval(()=>{n.value<80&&(n.value+=5,m(`正在加载FFmpeg... ${n.value}%`))},200);await p.load({coreURL:await Y(`${q}/ffmpeg-core.js`,"text/javascript"),wasmURL:await Y(`${q}/ffmpeg-core.wasm`,"application/wasm"),workerURL:await Y(`${q}/ffmpeg-core.worker.js`,"text/javascript")}),clearInterval(l),n.value=100,m("FFmpeg加载完成！"),t.value=!0,i.value=!1,console.log("检查ffprobe可用性:",typeof p.ffprobe),console.log("FFmpeg对象:",p),await new Promise(o=>setTimeout(o,1e3)),m("请选择视频文件开始转换"),n.value=0}catch(l){console.error("FFmpeg加载失败:",l),m("FFmpeg加载失败，请刷新页面重试"),i.value=!1}});const ie=async l=>{const o=l.target;o.files&&o.files[0]&&(v.value=o.files[0],b.value=null,x.value="",n.value=0,w.value=null,m(`已选择文件: ${v.value.name}`),await Z())},de=async l=>{var o;console.log(l),l.preventDefault(),(o=l.dataTransfer)!=null&&o.files&&l.dataTransfer.files[0]&&(v.value=l.dataTransfer.files[0],b.value=null,x.value="",n.value=0,w.value=null,m(`已选择文件: ${v.value.name}`),await Z())},ue=l=>{l.preventDefault()},Z=async()=>{if(v.value){if(!t.value){m("FFmpeg尚未加载完成，无法读取视频信息");return}try{m("正在读取视频信息..."),c.value=null;const l=ee(v.value.name);await p.writeFile(`temp_input.${l}`,await ne(v.value)),console.log("尝试使用exec获取视频信息...");try{if(await p.exec(["-i",`temp_input.${l}`]),c.value&&c.value.duration>0){const o=Math.round(c.value.duration*c.value.fps);w.value={duration:c.value.duration,fps:c.value.fps,totalFrames:o,resolution:c.value.resolution,bitrate:c.value.bitrate,format:l},m(`视频信息读取成功: ${c.value.resolution}, ${c.value.duration.toFixed(2)}秒, ${c.value.fps}fps`),console.log("解析到的视频信息:",c.value)}else throw new Error("无法解析视频信息")}catch(o){throw console.error("exec命令失败:",o),new Error("无法读取视频信息")}await p.deleteFile(`temp_input.${l}`)}catch(l){console.error("读取视频信息失败:",l),m("读取视频信息失败，无法继续转换"),w.value=null,v.value=null}}},ce=async()=>{var l,o;if(!v.value||!p){alert("请先选择视频文件");return}console.log("=== 开始分离式转换 ==="),console.log("FFmpeg实例:",p),console.log("选择文件:",v.value.name,"大小:",(v.value.size/1024/1024).toFixed(2),"MB"),console.log("输出格式:",O.value),console.log("视频质量:",$.value),console.log("分辨率设置:",P.value),console.log("帧率设置:",N.value),a.value=!0,n.value=0,m("正在加载FFmpeg...");try{if(!t.value){m("FFmpeg尚未加载完成，请稍候...");return}m("开始转换..."),n.value=10;const s=ee(v.value.name),d=O.value;m("正在写入输入文件..."),console.log("开始写入输入文件...");const g=Date.now();await p.writeFile(`input.${s}`,await ne(v.value));const D=Date.now()-g;console.log(`文件写入完成，耗时: ${D}ms`),n.value=20;const F=((l=c.value)==null?void 0:l.audioCodec)&&c.value.audioCodec!=="未知";if(console.log("检测到音频编解码器:",(o=c.value)==null?void 0:o.audioCodec),console.log("是否有音频流:",F),F)await ve(s,d);else{console.log("没有检测到音频流，直接转码视频"),m("正在转码视频..."),n.value=30;const h=J(s,d);console.log("视频转码命令:",h.join(" "));const L=new Promise((oe,Q)=>{setTimeout(()=>{Q(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)}),B=Date.now();await Promise.race([p.exec(h),L]);const H=Date.now()-B;console.log(`视频转码完成，耗时: ${H}ms`),n.value=90,await p.exec(["-i",`video_only.${d}`,"-c","copy","-y",`output.${d}`])}m("正在读取输出文件...");try{const h=await p.readFile(`output.${d}`);if(!h||h.length===0)throw new Error("输出文件为空或无效");b.value=new Blob([h.buffer],{type:`video/${d}`}),x.value=URL.createObjectURL(b.value),n.value=100,m("转换完成！"),console.log("=== 转换成功完成 ==="),console.log("输出文件大小:",h.length,"字节"),await G(s,d)}catch(h){console.error("读取输出文件失败:",h);try{const L=await p.readFile(`video_only.${d}`);if(L&&L.length>0){console.log("发现有效的视频文件，尝试直接使用"),b.value=new Blob([L.buffer],{type:`video/${d}`}),x.value=URL.createObjectURL(b.value),n.value=100,m("转换完成！（仅视频）"),console.log("=== 转换成功完成（仅视频）==="),console.log("输出文件大小:",L.length,"字节"),await G(s,d);return}}catch(L){console.error("视频文件也不存在:",L)}throw new Error(`读取输出文件失败: ${h.message||h.toString()}`)}}catch(s){console.error("=== 转换失败 ==="),console.error("错误对象:",s),console.error("错误类型:",s.constructor.name),console.error("错误消息:",s.message),console.error("错误字符串:",s.toString()),console.error("错误堆栈:",s.stack);let d="转换失败，请检查文件格式或重试";const g=s.message||s.toString()||"";g.includes("超时")?d="转换超时，建议：1. 尝试更小的文件 2. 降低视频质量设置 3. 检查网络连接":g.includes("编码器")?d="编码器错误，建议：1. 尝试不同的输出格式 2. 检查输入文件是否损坏":g.includes("内存")?d="内存不足，建议：1. 关闭其他程序 2. 尝试更小的文件":g.includes("stream")||g.includes("map")?d="流映射错误，建议：1. 尝试选择'仅视频'选项 2. 检查音频流是否兼容 3. 尝试不同的输出格式":(g.includes("音频")||g.includes("audio"))&&(d="音频处理错误，建议：1. 选择'仅视频'选项 2. 尝试不同的音频处理模式 3. 检查音频编码器兼容性"),m(d),alert(d),await G(inputExt,O.value)}finally{a.value=!1,i.value=!1,console.log("=== 转换流程结束 ===")}},ve=async(l,o)=>{console.log("=== 开始分离式转码 ===");const s=new Promise((d,g)=>{setTimeout(()=>{g(new Error("转换超时，请尝试更小的文件或更低的设置"))},1e3*60)});try{m("正在转码视频..."),n.value=30,console.log("步骤1: 转码视频（无音频）");const d=J(l,o);console.log("视频转码命令:",d.join(" "));const g=Date.now();await Promise.race([p.exec(d),s]);const D=Date.now()-g;console.log(`视频转码完成，耗时: ${D}ms`),n.value=50,m("正在处理音频..."),n.value=60,console.log("步骤2: 提取并转码音频");const F=me(l);console.log("音频转码命令:",F.join(" "));const h=Date.now();await Promise.race([p.exec(F),s]);const L=Date.now()-h;console.log(`音频转码完成，耗时: ${L}ms`),n.value=70,m("正在合并视频和音频..."),n.value=80,console.log("步骤3: 重新组合视频和音频");try{const B=await p.readFile("audio.aac");if(!B||B.length===0)console.warn("音频文件为空，跳过音频合并"),await p.exec(["-i",`video_only.${o}`,"-c","copy","-y",`output.${o}`]);else{const H=fe(o);console.log("合并命令:",H.join(" "));const oe=Date.now();await Promise.race([p.exec(H),s]);const Q=Date.now()-oe;console.log(`合并完成，耗时: ${Q}ms`)}}catch(B){console.warn("音频处理失败，使用仅视频输出:",B),await p.exec(["-i",`video_only.${o}`,"-c","copy","-y",`output.${o}`])}n.value=90,console.log("=== 分离式转码完成 ==="),console.log(`总耗时: ${D+L+mergeTime}ms`)}catch(d){throw console.error("分离式转码失败:",d),d}},J=(l,o)=>{const s=["-i",`input.${l}`];if(P.value!=="original"){const g={"4k":"3840:2160","1080p":"1920:1080","720p":"1280:720","480p":"854:480"};s.push("-vf",`scale=${g[P.value]}`)}N.value!=="original"&&s.push("-r",N.value);const d=$.value==="high"?18:$.value==="medium"?23:28;return s.push("-c:v","libx264","-preset","ultrafast","-crf",d.toString()),s.push("-an"),s.push("-y",`video_only.${o}`),s},me=l=>{const o=["-i",`input.${l}`];return o.push("-vn"),o.push("-c:a","aac","-b:a","128k","-ar","48000"),o.push("-y","audio.aac"),o},fe=l=>["-i",`video_only.${l}`,"-i","audio.aac","-c:v","copy","-c:a","copy","-shortest","-y",`output.${l}`],G=async(l,o)=>{try{const s=[`input.${l}`,`video_only.${o}`,"audio.aac",`output.${o}`];for(const d of s)try{await p.deleteFile(d),console.log(`已删除临时文件: ${d}`)}catch(g){console.warn(`删除临时文件 ${d} 失败:`,g)}console.log("转换完成，已清理临时文件")}catch(s){console.warn("清理临时文件失败:",s)}},ee=l=>{var o;return((o=l.split(".").pop())==null?void 0:o.toLowerCase())||"mp4"},ge=()=>{if(b.value&&x.value){const l=document.createElement("a");l.href=x.value,l.download=`converted.${O.value}`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}};return(l,o)=>(_(),xe(Ee,{title:"视频格式转换 - 小左子的工具箱"},{default:ye(()=>[o[28]||(o[28]=e("div",{class:"bg-white dark:bg-gray-800 shadow-sm"},[e("div",{class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},[e("div",{class:"flex items-center space-x-4"},[e("div",{class:"h-12 w-12 rounded-lg bg-blue-600 flex items-center justify-center"},[e("svg",{class:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])]),e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"视频格式转换"),e("p",{class:"text-gray-600 dark:text-gray-400"},"支持多种格式视频转换，快速高效")])])])],-1)),e("div",Ae,[e("div",_e,[e("div",Se,[e("div",Ve,[o[4]||(o[4]=e("svg",{class:"h-5 w-5 text-blue-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Te,C(M.value),1)])]),e("div",Ue,[o[9]||(o[9]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 选择视频文件 ",-1)),e("div",{onDrop:de,onDragover:ue,class:ke(["border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-400 transition-colors",{"border-blue-400 bg-blue-50 dark:bg-blue-900/20":v.value}])},[o[8]||(o[8]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",Be,[o[6]||(o[6]=e("label",{for:"file-upload",class:"cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors"}," 选择文件 ",-1)),e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"video/*",onChange:ie},null,32),o[7]||(o[7]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 支持 MP4, AVI, MOV, MKV, WMV 等格式 ",-1)),v.value?(_(),V("p",Pe," 已选择: "+C(v.value.name),1)):W("",!0),w.value?(_(),V("div",Ne,[o[5]||(o[5]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-2"}," 视频信息 ",-1)),e("div",je,[e("div",null,"时长: "+C(w.value.duration.toFixed(2))+"秒",1),e("div",null,"帧率: "+C(w.value.fps.toFixed(2))+"fps",1),e("div",null,"总帧数: "+C(w.value.totalFrames),1),e("div",null,"分辨率: "+C(w.value.resolution),1),e("div",null,"比特率: "+C(w.value.bitrate),1),e("div",null,"格式: "+C(w.value.format),1)])])):W("",!0)])],34)]),e("div",We,[o[18]||(o[18]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"}," 转换选项 ",-1)),e("div",He,[e("div",null,[o[11]||(o[11]=e("label",{for:"output-format",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 输出格式 ",-1)),z(e("select",{id:"output-format","onUpdate:modelValue":o[0]||(o[0]=s=>O.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[10]||(o[10]=[e("option",{value:"mp4"},"MP4",-1),e("option",{value:"avi"},"AVI",-1),e("option",{value:"mov"},"MOV",-1),e("option",{value:"mkv"},"MKV",-1),e("option",{value:"wmv"},"WMV",-1),e("option",{value:"flv"},"FLV",-1)]),512),[[X,O.value]])]),e("div",null,[o[13]||(o[13]=e("label",{for:"video-quality",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 视频质量 ",-1)),z(e("select",{id:"video-quality","onUpdate:modelValue":o[1]||(o[1]=s=>$.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[12]||(o[12]=[e("option",{value:"high"},"高质量",-1),e("option",{value:"medium"},"中等质量",-1),e("option",{value:"low"},"低质量",-1)]),512),[[X,$.value]])]),e("div",null,[o[15]||(o[15]=e("label",{for:"resolution",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 分辨率 ",-1)),z(e("select",{id:"resolution","onUpdate:modelValue":o[2]||(o[2]=s=>P.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[14]||(o[14]=[e("option",{value:"original"},"保持原分辨率",-1),e("option",{value:"4k"},"4K (3840x2160)",-1),e("option",{value:"1080p"},"1080p (1920x1080)",-1),e("option",{value:"720p"},"720p (1280x720)",-1),e("option",{value:"480p"},"480p (854x480)",-1)]),512),[[X,P.value]])]),e("div",null,[o[17]||(o[17]=e("label",{for:"framerate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 帧率 ",-1)),z(e("select",{id:"framerate","onUpdate:modelValue":o[3]||(o[3]=s=>N.value=s),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"},o[16]||(o[16]=[e("option",{value:"original"},"保持原帧率",-1),e("option",{value:"60"},"60 FPS",-1),e("option",{value:"30"},"30 FPS",-1),e("option",{value:"25"},"25 FPS",-1),e("option",{value:"24"},"24 FPS",-1)]),512),[[X,N.value]])])])]),e("div",ze,[e("button",{onClick:ce,disabled:!v.value||!w.value||a.value||!t.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium py-3 px-8 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[a.value?(_(),V("svg",Ge,o[20]||(o[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(_(),V("svg",Ke,o[19]||(o[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))),le(" "+C(a.value?"转换中...":"开始转换"),1)],8,Xe)]),i.value?(_(),V("div",Qe,[o[21]||(o[21]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"}," FFmpeg加载进度 ",-1)),e("div",Ye,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:re({width:n.value+"%"})},null,4)]),o[22]||(o[22]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 正在加载FFmpeg核心文件，请稍候... ",-1))])):W("",!0),a.value&&!i.value?(_(),V("div",qe,[o[23]||(o[23]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"转换进度",-1)),e("div",Ze,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:re({width:n.value+"%"})},null,4)]),o[24]||(o[24]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 正在转换中，请稍候... ",-1))])):W("",!0),b.value&&x.value?(_(),V("div",Je,[e("div",{class:"flex items-center justify-between"},[o[26]||(o[26]=e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-green-800 dark:text-green-200"},"转换完成！")],-1)),e("button",{onClick:ge,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition-colors"},o[25]||(o[25]=[e("svg",{class:"inline-block h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),le(" 下载文件 ",-1)]))])])):W("",!0)]),o[27]||(o[27]=e("div",{class:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"功能说明"),e("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输入格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid, DivX)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])]),e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," 支持的输出格式 "),e("ul",{class:"text-gray-600 dark:text-gray-400 space-y-1"},[e("li",null,"• MP4 (H.264, H.265)"),e("li",null,"• AVI (Xvid)"),e("li",null,"• MOV (QuickTime)"),e("li",null,"• MKV (Matroska)"),e("li",null,"• WMV (Windows Media)"),e("li",null,"• FLV (Flash Video)")])])]),e("div",{class:"mt-6"},[e("div",{class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md"},[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("h4",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," 智能分离转码 "),e("p",{class:"text-sm text-green-700 dark:text-green-300 mt-1"}," 系统采用分离式转码技术，分别处理视频和音频，有效避免转换卡住问题，提供更稳定的转换体验。 "),e("div",{class:"mt-2 text-xs text-green-600 dark:text-green-400"},[e("div",null,"• 自动检测音频流并选择最佳处理方式"),e("div",null,"• 视频和音频独立处理，避免相互影响"),e("div",null,"• 支持多种音频编码器，兼容性更好")])])])])])],-1))])]),_:1,__:[28]}))}});export{ao as default};
